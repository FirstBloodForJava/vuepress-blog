import{_ as n,c as a,e,o as l}from"./app-DO9Fsueg.js";const i={};function t(p,s){return l(),a("div",null,s[0]||(s[0]=[e(`<h1 id="elasticsearch" tabindex="-1"><a class="header-anchor" href="#elasticsearch"><span>Elasticsearch</span></a></h1><p>学习博客：https://blog.csdn.net/qq_37128049/article/details/118002656</p><p>elasticsearch官网文档（旧）：https://www.elastic.co/guide/cn/elasticsearch/guide/current/partial-updates.html</p><p>官方文档：https://www.elastic.co/guide/en/elasticsearch/reference/7.17/getting-started.html</p><h2 id="什么是elasticsearch" tabindex="-1"><a class="header-anchor" href="#什么是elasticsearch"><span>什么是Elasticsearch</span></a></h2><p>Elasticsearch是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java语言开发的，并作为Apache许可条款下的开放源码发布，是一种流行的企业级搜索引擎。Elasticsearch用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。官方客户端在Java、.NET（C#）、PHP、Python、Apache Groovy、Ruby和许多其他语言中都是可用的。</p><ul><li>Lucene</li></ul><p>Lucene是apache软件基金会 jakarta项目组的一个子项目，是一个开放源代码的全文检索引擎工具包，但它不是一个完整的全文检索引擎，而是一个全文检索引擎的架构，提供了完整的查询引擎和索引引擎，部分文本分析引擎（英文与德文两种西方语言）。Lucene的目的是为软件开发人员提供一个简单易用的工具包，以方便的在目标系统中实现全文检索的功能，或者是以此为基础建立起完整的全文检索引擎。Lucene是一套用于全文检索和搜寻的开源程式库，由Apache软件基金会支持和提供。Lucene提供了一个简单却强大的应用程式接口，能够做全文索引和搜寻。在Java开发环境里Lucene是一个成熟的免费开源工具。就其本身而言，Lucene是当前以及最近几年最受欢迎的免费Java<strong>信息检索程序库</strong>。人们经常提到<strong>信息检索程序库</strong>，虽然与<strong>搜索引擎</strong>有关，但不应该将信息检索程序库与搜索引擎相混淆。</p><h2 id="elasticsearch使用" tabindex="-1"><a class="header-anchor" href="#elasticsearch使用"><span>Elasticsearch使用</span></a></h2><h3 id="安装elasticsearch" tabindex="-1"><a class="header-anchor" href="#安装elasticsearch"><span>安装Elasticsearch</span></a></h3><p>官网下载地址：https://www.elastic.co/cn/downloads/elasticsearch</p><p>下载压缩包，解压到安装目录下即可，需要jdk，java运行时环境。</p><p>下载的是elatcisearch8.2.2版本，启动之后http://localhost:9200不能访问，解决办法，修改conf/elasticsearch.yml文件如下为false</p><figure><img src="http://47.101.155.205/image-20220602202902728.png" alt="image-20220602202902728" tabindex="0" loading="lazy"><figcaption>image-20220602202902728</figcaption></figure><p>访问成功</p><figure><img src="http://47.101.155.205/image-20220602203508864.png" alt="image-20220602203508864" tabindex="0" loading="lazy"><figcaption>image-20220602203508864</figcaption></figure><h3 id="head安装" tabindex="-1"><a class="header-anchor" href="#head安装"><span>head安装</span></a></h3><p>官网下载地址：https://github.com/mobz/elasticsearch-head</p><p>在安装目录下cmd，需要node.js环境，使用npm install命令，或者cnpm install镜像安装</p><figure><img src="http://47.101.155.205/image-20220602205139809.png" alt="image-20220602205139809" tabindex="0" loading="lazy"><figcaption>image-20220602205139809</figcaption></figure><p>这里没有结果，也是安装成功了</p><p>使用cnpm安装</p><figure><img src="http://47.101.155.205/image-20220602210216547.png" alt="image-20220602210216547" tabindex="0" loading="lazy"><figcaption>image-20220602210216547</figcaption></figure><p>启动</p><figure><img src="http://47.101.155.205/image-20220602205554249.png" alt="image-20220602205554249" tabindex="0" loading="lazy"><figcaption>image-20220602205554249</figcaption></figure><p>出现跨域问题</p><div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token comment">#elaticsearch.yml配置文件添加配置</span></span>
<span class="line"><span class="token key atrule">http.cors.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"><span class="token key atrule">http.cors.allow-origin</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span></span>
<span class="line"></span></code></pre></div><p>配置文件出错会导致闪退</p><h3 id="kibana安装" tabindex="-1"><a class="header-anchor" href="#kibana安装"><span>Kibana安装</span></a></h3><p>官网下载地址：https://www.elastic.co/cn/downloads/kibana</p><p>国际化</p><p>修改配置文件</p><h3 id="ik分词器" tabindex="-1"><a class="header-anchor" href="#ik分词器"><span>ik分词器</span></a></h3><p>git下载：https://github.com/medcl/elasticsearch-analysis-ik</p><p>解压到elstaticsearch安装目录的plugins目录中</p><p>ik分词器的分词算法：ik_smart最少切分和ik_max_word最细粒度划分</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">elasticsearch-plugin list</span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20220602230752341.png" alt="image-20220602230752341" tabindex="0" loading="lazy"><figcaption>image-20220602230752341</figcaption></figure><ul><li>解决ik分词器版本和elasticsearch版本不一致不能启动问题</li></ul><figure><img src="http://47.101.155.205/image-20220602231002538.png" alt="image-20220602231002538" tabindex="0" loading="lazy"><figcaption>image-20220602231002538</figcaption></figure><ul><li>测试ik分词器效果</li></ul><figure><img src="http://47.101.155.205/image-20220602232116155.png" alt="image-20220602232116155" tabindex="0" loading="lazy"><figcaption>image-20220602232116155</figcaption></figure><ul><li>自定义分词器字典</li></ul><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IKAnalyzer.cfg.xml <span class="token comment">#文件修改配置，绑定自定义的dic</span></span>
<span class="line"><span class="token comment">#自定义词典失效的原因，没有修改dic文件的编码格式，编码格式要一致，为UTF-8</span></span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20220602233802760.png" alt="image-20220602233802760" tabindex="0" loading="lazy"><figcaption>image-20220602233802760</figcaption></figure><h3 id="elasticsearch相关概念介绍" tabindex="-1"><a class="header-anchor" href="#elasticsearch相关概念介绍"><span>Elasticsearch相关概念介绍</span></a></h3><div class="language-tex" data-highlighter="prismjs" data-ext="tex" data-title="tex"><pre><code><span class="line">Relation DB -&gt; Databases -&gt;tables -&gt;rows -columns</span>
<span class="line">Elasticsearch -&gt;indeies(index) -&gt; types -&gt; documents -&gt; fields</span>
<span class="line"></span></code></pre></div><p><strong>cluster</strong>：代表一个集群，集群中有多个节点，其中有一个为主节点，这个主节点是可以通过选举产生的，主从节点是对于集群内部来说的。es的一个概念就是去中心化，字面上理解就是无中心节点，这是对于集群外部来说的，因为从外部来看es集群，在逻辑上是个整体，你与任何一个节点的通信和与整个es集群通信是等价的。</p><p><strong>shards</strong>：代表索引分片，es可以把一个完整的索引分成多个分片，这样的好处是可以把一个大的索引拆分成多个，分布到不同的节点上。构成分布式搜索。分片的数量只能在索引创建前指定，并且索引创建后不能更改。</p><p><strong>replicas</strong>：代表索引副本，es可以设置多个索引的副本，副本的作用一是提高系统的容错性，当某个节点某个分片损坏或丢失时可以从副本中恢复。二是提高es的查询效率，es会自动对搜索请求进行负载均衡。</p><p><strong>recovery</strong>：代表数据恢复或叫数据重新分布，es在有节点加入或退出时会根据机器的负载对索引分片进行重新分配，挂掉的节点重新启动时也会进行数据恢复。</p><p><strong>river</strong>：代表es的一个数据源，也是其它存储方式（如：数据库）同步数据到es的一个方法。它是以插件方式存在的一个es服务，通过读取river中的数据并把它索引到es中，官方的river有couchDB的，RabbitMQ的，Twitter的，Wikipedia的。</p><p><strong>gateway</strong>：代表es索引快照的存储方式，es默认是先把索引存放到内存中，当内存满了时再持久化到本地硬盘。gateway对索引快照进行存储，当这个es集群关闭再重新启动时就会从gateway中读取索引备份数据。es支持多种类型的gateway，有本地文件系统（默认），分布式文件系统，Hadoop的HDFS和amazon的s3云存储服务。</p><p><strong>discovery.zen</strong>：代表es的自动发现节点机制，es是一个基于p2p的系统，它先通过广播寻找存在的节点，再通过多播协议来进行节点之间的通信，同时也支持点对点的交互。</p><p><strong>Transport</strong>：代表es内部节点或集群与客户端的交互方式，默认内部是使用tcp协议进行交互，同时它支持http协议（json格式）、thrift、servlet、memcached、zeroMQ等的传输协议（通过插件方式集成）。</p><p><strong>mapping</strong>：映射</p><p>GET _cat/health</p><h3 id="elasticseach的使用" tabindex="-1"><a class="header-anchor" href="#elasticseach的使用"><span>Elasticseach的使用</span></a></h3><ul><li>使用请求的方式创建索引</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">PUT index1 <span class="token comment">#创建一个普通的索引，执行结果如下</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;acknowledged&quot;</span> <span class="token builtin class-name">:</span> true,</span>
<span class="line">  <span class="token string">&quot;shards_acknowledged&quot;</span> <span class="token builtin class-name">:</span> true,</span>
<span class="line">  <span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;index1&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#创建索引并指定他的映射关系,执行结果如下</span></span>
<span class="line">PUT index1</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;mappings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;properties&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;text&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span>,</span>
<span class="line">      <span class="token string">&quot;age&quot;</span>:<span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;integer&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;acknowledged&quot;</span> <span class="token builtin class-name">:</span> true,</span>
<span class="line">  <span class="token string">&quot;shards_acknowledged&quot;</span> <span class="token builtin class-name">:</span> true,</span>
<span class="line">  <span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;index1&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>往索引里面添加文档，文档类型必须为**_doc**，不指定_id,请求必须为post，如果索引不存在，创建一个索引</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment">#语法 put _index/_doc/_id,其中_index和_id可以指定，_doc不变</span></span>
<span class="line">PUT index1/_doc/1</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;张三&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;34&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;index1&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_version&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,</span>
<span class="line">  <span class="token string">&quot;result&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;created&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_shards&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;total&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,</span>
<span class="line">    <span class="token string">&quot;successful&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,</span>
<span class="line">    <span class="token string">&quot;failed&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span></span>
<span class="line">  <span class="token punctuation">}</span>,</span>
<span class="line">  <span class="token string">&quot;_seq_no&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,</span>
<span class="line">  <span class="token string">&quot;_primary_term&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">#可以在创建索引时，指定字段的类型及其他设置，如果后期添加文档没有这个字段，会自动创建一个字段映射</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>删除索引</li></ul><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">delete index <span class="token comment">#删除名为index的索引，返回结果如下</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;acknowledged&quot;</span> <span class="token builtin class-name">:</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul><li>删除索引文档</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">delete _index/_doc/_id <span class="token comment">#解释_index往哪个索引里面删除文档，_doc删除文档的类型， _id文档的id</span></span>
<span class="line">DELETE index1/_doc/1</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;index1&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_version&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,</span>
<span class="line">  <span class="token string">&quot;result&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;deleted&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_shards&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;total&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,</span>
<span class="line">    <span class="token string">&quot;successful&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,</span>
<span class="line">    <span class="token string">&quot;failed&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span></span>
<span class="line">  <span class="token punctuation">}</span>,</span>
<span class="line">  <span class="token string">&quot;_seq_no&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">5</span>,</span>
<span class="line">  <span class="token string">&quot;_primary_term&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>修改索引文档内容</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">PUT index1/_doc/3 <span class="token comment">#修改索引index1文档id为3的数据</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;钱七&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;22&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;index1&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;3&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_version&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">4</span>,</span>
<span class="line">  <span class="token string">&quot;result&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;updated&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_shards&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;total&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,</span>
<span class="line">    <span class="token string">&quot;successful&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,</span>
<span class="line">    <span class="token string">&quot;failed&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span></span>
<span class="line">  <span class="token punctuation">}</span>,</span>
<span class="line">  <span class="token string">&quot;_seq_no&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>,</span>
<span class="line">  <span class="token string">&quot;_primary_term&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>部分修改索引文档</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">POST index1/_update/2 <span class="token comment">#修改index1索引中id为2的name字段属性值</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;doc&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;lsdebb&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;index1&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_version&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,</span>
<span class="line">  <span class="token string">&quot;result&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;updated&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_shards&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;total&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,</span>
<span class="line">    <span class="token string">&quot;successful&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,</span>
<span class="line">    <span class="token string">&quot;failed&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span></span>
<span class="line">  <span class="token punctuation">}</span>,</span>
<span class="line">  <span class="token string">&quot;_seq_no&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">5</span>,</span>
<span class="line">  <span class="token string">&quot;_primary_term&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查询指定id文档索引</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">get index1/_doc/1 <span class="token comment">#查询索引index1中id为1的文档</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;index1&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>,</span>
<span class="line">  <span class="token string">&quot;_version&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span>,</span>
<span class="line">  <span class="token string">&quot;_seq_no&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span>,</span>
<span class="line">  <span class="token string">&quot;_primary_term&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,</span>
<span class="line">  <span class="token string">&quot;found&quot;</span> <span class="token builtin class-name">:</span> true,</span>
<span class="line">  <span class="token string">&quot;_source&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1111·&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>匹配字段查询</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">POST index1/_search</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;match&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;张三&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">GET index1/_search</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;match&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;张三&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://47.101.155.205/image-20220603192443622.png" alt="image-20220603192443622" tabindex="0" loading="lazy"><figcaption>image-20220603192443622</figcaption></figure><ul><li>get匹配字段查询</li></ul><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">GET index1/_search/?q<span class="token operator">=</span>name:三</span>
<span class="line"></span></code></pre></div><ul><li>过滤field字段</li></ul><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">GET index1/_search</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;match&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;张三&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span>,</span>
<span class="line">  <span class="token string">&quot;_source&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ul><li>指定排序字段</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">GET index1/_search</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;match&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;张三&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span>,</span>
<span class="line">  <span class="token string">&quot;sort&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;order&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;asc&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>指定展示数据</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">GET index1/_search</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;match&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;张三&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span>,</span>
<span class="line">  <span class="token string">&quot;from&quot;</span><span class="token builtin class-name">:</span> <span class="token number">1</span>,</span>
<span class="line">  <span class="token string">&quot;size&quot;</span><span class="token builtin class-name">:</span> <span class="token number">20</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>指定多条件</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">GET index1/_search</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;bool&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;must&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span><span class="token string">&quot;match&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;张三&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">}</span>,</span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">          <span class="token string">&quot;term&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token string">&quot;value&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;22&quot;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>高亮查询</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">GET index1/_search</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;match&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;张&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span>,</span>
<span class="line">  <span class="token string">&quot;highlight&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;pre_tags&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&lt;a&gt;&quot;</span>,</span>
<span class="line">    <span class="token string">&quot;post_tags&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&lt;/a&gt;&quot;</span>,</span>
<span class="line">    <span class="token string">&quot;fields&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="springboot集成elasticsearch" tabindex="-1"><a class="header-anchor" href="#springboot集成elasticsearch"><span>SpringBoot集成Elasticsearch</span></a></h2>`,88)]))}const o=n(i,[["render",t],["__file","Elasticsearch.html.vue"]]),u=JSON.parse('{"path":"/monitoring/Elasticsearch.html","title":"Elasticsearch","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"什么是Elasticsearch","slug":"什么是elasticsearch","link":"#什么是elasticsearch","children":[]},{"level":2,"title":"Elasticsearch使用","slug":"elasticsearch使用","link":"#elasticsearch使用","children":[{"level":3,"title":"安装Elasticsearch","slug":"安装elasticsearch","link":"#安装elasticsearch","children":[]},{"level":3,"title":"head安装","slug":"head安装","link":"#head安装","children":[]},{"level":3,"title":"Kibana安装","slug":"kibana安装","link":"#kibana安装","children":[]},{"level":3,"title":"ik分词器","slug":"ik分词器","link":"#ik分词器","children":[]},{"level":3,"title":"Elasticsearch相关概念介绍","slug":"elasticsearch相关概念介绍","link":"#elasticsearch相关概念介绍","children":[]},{"level":3,"title":"Elasticseach的使用","slug":"elasticseach的使用","link":"#elasticseach的使用","children":[]}]},{"level":2,"title":"SpringBoot集成Elasticsearch","slug":"springboot集成elasticsearch","link":"#springboot集成elasticsearch","children":[]}],"git":{"updatedTime":1737272098000,"contributors":[{"name":"oycm","username":"oycm","email":"1164864987@qq.com","commits":2,"url":"https://github.com/oycm"}]},"filePathRelative":"monitoring/Elasticsearch.md"}');export{o as comp,u as data};
