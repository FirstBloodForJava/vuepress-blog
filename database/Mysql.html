<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><title>MySQL | VuePress</title><meta name="description" content="基于MarkDown文档使用VuePress搭建的博客">
    <link rel="preload" href="/vuepress-blog/assets/style-D-WmDmAb.css" as="style"><link rel="stylesheet" href="/vuepress-blog/assets/style-D-WmDmAb.css">
    <link rel="modulepreload" href="/vuepress-blog/assets/app-DO9Fsueg.js"><link rel="modulepreload" href="/vuepress-blog/assets/Mysql.html-BiJj5AZE.js">
    <link rel="prefetch" href="/vuepress-blog/assets/index.html-CgVhTvye.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ErrorFile文件分析.html-CuB6Lnq0.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JVM.html-BtUUS9Pr.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JVM调优理论.html-DBID5eOn.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Java多线程理论.html-CBRTf5uA.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/垃圾收集器和内存分配策略.html-z-FpgxDX.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/虚拟机性能监控工具.html-Cq5K7pVg.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/EnumSet集合.html-auMW9YVh.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/IO.html-AvyPBQEI.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JUC.html-CzUxv_Pn.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JavaSE.html-DJRyxNaU.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JavaWeb.html-ACOExpIh.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Java多线程使用.html-BUYuXRgk.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Java注解.html-B1LnzN5S.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Java进阶.html-jat1DMAL.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Netty.html-c7VNOxfH.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Reactor.html-cKJjLYIS.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/javaUtil.html-CfNdtUxb.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/networkModel.html-OCR-YMb0.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/recursion.html-DcyGA3Xt.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/divideAndConquer.html-BaAvuzQh.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/dp.html-B-EeH5B4.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/scala-algorithm.html-DRo4PTOJ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/数据结构.html-CGRo_hSS.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Docker.html-LTKOSr3R.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/gradle.html-2c9c7723.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/gradle管理Java项目.html-B7g76hJp.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/maven.html-DxKyK8N2.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/maven项目切换gradle步骤.html-c1Y_l20r.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/DruidPoolProblem.html-DZYAzLg0.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/InfluxDB.html-DsdhiHOD.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/MongoDB.html-CxNK2iZF.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Oracle-SQLErr.html-CRfrkdp9.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Oracle.html-4EKFKB4d.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ShardingSphere.html-Q-7uUH24.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Transactional.html-vApXhnic.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/seata.html-B8IU6IFF.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JavaScript.html-CbYt5ETE.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/VSCode.html-B8f1liMb.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/css.html-0NLxhTS_.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/html.html-ybbo6GZM.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/nodejs.html-Buy9XCSx.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/vue.html-CmRM6eZ9.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Linux.html-BBLCfquW.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Linux进阶.html-DjZE2InM.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Redis.html-BXScl8xj.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/TCP.html-B94gSvYE.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/problem.html-CWvec0WR.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/shell语法.html-iTPSj5Vp.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ELK.html-HLvJvvSB.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Elasticsearch.html-C2wm_jil.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Logstash-8.15.html-B9cqj-9W.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/prometheus.html-7KxZbjQj.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ActiveMQ.html-BQO8QkIp.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/RabbitMQ.html-DleajACb.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/kafka.html-D-RfjmZX.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/nginx.html-DHZst6uR.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/nginx配置代理400.html-DjuDyiN5.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/nginx配置代理https请求步骤.html-BgCsPCQg.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Hadoop.html-vRDtCAkj.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Scala-Collection.html-xrlKDKkR.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Scala.html-y-wIhRq2.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spark.html-TQz-28TE.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/DesignMode.html-C7RhC9cN.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpecialInterfaceFunction.html-C4AvaMM5.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Spring注解介绍.html-B3P0-N_X.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/logFramework.html-BCgd30fL.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/util.html-DJwkNW2j.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Micrometer.html-CTHrhx1u.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpringBoot-2.2.7.RELEASE.html-B2yYZFFW.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-kafka.html-BuZ8tYZj.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/starter-actuator.html-BToIUEwp.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/starter-embedded.html-DpywyKsf.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/starter-web.html-Csiz2djH.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/AlibabaSentinel.html-v7HaMGAZ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Dubbo.html-B6wCjZgK.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpringCloud.html-De7YP-j8.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ZooKeeper.html-CYVLgcVW.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/nacos.html-GdTPk_Ec.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-sleuth.html-xnzWZhiL.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/DDD.html-CRCki5wg.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JMeter.html-BVccKwqN.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/WebService.html-Z61X4v8l.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/XXL-Job.html-DP50CjVJ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/cron.html-DwqnmJBK.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/git.html-CZXv2_Vh.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/gitlab.html-BH60tmjP.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/uml.html-ozaggXxj.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/yaml.html-C9RVbdDw.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/vuepress使用介绍.html-BPLICjpR.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/DateBufferAndCodecs.html-pNZh2MeD.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-core-AOP.html-3sMUwZ-4.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-core-SpEL.html-CsiOTvJR.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-core-ioc.html-BK5W5yLq.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Dao.html-DJUynJSA.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpringDataJPA.html-CWHVdqiD.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/transactionManagement.html-C3uQ1hGE.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpringWebFlux.html-DGVHb9-o.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/WebClient.html-CPsdj9Kh.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpringMVC.html-B3rXwNBA.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/WebSocket.html-BvKH3j3Q.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-cloud-gateway-core.html-Cx_gelJN.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-cloud-gateway.html-gEstQ1Oo.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-cloud-starter-netflix-zuul.html-DYfUOVuP.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/404.html-C7RfyDVO.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index-DuqNHZ2Z.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/setupDevtools-7MC2TMWH-BhzL1irs.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/vuepress-blog/"><!----><span class="vp-site-name" aria-hidden="true">VuePress</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法策略"><span class="title">算法策略</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法策略"><span class="title">算法策略</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/recursion.html" aria-label="递归"><!---->递归<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/divideAndConquer.html" aria-label="分治"><!---->分治<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/dp.html" aria-label="动态规划"><!---->动态规划<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" aria-label="数据结构"><!---->数据结构<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/scala-algorithm.html" aria-label="scala-algorithm"><!---->scala-algorithm<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="vue"><span class="title">vue</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="vue"><span class="title">vue</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>vuepress</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/vuepress/vuepress%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D.html" aria-label="vuepress使用介绍"><!---->vuepress使用介绍<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/html.html" aria-label="html"><!---->html<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/css.html" aria-label="css"><!---->css<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/JavaScript.html" aria-label="JavaScript"><!---->JavaScript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/VSCode.html" aria-label="VSCode"><!---->VSCode<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/vue.html" aria-label="vue"><!---->vue<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="nginx"><span class="title">nginx</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="nginx"><span class="title">nginx</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx.html" aria-label="nginx"><!---->nginx<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86https%E8%AF%B7%E6%B1%82%E6%AD%A5%E9%AA%A4.html" aria-label="nginx配置代理https请求步骤"><!---->nginx配置代理https请求步骤<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86400.html" aria-label="nginx配置代理400"><!---->nginx配置代理400<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="监控"><span class="title">监控</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="监控"><span class="title">监控</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/Elasticsearch.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/ELK.html" aria-label="ELK"><!---->ELK<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/Logstash-8.15.html" aria-label="Logstash"><!---->Logstash<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/prometheus.html" aria-label="prometheus"><!---->prometheus<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaEE"><span class="title">JavaEE</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaEE"><span class="title">JavaEE</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JavaSE.html" aria-label="JavaSE"><!---->JavaSE<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E8%BF%9B%E9%98%B6.html" aria-label="进阶"><!---->进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JavaWeb.html" aria-label="JavaWeb"><!---->JavaWeb<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BD%BF%E7%94%A8.html" aria-label="Java多线程使用"><!---->Java多线程使用<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JUC.html" aria-label="JUC"><!---->JUC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/EnumSet%E9%9B%86%E5%90%88.html" aria-label="EnumSet集合"><!---->EnumSet集合<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E6%B3%A8%E8%A7%A3.html" aria-label="Java注解"><!---->Java注解<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/javaUtil.html" aria-label="javaUtil"><!---->javaUtil<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/networkModel.html" aria-label="网络模型"><!---->网络模型<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/IO.html" aria-label="JavaIO"><!---->JavaIO<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Netty.html" aria-label="Netty"><!---->Netty<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Reactor.html" aria-label="Reactor"><!---->Reactor<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="构建工具"><span class="title">构建工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="构建工具"><span class="title">构建工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/maven.html" aria-label="maven"><!---->maven<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/Docker.html" aria-label="Docker"><!---->Docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/gradle.html" aria-label="gradle"><!---->gradle<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/gradle%E7%AE%A1%E7%90%86Java%E9%A1%B9%E7%9B%AE.html" aria-label="gradle管理Java项目"><!---->gradle管理Java项目<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/maven%E9%A1%B9%E7%9B%AE%E5%88%87%E6%8D%A2gradle%E6%AD%A5%E9%AA%A4.html" aria-label="maven项目切换gradle步骤"><!---->maven项目切换gradle步骤<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JVM"><span class="title">JVM</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JVM"><span class="title">JVM</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/JVM.html" aria-label="JVM"><!---->JVM<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E5%92%8C%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5.html" aria-label="垃圾收集器和内存分配策略"><!---->垃圾收集器和内存分配策略<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7.html" aria-label="虚拟机性能监控工具"><!---->虚拟机性能监控工具<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/JVM%E8%B0%83%E4%BC%98%E7%90%86%E8%AE%BA.html" aria-label="JVM调优理论"><!---->JVM调优理论<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%90%86%E8%AE%BA.html" aria-label="Java多线程理论"><!---->Java多线程理论<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/ErrorFile%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90.html" aria-label="ErrorFile文件分析"><!---->ErrorFile文件分析<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="linux"><span class="title">linux</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="linux"><span class="title">linux</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Linux.html" aria-label="Linux"><!---->Linux<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/shell%E8%AF%AD%E6%B3%95.html" aria-label="shell语法"><!---->shell语法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/TCP.html" aria-label="tcp"><!---->tcp<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Redis.html" aria-label="Redis"><!---->Redis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Linux%E8%BF%9B%E9%98%B6.html" aria-label="Linux进阶"><!---->Linux进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/problem.html" aria-label="问题收集"><!---->问题收集<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="消息队列"><span class="title">消息队列</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="消息队列"><span class="title">消息队列</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/RabbitMQ.html" aria-label="RabbitMQ"><!---->RabbitMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/ActiveMQ.html" aria-label="ActiveMQ"><!---->ActiveMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/kafka.html" aria-label="Kafka"><!---->Kafka<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="spring"><span class="title">spring</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="spring"><span class="title">spring</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/Spring%E6%B3%A8%E8%A7%A3%E4%BB%8B%E7%BB%8D.html" aria-label="Spring注解介绍"><!---->Spring注解介绍<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>spring核心-5.2.6.RELEASE</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-ioc.html" aria-label="IOC容器相关"><!---->IOC容器相关<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-SpEL.html" aria-label="SpEL表达式"><!---->SpEL表达式<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-AOP.html" aria-label="Spring AOP代理"><!---->Spring AOP代理<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/DateBufferAndCodecs.html" aria-label="数据缓冲区和编解码器"><!---->数据缓冲区和编解码器<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>数据访问</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/transactionManagement.html" aria-label="事物管理"><!---->事物管理<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/Dao.html" aria-label="数据访问对象"><!---->数据访问对象<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/SpringDataJPA.html" aria-label="SpringDataJPA"><!---->SpringDataJPA<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Servlet请求</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webServlet/SpringMVC.html" aria-label="SpringMVC"><!---->SpringMVC<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webServlet/WebSocket.html" aria-label="WebSocket"><!---->WebSocket<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>响应式处理</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webReactive/SpringWebFlux.html" aria-label="SpringWebFlux"><!---->SpringWebFlux<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webReactive/WebClient.html" aria-label="响应式客户端"><!---->响应式客户端<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/Spring%E6%B3%A8%E8%A7%A3%E4%BB%8B%E7%BB%8D.html" aria-label="Spring注解介绍"><!---->Spring注解介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/logFramework.html" aria-label="日志框架"><!---->日志框架<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/SpecialInterfaceFunction.html" aria-label="Spring特殊接口"><!---->Spring特殊接口<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/DesignMode.html" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/util.html" aria-label="工具类"><!---->工具类<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="springboot"><span class="title">springboot</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="springboot"><span class="title">springboot</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/SpringBoot-2.2.7.RELEASE.html" aria-label="SpringBoot-2.2.7.RELEASE介绍"><!---->SpringBoot-2.2.7.RELEASE介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-embedded.html" aria-label="嵌入式容器starter"><!---->嵌入式容器starter<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-web.html" aria-label="starter-web"><!---->starter-web<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/spring-kafka.html" aria-label="springboot使用Kafka"><!---->springboot使用Kafka<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/Micrometer.html" aria-label="Micrometer"><!---->Micrometer<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-actuator.html" aria-label="starter-actuator"><!---->starter-actuator<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="springcloud"><span class="title">springcloud</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="springcloud"><span class="title">springcloud</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/SpringCloud.html" aria-label="SpringCloud"><!---->SpringCloud<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/spring-sleuth.html" aria-label="spring-sleuth"><!---->spring-sleuth<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/AlibabaSentinel.html" aria-label="Sentinel"><!---->Sentinel<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/nacos.html" aria-label="Nacos"><!---->Nacos<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/ZooKeeper.html" aria-label="ZooKeeper"><!---->ZooKeeper<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/Dubbo.html" aria-label="Dubbo"><!---->Dubbo<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>网关</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-gateway.html" aria-label="spring-cloud-gateway使用介绍"><!---->spring-cloud-gateway使用介绍<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-gateway-core.html" aria-label="gateway核心"><!---->gateway核心<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-starter-netflix-zuul.html" aria-label="zuul-1.x"><!---->zuul-1.x<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="database"><span class="title">database</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="database"><span class="title">database</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/vuepress-blog/database/Mysql.html" aria-label="MySQL"><!---->MySQL<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Oracle.html" aria-label="Oracle"><!---->Oracle<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/MongoDB.html" aria-label="MongoDB"><!---->MongoDB<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/InfluxDB.html" aria-label="InfluxDB"><!---->InfluxDB<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Oracle-SQLErr.html" aria-label="Oracle执行错误代码"><!---->Oracle执行错误代码<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/ShardingSphere.html" aria-label="ShardingSphere"><!---->ShardingSphere<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Transactional.html" aria-label="Spring事物控制"><!---->Spring事物控制<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/DruidPoolProblem.html" aria-label="DruidPoolProblem"><!---->DruidPoolProblem<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/seata.html" aria-label="seata"><!---->seata<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="其它"><span class="title">其它</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="其它"><span class="title">其它</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/cron.html" aria-label="cron表达式"><!---->cron表达式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/uml.html" aria-label="UML介绍"><!---->UML介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/JMeter.html" aria-label="JMeter"><!---->JMeter<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/XXL-Job.html" aria-label="XXL-Job"><!---->XXL-Job<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/DDD.html" aria-label="领域驱动设计"><!---->领域驱动设计<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/git.html" aria-label="git"><!---->git<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/WebService.html" aria-label="WebService"><!---->WebService<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="spark"><span class="title">spark</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="spark"><span class="title">spark</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spark/spark.html" aria-label="spark"><!---->spark<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spark/Scala.html" aria-label="Scala2/3"><!---->Scala2/3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spark/Scala-Collection.html" aria-label="Scala-集合"><!---->Scala-集合<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法策略"><span class="title">算法策略</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法策略"><span class="title">算法策略</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/recursion.html" aria-label="递归"><!---->递归<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/divideAndConquer.html" aria-label="分治"><!---->分治<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/dp.html" aria-label="动态规划"><!---->动态规划<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" aria-label="数据结构"><!---->数据结构<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/scala-algorithm.html" aria-label="scala-algorithm"><!---->scala-algorithm<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="vue"><span class="title">vue</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="vue"><span class="title">vue</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>vuepress</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/vuepress/vuepress%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D.html" aria-label="vuepress使用介绍"><!---->vuepress使用介绍<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/html.html" aria-label="html"><!---->html<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/css.html" aria-label="css"><!---->css<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/JavaScript.html" aria-label="JavaScript"><!---->JavaScript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/VSCode.html" aria-label="VSCode"><!---->VSCode<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/vue.html" aria-label="vue"><!---->vue<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="nginx"><span class="title">nginx</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="nginx"><span class="title">nginx</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx.html" aria-label="nginx"><!---->nginx<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86https%E8%AF%B7%E6%B1%82%E6%AD%A5%E9%AA%A4.html" aria-label="nginx配置代理https请求步骤"><!---->nginx配置代理https请求步骤<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86400.html" aria-label="nginx配置代理400"><!---->nginx配置代理400<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="监控"><span class="title">监控</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="监控"><span class="title">监控</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/Elasticsearch.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/ELK.html" aria-label="ELK"><!---->ELK<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/Logstash-8.15.html" aria-label="Logstash"><!---->Logstash<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/prometheus.html" aria-label="prometheus"><!---->prometheus<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaEE"><span class="title">JavaEE</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaEE"><span class="title">JavaEE</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JavaSE.html" aria-label="JavaSE"><!---->JavaSE<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E8%BF%9B%E9%98%B6.html" aria-label="进阶"><!---->进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JavaWeb.html" aria-label="JavaWeb"><!---->JavaWeb<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BD%BF%E7%94%A8.html" aria-label="Java多线程使用"><!---->Java多线程使用<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JUC.html" aria-label="JUC"><!---->JUC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/EnumSet%E9%9B%86%E5%90%88.html" aria-label="EnumSet集合"><!---->EnumSet集合<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E6%B3%A8%E8%A7%A3.html" aria-label="Java注解"><!---->Java注解<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/javaUtil.html" aria-label="javaUtil"><!---->javaUtil<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/networkModel.html" aria-label="网络模型"><!---->网络模型<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/IO.html" aria-label="JavaIO"><!---->JavaIO<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Netty.html" aria-label="Netty"><!---->Netty<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Reactor.html" aria-label="Reactor"><!---->Reactor<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="构建工具"><span class="title">构建工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="构建工具"><span class="title">构建工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/maven.html" aria-label="maven"><!---->maven<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/Docker.html" aria-label="Docker"><!---->Docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/gradle.html" aria-label="gradle"><!---->gradle<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/gradle%E7%AE%A1%E7%90%86Java%E9%A1%B9%E7%9B%AE.html" aria-label="gradle管理Java项目"><!---->gradle管理Java项目<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/maven%E9%A1%B9%E7%9B%AE%E5%88%87%E6%8D%A2gradle%E6%AD%A5%E9%AA%A4.html" aria-label="maven项目切换gradle步骤"><!---->maven项目切换gradle步骤<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JVM"><span class="title">JVM</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JVM"><span class="title">JVM</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/JVM.html" aria-label="JVM"><!---->JVM<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E5%92%8C%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5.html" aria-label="垃圾收集器和内存分配策略"><!---->垃圾收集器和内存分配策略<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7.html" aria-label="虚拟机性能监控工具"><!---->虚拟机性能监控工具<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/JVM%E8%B0%83%E4%BC%98%E7%90%86%E8%AE%BA.html" aria-label="JVM调优理论"><!---->JVM调优理论<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%90%86%E8%AE%BA.html" aria-label="Java多线程理论"><!---->Java多线程理论<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/ErrorFile%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90.html" aria-label="ErrorFile文件分析"><!---->ErrorFile文件分析<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="linux"><span class="title">linux</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="linux"><span class="title">linux</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Linux.html" aria-label="Linux"><!---->Linux<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/shell%E8%AF%AD%E6%B3%95.html" aria-label="shell语法"><!---->shell语法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/TCP.html" aria-label="tcp"><!---->tcp<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Redis.html" aria-label="Redis"><!---->Redis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Linux%E8%BF%9B%E9%98%B6.html" aria-label="Linux进阶"><!---->Linux进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/problem.html" aria-label="问题收集"><!---->问题收集<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="消息队列"><span class="title">消息队列</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="消息队列"><span class="title">消息队列</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/RabbitMQ.html" aria-label="RabbitMQ"><!---->RabbitMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/ActiveMQ.html" aria-label="ActiveMQ"><!---->ActiveMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/kafka.html" aria-label="Kafka"><!---->Kafka<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="spring"><span class="title">spring</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="spring"><span class="title">spring</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/Spring%E6%B3%A8%E8%A7%A3%E4%BB%8B%E7%BB%8D.html" aria-label="Spring注解介绍"><!---->Spring注解介绍<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>spring核心-5.2.6.RELEASE</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-ioc.html" aria-label="IOC容器相关"><!---->IOC容器相关<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-SpEL.html" aria-label="SpEL表达式"><!---->SpEL表达式<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-AOP.html" aria-label="Spring AOP代理"><!---->Spring AOP代理<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/DateBufferAndCodecs.html" aria-label="数据缓冲区和编解码器"><!---->数据缓冲区和编解码器<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>数据访问</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/transactionManagement.html" aria-label="事物管理"><!---->事物管理<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/Dao.html" aria-label="数据访问对象"><!---->数据访问对象<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/SpringDataJPA.html" aria-label="SpringDataJPA"><!---->SpringDataJPA<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Servlet请求</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webServlet/SpringMVC.html" aria-label="SpringMVC"><!---->SpringMVC<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webServlet/WebSocket.html" aria-label="WebSocket"><!---->WebSocket<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>响应式处理</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webReactive/SpringWebFlux.html" aria-label="SpringWebFlux"><!---->SpringWebFlux<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webReactive/WebClient.html" aria-label="响应式客户端"><!---->响应式客户端<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/Spring%E6%B3%A8%E8%A7%A3%E4%BB%8B%E7%BB%8D.html" aria-label="Spring注解介绍"><!---->Spring注解介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/logFramework.html" aria-label="日志框架"><!---->日志框架<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/SpecialInterfaceFunction.html" aria-label="Spring特殊接口"><!---->Spring特殊接口<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/DesignMode.html" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/util.html" aria-label="工具类"><!---->工具类<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="springboot"><span class="title">springboot</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="springboot"><span class="title">springboot</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/SpringBoot-2.2.7.RELEASE.html" aria-label="SpringBoot-2.2.7.RELEASE介绍"><!---->SpringBoot-2.2.7.RELEASE介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-embedded.html" aria-label="嵌入式容器starter"><!---->嵌入式容器starter<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-web.html" aria-label="starter-web"><!---->starter-web<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/spring-kafka.html" aria-label="springboot使用Kafka"><!---->springboot使用Kafka<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/Micrometer.html" aria-label="Micrometer"><!---->Micrometer<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-actuator.html" aria-label="starter-actuator"><!---->starter-actuator<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="springcloud"><span class="title">springcloud</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="springcloud"><span class="title">springcloud</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/SpringCloud.html" aria-label="SpringCloud"><!---->SpringCloud<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/spring-sleuth.html" aria-label="spring-sleuth"><!---->spring-sleuth<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/AlibabaSentinel.html" aria-label="Sentinel"><!---->Sentinel<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/nacos.html" aria-label="Nacos"><!---->Nacos<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/ZooKeeper.html" aria-label="ZooKeeper"><!---->ZooKeeper<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/Dubbo.html" aria-label="Dubbo"><!---->Dubbo<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>网关</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-gateway.html" aria-label="spring-cloud-gateway使用介绍"><!---->spring-cloud-gateway使用介绍<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-gateway-core.html" aria-label="gateway核心"><!---->gateway核心<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-starter-netflix-zuul.html" aria-label="zuul-1.x"><!---->zuul-1.x<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="database"><span class="title">database</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="database"><span class="title">database</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/vuepress-blog/database/Mysql.html" aria-label="MySQL"><!---->MySQL<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Oracle.html" aria-label="Oracle"><!---->Oracle<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/MongoDB.html" aria-label="MongoDB"><!---->MongoDB<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/InfluxDB.html" aria-label="InfluxDB"><!---->InfluxDB<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Oracle-SQLErr.html" aria-label="Oracle执行错误代码"><!---->Oracle执行错误代码<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/ShardingSphere.html" aria-label="ShardingSphere"><!---->ShardingSphere<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Transactional.html" aria-label="Spring事物控制"><!---->Spring事物控制<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/DruidPoolProblem.html" aria-label="DruidPoolProblem"><!---->DruidPoolProblem<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/seata.html" aria-label="seata"><!---->seata<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="其它"><span class="title">其它</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="其它"><span class="title">其它</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/cron.html" aria-label="cron表达式"><!---->cron表达式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/uml.html" aria-label="UML介绍"><!---->UML介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/JMeter.html" aria-label="JMeter"><!---->JMeter<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/XXL-Job.html" aria-label="XXL-Job"><!---->XXL-Job<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/DDD.html" aria-label="领域驱动设计"><!---->领域驱动设计<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/git.html" aria-label="git"><!---->git<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/WebService.html" aria-label="WebService"><!---->WebService<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="spark"><span class="title">spark</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="spark"><span class="title">spark</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spark/spark.html" aria-label="spark"><!---->spark<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spark/Scala.html" aria-label="Scala2/3"><!---->Scala2/3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spark/Scala-Collection.html" aria-label="Scala-集合"><!---->Scala-集合<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">MySQL <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql"><span>MySQL</span></a></h1><h2 id="_1-数据库介绍" tabindex="-1"><a class="header-anchor" href="#_1-数据库介绍"><span>1.数据库介绍</span></a></h2><h3 id="数据库的分类" tabindex="-1"><a class="header-anchor" href="#数据库的分类"><span>数据库的分类</span></a></h3><ul><li><p>关系型数据库：SQL</p><ul><li><p>MySQL、Oracle、Sql Server、DB2、SQLlite</p></li><li><p>通过表的行和列直接的关系储存数据</p></li></ul></li><li><p>非关系型数据库：NoSQL Not only</p><ul><li><p>Redis、MongDB</p></li><li><p>对象储存，通过对象的自身属性来决定</p></li></ul></li></ul><p>学习数据库就是学习sql语句。</p><div class="language-markdown" data-highlighter="prismjs" data-ext="md" data-title="md"><pre><code><span class="line">DQL（数据查询语言Data Query Language）查询语句select</span>
<span class="line">DML（数据操作语言 Data Manipulation Language）insert delete update 表的数据进行增删改</span>
<span class="line">DDL（数据定义语言Data Definition Language）create drop alter 对表结构进行增删改</span>
<span class="line">TCL（事务控制语言Transaction Control Language）comit提交事务 rollback回滚事务transaction</span>
<span class="line">DCL（数据控制语言Data Control Language）grant授权 revoke撤销权限</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="解压安装方式" tabindex="-1"><a class="header-anchor" href="#解压安装方式"><span>解压安装方式</span></a></h3><ol><li><p>解压文件</p></li><li><p>配置环境变量，bin目录</p></li><li><div class="language-ini" data-highlighter="prismjs" data-ext="ini" data-title="ini"><pre><code><span class="line"><span class="token comment"># 新建MySQL配置文件my.ini </span></span>
<span class="line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span></span>
<span class="line"><span class="token key attr-name">basedir</span><span class="token punctuation">=</span><span class="token value attr-value">mysql文件C:\Program Files\MySQL\MySQL Server 5.5\</span></span>
<span class="line"><span class="token key attr-name">datadir</span><span class="token punctuation">=</span><span class="token value attr-value">C:\Program Files\MySQL\MySQL Server 5.5\data\</span></span>
<span class="line"><span class="token key attr-name">port</span><span class="token punctuation">=</span><span class="token value attr-value">3306</span></span>
<span class="line">skip-grant-tables</span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li><li><p>执行命令：mysqld --initialize-insecure --user=mysql</p></li><li><p>启动mysql：mysql - u root -p</p></li><li><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 进入界面修改root密码</span></span>
<span class="line">update mysql.user <span class="token builtin class-name">set</span> <span class="token assign-left variable">authentication_string</span><span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">&#39;123456&#39;</span><span class="token punctuation">)</span> where <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token string">&#39;root&#39;</span> and <span class="token assign-left variable">Host</span><span class="token operator">=</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li><li><p>输入 flush privileges;刷新</p></li><li><p>最后在my.ini文件中删除skip-grant-tables</p></li></ol><p>社区版下载地址：https://dev.mysql.com/downloads/mysql/</p><h4 id="linux安装" tabindex="-1"><a class="header-anchor" href="#linux安装"><span>linux安装</span></a></h4><figure><img src="http://47.101.155.205/image-20250208135511984.png" alt="image-20250208135511984" tabindex="0" loading="lazy"><figcaption>image-20250208135511984</figcaption></figure><figure><img src="http://47.101.155.205/image-20250208161556426.png" alt="image-20250208161556426" tabindex="0" loading="lazy"><figcaption>image-20250208161556426</figcaption></figure><ol><li><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 安装依赖库(error while loading shared libraries: libaio.so.1: cannot open shared object file: No such file or directory 报错)</span></span>
<span class="line">yum <span class="token function">install</span> <span class="token parameter variable">-y</span> libaio</span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li><li><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 创建mysql用户和组</span></span>
<span class="line"><span class="token function">groupadd</span> mysql</span>
<span class="line"><span class="token comment"># # 创建 mysql 用户并将其添加到 mysql 用户组中，同时不创建用户主目录</span></span>
<span class="line"><span class="token function">useradd</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-g</span> mysql <span class="token parameter variable">-s</span> /bin/false mysql</span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li><li><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 解压到文件</span></span>
<span class="line"><span class="token function">tar</span> <span class="token parameter variable">-xvf</span> mysql-8.0.3-rc-linux-glibc2.12-x86_64.tar.gz</span>
<span class="line"><span class="token comment"># 将mysql-8.0.41-linux-glibc2.28-x86_64文件内容移到到/usr/local/mysql中</span></span>
<span class="line"><span class="token function">mv</span> mysql-8.0.3-rc-linux-glibc2.12-x86_64 /usr/local/mysql</span>
<span class="line"></span>
<span class="line"><span class="token builtin class-name">cd</span> /usr/local</span>
<span class="line"><span class="token comment"># 创建软链接命令(移动后就不需要创建了)</span></span>
<span class="line"><span class="token function">ln</span> <span class="token parameter variable">-s</span> mysql-8.0.41-linux-glibc2.28-x86_64 mysql</span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li><li><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 配置MySQL目录权限</span></span>
<span class="line"><span class="token function">chown</span> <span class="token parameter variable">-R</span> mysql:mysql /usr/local/mysql</span>
<span class="line"><span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">750</span> /usr/local/mysql</span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li><li><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 创建数据目录</span></span>
<span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /var/lib/mysql</span>
<span class="line"><span class="token function">chown</span> mysql:mysql /var/lib/mysql</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 初始化数据库（生成临时密码）</span></span>
<span class="line">/usr/local/mysql/bin/mysqld <span class="token parameter variable">--initialize</span> <span class="token parameter variable">--user</span><span class="token operator">=</span>mysql <span class="token parameter variable">--basedir</span><span class="token operator">=</span>/usr/local/mysql <span class="token parameter variable">--datadir</span><span class="token operator">=</span>/var/lib/mysql</span>
<span class="line"><span class="token comment"># 记录输出的临时root密码 ,j&lt;6gerCy),+</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li><li><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 创建配置文件/etc/my.cnf</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">basedir</span><span class="token operator">=</span>/usr/local/mysql</span>
<span class="line"><span class="token assign-left variable">datadir</span><span class="token operator">=</span>/var/lib/mysql</span>
<span class="line"><span class="token assign-left variable">socket</span><span class="token operator">=</span>/var/lib/mysql/mysql.sock</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>client<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">socket</span><span class="token operator">=</span>/var/lib/mysql/mysql.sock</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 配置启动</span></span>
<span class="line"><span class="token comment"># 1.创建/etc/systemd/system/mysqld.service文件,内容如下</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">Description</span><span class="token operator">=</span>MySQL Server</span>
<span class="line"><span class="token assign-left variable">After</span><span class="token operator">=</span>network.target</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>Service<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">User</span><span class="token operator">=</span>mysql</span>
<span class="line"><span class="token assign-left variable">Group</span><span class="token operator">=</span>mysql</span>
<span class="line"><span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/mysql/bin/mysqld --defaults-file<span class="token operator">=</span>/etc/my.cnf</span>
<span class="line"><span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/bin/kill <span class="token parameter variable">-HUP</span> <span class="token variable">$MAINPID</span></span>
<span class="line"><span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-failure</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>Install<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 重新加载(新增修改mysqld.service文件后)</span></span>
<span class="line">systemctl daemon-reload</span>
<span class="line"><span class="token comment"># 启动自启动</span></span>
<span class="line">systemctl <span class="token builtin class-name">enable</span> mysqld</span>
<span class="line"><span class="token comment"># 启动</span></span>
<span class="line">systemctl start mysqld</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 配置环境变量</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&#39;export PATH=/usr/local/mysql/bin:$PATH&#39;</span> <span class="token operator">&gt;&gt;</span> /etc/profile</span>
<span class="line"><span class="token builtin class-name">source</span> /etc/profile</span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li><li><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 登录后修改密码</span></span>
<span class="line">mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span></span>
<span class="line"></span>
<span class="line">ALTER <span class="token environment constant">USER</span> <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;localhost&#39;</span> IDENTIFIED BY <span class="token string">&#39;新密码&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 安全配置导向</span></span>
<span class="line">mysql_secure_installation</span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li><li><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 解决root无法远程连接文件</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 方式一: root权限如果为localhost,可以修改授权访问</span></span>
<span class="line">SELECT user, <span class="token function">host</span> FROM mysql.user WHERE user <span class="token operator">=</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">UPDATE mysql.user SET <span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&#39;%&#39;</span> WHERE <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">;</span></span>
<span class="line">FLUSH PRIVILEGES<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 方式一: 创建独立用户访问</span></span>
<span class="line">CREATE <span class="token environment constant">USER</span> <span class="token string">&#39;&lt;user&gt;&#39;</span>@<span class="token string">&#39;%&#39;</span> IDENTIFIED BY <span class="token string">&#39;&lt;password&gt;&#39;</span><span class="token punctuation">;</span></span>
<span class="line">GRANT ALL PRIVILEGES ON *.* TO <span class="token string">&#39;&lt;user&gt;&#39;</span>@<span class="token string">&#39;%&#39;</span> WITH GRANT OPTION<span class="token punctuation">;</span></span>
<span class="line">FLUSH PRIVILEGES<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 停止mysql服务</span></span>
<span class="line">systemctl stop mysqld.service</span>
<span class="line">systemctl stop mysqld</span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li></ol><figure><img src="http://47.101.155.205/image-20250208161637850.png" alt="image-20250208161637850" tabindex="0" loading="lazy"><figcaption>image-20250208161637850</figcaption></figure><figure><img src="http://47.101.155.205/image-20250208162152907.png" alt="image-20250208162152907" tabindex="0" loading="lazy"><figcaption>image-20250208162152907</figcaption></figure><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># url配置解决提示不安全连接</span></span>
<span class="line">?allowPublicKeyRetrieval<span class="token operator">=</span>true</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="mysql的命令介绍" tabindex="-1"><a class="header-anchor" href="#mysql的命令介绍"><span>MySQL的命令介绍</span></a></h3><p>建表语句(sql数据库都有的)：</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token string">&#39;student&#39;</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span>  <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token punctuation">,</span><span class="token string">&#39;name&#39;</span>  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token punctuation">,</span><span class="token string">&#39;age&#39;</span>  <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token punctuation">,</span><span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>MySQL命令</p><div class="language-Mysql line-numbers-mode" data-highlighter="prismjs" data-ext="Mysql" data-title="Mysql"><pre><code><span class="line">show databases;</span>
<span class="line">show tables;</span>
<span class="line">use mysql;</span>
<span class="line">descibe student;</span>
<span class="line">create database mydata;</span>
<span class="line">show tables from 库名;</span>
<span class="line">快速导入数据</span>
<span class="line">mysql&gt; source D:\JavaSE\MySQL\resources\bjpowernode.sql</span>
<span class="line">show create table emp;查询emp表的创建语句</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="数据库表列的类型" tabindex="-1"><a class="header-anchor" href="#数据库表列的类型"><span>数据库表列的类型</span></a></h3><p>数值：</p><div class="language-markdown" data-highlighter="prismjs" data-ext="md" data-title="md"><pre><code><span class="line">tinyint		1个字节;</span>
<span class="line">smallint	2个字节;</span>
<span class="line">mediumint	3个字节;</span>
<span class="line">int			4个字节;</span>
<span class="line">bigint		8个字节;</span>
<span class="line">float		4个字节;</span>
<span class="line">double		8个字节;</span>
<span class="line">decimal		字符型形式的int类型;</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>字符串：</p><div class="language-markdown" data-highlighter="prismjs" data-ext="md" data-title="md"><pre><code><span class="line">char		固定大小0<span class="token strike"><span class="token punctuation">~</span><span class="token content">255;</span>
<span class="line">varchar		可变长字符串0</span><span class="token punctuation">~</span></span>65535;</span>
<span class="line">tinytext	微型文本 2^8-1;</span>
<span class="line">text		文本串	  2^16-1;</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>时间日期：</p><table><thead><tr><th>日期类型</th><th>日期格式</th><th>占用空间</th></tr></thead><tbody><tr><td>datetime</td><td>YYYY-MM-DD HH:MM:ss</td><td>8bytes</td></tr><tr><td>timestamp</td><td>YYYY-MM-DD HH:MM:ss</td><td>4bytes</td></tr><tr><td>date</td><td>YYYY-MM-DD</td><td>4bytes</td></tr><tr><td>time</td><td>HH:MM:ss</td><td>3bytes</td></tr><tr><td>year</td><td>YYYY</td><td>1bytes</td></tr></tbody></table><p>null：</p><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">没有值</span>
<span class="line">null运算结果也为null</span>
<span class="line"></span></code></pre></div><h3 id="表字段的属性" tabindex="-1"><a class="header-anchor" href="#表字段的属性"><span>表字段的属性</span></a></h3><p>Unsigned：</p><ul><li>无符号整数，声明不能为负数</li></ul><p>zerofill：</p><ul><li>0填充，不足用0来填充位数</li></ul><p>自增auto_increment：</p><ul><li>数字才能自增，通常是数字自增1</li><li>可以自定义设计增长的数值</li></ul><p>not null：</p><ul><li>添加数据不给值，会报错。</li></ul><p>默认值：</p><p>不指定该值，默认为声明值。</p><p><strong>表的设计需要的字段</strong></p><table><thead><tr><th>id</th><th>主键</th></tr></thead><tbody><tr><td><code>version</code></td><td>乐观锁</td></tr><tr><td>is_delete</td><td>伪删除</td></tr><tr><td>gmt_create</td><td>创建时间</td></tr><tr><td>gmt_update</td><td>修改时间</td></tr></tbody></table><h2 id="_2-操作数据库-ddl" tabindex="-1"><a class="header-anchor" href="#_2-操作数据库-ddl"><span>2.操作数据库(DDL)</span></a></h2><h3 id="创建数据库" tabindex="-1"><a class="header-anchor" href="#创建数据库"><span>创建数据库</span></a></h3><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">database</span> 库名<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="删除数据库" tabindex="-1"><a class="header-anchor" href="#删除数据库"><span>删除数据库</span></a></h3><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> 库名<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="使用数据库" tabindex="-1"><a class="header-anchor" href="#使用数据库"><span>使用数据库</span></a></h3><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">use</span> 库名<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="创建数据表" tabindex="-1"><a class="header-anchor" href="#创建数据表"><span>创建数据表</span></a></h3><p>创建一个school数据库，里面有个学生表student</p><p>有学号id（int）、登陆密码varchar（20）、姓名、性别、出生日期、家庭住址、email</p><p>create database if not exists school;</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token identifier"><span class="token punctuation">`</span>teststudent<span class="token punctuation">`</span></span><span class="token punctuation">(</span></span>
<span class="line">	<span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">&#39;学号&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">&quot;匿名&quot;</span> <span class="token keyword">comment</span> <span class="token string">&#39;姓名&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>pwd<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">&#39;123456&#39;</span> <span class="token keyword">comment</span> <span class="token string">&#39;密码&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>sex<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;性别&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>birthday<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;出生日期&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>addr<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;住址&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;邮件&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">default</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用命令行创建表，不能使用中文;</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span><span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">]</span> 表名<span class="token punctuation">(</span></span>
<span class="line">	<span class="token identifier"><span class="token punctuation">`</span>字段名<span class="token punctuation">`</span></span> 列类型 <span class="token punctuation">[</span>列属性<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>字段名<span class="token punctuation">`</span></span> 列类型 <span class="token punctuation">[</span>列属性<span class="token punctuation">]</span> <span class="token punctuation">[</span>索引<span class="token punctuation">]</span> <span class="token punctuation">[</span>注释<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    </span>
<span class="line"><span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">default</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>show create database 数据库名;</p><p>show create table 表名;</p><p><strong>字符编码</strong></p><p>charset=utf8</p><p>my.ini配置字符编码</p><p>character-set-server=utf8</p><p>把default-character-set=utf8这段配置文件删除，支持中文</p><h3 id="数据库引擎" tabindex="-1"><a class="header-anchor" href="#数据库引擎"><span>数据库引擎</span></a></h3><table><thead><tr><th>特点</th><th>MYISAM</th><th>INNODB</th></tr></thead><tbody><tr><td>事务支持</td><td>不支持</td><td>支持</td></tr><tr><td>数据行锁定</td><td>不支持</td><td>支持</td></tr><tr><td>外键约束</td><td>不支持</td><td>支持</td></tr><tr><td>全文索引</td><td>支持</td><td>不支持</td></tr><tr><td>表空间的大小</td><td>较小</td><td>较大，约为2倍</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><p>各个优点</p><ul><li>MYISAM 节约空间，速度较快</li><li>INNODB 安全性高，支持事物，可以多表多用户操作</li></ul><p>修改数据库文件物理地址，再my.ini文件中</p><p><strong>datadir=&quot;C:/ProgramData/MySQL/MySQL Server 5.5/Data/&quot;</strong></p><p>数据库物理地址区别</p><figure><img src="http://47.101.155.205/MYISAM和INNODB.png" alt="image-20220330113926805" tabindex="0" loading="lazy"><figcaption>image-20220330113926805</figcaption></figure><figure><img src="http://47.101.155.205/MYISAM和INNODB2.png" alt="image-20220330114059764" tabindex="0" loading="lazy"><figcaption>image-20220330114059764</figcaption></figure><p>物理地址区别</p><ul><li>INNODB 在数据库表中只有一个*.frm文件，一级上级目录下的ib_logfile0文件</li><li>MYISAM 对应在数据库表中有3个文件 <ul><li>*.frm 表结构的定义文件</li><li>*.MYD 数据文件(data)</li><li>*.MYI 索引文件（index)</li></ul></li></ul><h3 id="修改表结构ddl" tabindex="-1"><a class="header-anchor" href="#修改表结构ddl"><span>修改表结构DDL</span></a></h3><p>1、修改表名</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">alert <span class="token keyword">table</span> 表名 <span class="token keyword">rename</span> <span class="token keyword">as</span> 新表名</span>
<span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> teststudent <span class="token keyword">rename</span> <span class="token keyword">as</span> test_student<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>2、 增加表的字段</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> 字段名 属性<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> test_student <span class="token keyword">add</span> salary <span class="token keyword">int</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> t_student <span class="token keyword">add</span> <span class="token keyword">constraint</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cno<span class="token punctuation">)</span> <span class="token keyword">references</span> t_class<span class="token punctuation">(</span>cno<span class="token punctuation">)</span><span class="token punctuation">;</span>添加外键约束</span>
<span class="line"></span></code></pre></div><p>3、修改表的字段（重命名，修改约束）</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 字段名 列属性<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 change 字段名 新名字 原属性<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> test_student change salary money <span class="token keyword">int</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> test_student <span class="token keyword">modify</span> money <span class="token keyword">bigint</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>4、 删除表的字段</p><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">alter table 表名 drop 字段名;</span>
<span class="line">alter table test_student drop money;</span>
<span class="line"></span></code></pre></div><p>5、删除表</p><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">drop table if exists 表名;</span>
<span class="line">drop table if exists test_student;</span>
<span class="line"></span></code></pre></div><h3 id="外键" tabindex="-1"><a class="header-anchor" href="#外键"><span>外键</span></a></h3><p>t_student中的classno(cno)字段引用t_class的cno字段,此时t_student表叫做子表,t_class表叫做父表</p><p>创建t_class表</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> t_class<span class="token punctuation">(</span></span>
<span class="line">	cno <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    cname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cno<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>创建t_student表，添加外键约束。</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> t_student<span class="token punctuation">(</span></span>
<span class="line">	id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span></span>
<span class="line">    sno <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    sname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    cno <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cno<span class="token punctuation">)</span> <span class="token keyword">references</span> t_class<span class="token punctuation">(</span>cno<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>添加好了约束，只能先删除子表t_student才能删除父表t_class</p><p>先创建两个表，再添加外键的方式。</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> t_student<span class="token punctuation">(</span></span>
<span class="line">	id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    sno <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    sname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    cno <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> t_class<span class="token punctuation">(</span></span>
<span class="line">	cno <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    cname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cno<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>通过alter改变表的结构</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> t_student <span class="token keyword">add</span> <span class="token keyword">constraint</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cno<span class="token punctuation">)</span> <span class="token keyword">references</span> t_class<span class="token punctuation">(</span>cno<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>这两种方式都是改变表的结构，都是物理外键，删除，添加都麻烦，后期可以使用<strong>程序去实现外键</strong></p><h2 id="_3-dml" tabindex="-1"><a class="header-anchor" href="#_3-dml"><span>3.DML</span></a></h2><p>DML（数据操作语言 Data Manipulation Language）insert delete update 表的数据进行增删改。</p><h3 id="insert" tabindex="-1"><a class="header-anchor" href="#insert"><span>insert</span></a></h3><p>可以插入多条数据，value后面的括号加上，跟上其他的值</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>字段<span class="token number">1</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token punctuation">,</span>字段<span class="token number">3</span><span class="token punctuation">,</span>字段<span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">,</span>值<span class="token number">3</span><span class="token punctuation">,</span>值<span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>字段<span class="token number">1</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token punctuation">,</span>字段<span class="token number">3</span><span class="token punctuation">,</span>字段<span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">,</span>值<span class="token number">3</span><span class="token punctuation">,</span>值<span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">,</span>值<span class="token number">3</span><span class="token punctuation">,</span>值<span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> t_class<span class="token punctuation">(</span>cno<span class="token punctuation">,</span>cname<span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1403</span><span class="token punctuation">,</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> t_class<span class="token punctuation">(</span>cname<span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;高三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> t_class<span class="token punctuation">(</span>cname<span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;大一&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;大二&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>pwd<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>addr<span class="token punctuation">,</span>email<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;2000-02-28&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;中国&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">--2000-02-28 00:00:00时间选的是datatime,没有自动补全</span></span>
<span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>name<span class="token punctuation">,</span>pwd<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>addr<span class="token punctuation">,</span>email<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;2000-02-28&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;中国&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>name<span class="token punctuation">,</span>pwd<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>addr<span class="token punctuation">,</span>email<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;243333&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;19991124&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;湖南&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123413@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>name<span class="token punctuation">,</span>pwd<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>addr<span class="token punctuation">,</span>email<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;王五&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;12344&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1892-12-21&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;湖南&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123413@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token string">&quot;丽丽&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1233&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1999-12-30&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;中国&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;11111@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>pwd<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>addr<span class="token punctuation">,</span>email<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&quot;小红&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1123&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;19991023&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;china&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1234433@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">&quot;丽丽&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1233&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1999-12-30&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;中国&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;11111@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="update" tabindex="-1"><a class="header-anchor" href="#update"><span>update</span></a></h3><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">update</span> 表名 <span class="token keyword">set</span> 列名<span class="token operator">=</span>新值<span class="token punctuation">,</span>列名<span class="token operator">=</span>新值<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">where</span> 条件<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>where条件between and、and、or,set中设置的值可以为变量current_data</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">update</span> student <span class="token keyword">set</span> name<span class="token operator">=</span><span class="token string">&quot;王八蛋&quot;</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">update</span> student <span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">&quot;王八蛋&quot;</span> <span class="token operator">and</span> id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">update</span> student <span class="token keyword">set</span> sex<span class="token operator">=</span><span class="token string">&quot;男&quot;</span> <span class="token keyword">where</span> id <span class="token operator">between</span> <span class="token number">2</span> <span class="token operator">and</span> <span class="token number">5</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">update</span> student <span class="token keyword">set</span> birthday<span class="token operator">=</span><span class="token keyword">current_date</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">update</span> student <span class="token keyword">set</span> birthday<span class="token operator">=</span>concat<span class="token punctuation">(</span><span class="token keyword">current_date</span><span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span><span class="token keyword">current_time</span><span class="token punctuation">)</span> <span class="token keyword">where</span> id <span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>改成当前时间</span>
<span class="line"><span class="token keyword">update</span> student <span class="token keyword">set</span> birthday<span class="token operator">=</span>concat<span class="token punctuation">(</span><span class="token keyword">current_date</span><span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span><span class="token keyword">current_time</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pwd<span class="token operator">=</span><span class="token string">&quot;123455&quot;</span><span class="token punctuation">,</span>addr<span class="token operator">=</span><span class="token string">&quot;中国湖南省&quot;</span> <span class="token keyword">where</span> id <span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="delete" tabindex="-1"><a class="header-anchor" href="#delete"><span>delete</span></a></h3><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 条件<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> table_name<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>清空表</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">truncate</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>delete和truncate</p><p>相同点：都能删除数据，都不会删除表结构</p><p>不同点：</p><ul><li>truncate会重新设置自增</li><li>truncate不会影响事物</li></ul><p>delete删除信息，重启数据库，现象</p><ul><li>InnoDB自增从0开始</li><li>MyISAM继续从上一个自增开始</li></ul><h2 id="_4-dql" tabindex="-1"><a class="header-anchor" href="#_4-dql"><span>4.DQL</span></a></h2><p>DQL（数据查询语言Data Query Language）查询语句select。</p><p>查询语句基本语法</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表</span>
<span class="line"></span></code></pre></div><p><code>别名</code>：查询表的字段使用其它名称替代结果的列名。</p><div class="language-SQL" data-highlighter="prismjs" data-ext="SQL" data-title="SQL"><pre><code><span class="line">select empno 员工编号,ename 员工姓名 from emp;</span>
<span class="line">SELECT EMPNO AS 员工编号,ENAME AS 员工姓名 FROM EMP;</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><code>函数</code>：在查询的结果中或条件中使用函数，函数的参数可以是字段，也可以是指定的固定值。</p><p>CONCAT(a,b,...)：是将里面的所查到的内容拼接，拼接其它字符串需要加引号。</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> empno <span class="token keyword">as</span> 员工编号<span class="token punctuation">,</span>concat<span class="token punctuation">(</span>empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job<span class="token punctuation">)</span> 编号姓名 <span class="token keyword">from</span> emp<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> empno<span class="token punctuation">,</span>empno<span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token string">&quot;姓名：&quot;</span><span class="token punctuation">,</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><code>distinct</code>：去重结果集</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 查询是领导人的编号</span></span>
<span class="line"><span class="token keyword">select</span> <span class="token keyword">distinct</span> mgr 领导人编号 <span class="token keyword">from</span> emp<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><code>查询当前系统版本</code>：select调用函数</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><code>查询计算结果</code>：</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token number">30</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">2</span> <span class="token keyword">as</span> 计算结果<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><code>查询当前时间(日期)</code>：select调用日期函数</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token keyword">current_date</span> <span class="token keyword">AS</span> 当前日期<span class="token punctuation">;</span> </span>
<span class="line"><span class="token keyword">select</span> <span class="token keyword">current_time</span> <span class="token keyword">AS</span> 当前时间<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token keyword">current_date</span><span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span><span class="token keyword">current_time</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> 时间<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><code>查询结果改变</code>：运算查询</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> ename <span class="token keyword">as</span> 员工姓名<span class="token punctuation">,</span>sal<span class="token operator">+</span><span class="token number">1000</span> <span class="token keyword">AS</span> 员工薪水涨<span class="token number">1000</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>select 表达式 from 表</p><ul><li>表达式：文本值、列、null、函数、计算表达式、系统变量...</li></ul><h3 id="运算符" tabindex="-1"><a class="header-anchor" href="#运算符"><span>运算符</span></a></h3><table><thead><tr><th>运算符</th><th>语法</th><th>描述</th></tr></thead><tbody><tr><td>is null</td><td>字段 is null</td><td></td></tr><tr><td>is not null</td><td>字段 is not null</td><td></td></tr><tr><td>between A and B</td><td>字段 between 值 and 值</td><td></td></tr><tr><td>like</td><td>字段 like 值</td><td>%表0~任意字符，_表示一个字符</td></tr><tr><td>in</td><td>字段 in(值1,值2,值3,...)</td><td></td></tr></tbody></table><h3 id="模糊查询" tabindex="-1"><a class="header-anchor" href="#模糊查询"><span>模糊查询</span></a></h3><table><thead><tr><th>通配符</th><th>作用</th></tr></thead><tbody><tr><td>%</td><td>0个或者多个字符</td></tr><tr><td>_</td><td>替代一个字符</td></tr><tr><td>[abcdef]</td><td>字符中的任何单一字符</td></tr><tr><td>[^abcdef]</td><td>不在字符中的任何单一字符</td></tr></tbody></table><p>MySQL只支持前两项</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">&quot;J%&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">&quot;jones&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;james&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>不区分大小写</span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">&gt;=</span><span class="token number">1000</span> <span class="token operator">and</span> sal <span class="token operator">&lt;=</span> <span class="token number">3000</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">between</span> <span class="token number">1000</span> <span class="token operator">and</span> <span class="token number">3000</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> <span class="token operator">not</span> sal <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><h3 id="regexp正则查询" tabindex="-1"><a class="header-anchor" href="#regexp正则查询"><span>REGEXP正则查询</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token keyword">select</span> * from app_user where name regexp <span class="token string">&quot;^用户&quot;</span> limit <span class="token number">20,10</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20220926104150159.png" alt="image-20220926104150159" tabindex="0" loading="lazy"><figcaption>image-20220926104150159</figcaption></figure><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SELECT</span>
<span class="line">  A.OrderDate,</span>
<span class="line">  <span class="token punctuation">(</span></span>
<span class="line">    SELECT SUM <span class="token punctuation">(</span>B.AMOUNT<span class="token punctuation">)</span></span>
<span class="line">    FROM  ADD_NUM B</span>
<span class="line">    WHERE    B.OrderDate <span class="token operator">&lt;=</span> A.OrderDate</span>
<span class="line">  <span class="token punctuation">)</span> Amount</span>
<span class="line">FROM  ADD_NUM A</span>
<span class="line"><span class="token keyword">select</span> a.id ID,<span class="token punctuation">(</span>select sum<span class="token punctuation">(</span>b.score<span class="token punctuation">)</span> from student b where b.id <span class="token operator">&lt;=</span> a.id<span class="token punctuation">)</span> SUM_SCORE from student a<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">select</span> *,dense_rank<span class="token punctuation">(</span><span class="token punctuation">)</span> over <span class="token punctuation">(</span>order by score desc<span class="token punctuation">)</span> as RANK from student<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="in、not-in查询" tabindex="-1"><a class="header-anchor" href="#in、not-in查询"><span>in、not in查询</span></a></h3><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> app_user <span class="token keyword">where</span> name <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> name <span class="token keyword">from</span> app_user <span class="token keyword">where</span> id <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 在id为1，name字段为空字符串的情况下，查询的结果为999991，总数1000000</span></span>
<span class="line"><span class="token comment">-- 在id为1，name字段为null的情况下，查询的结果为0，总数1000000,这是因为在not in中嵌套子查询结果有一个为null，则所有的结果为null</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20220926110156882.png" alt="image-20220926110156882" tabindex="0" loading="lazy"><figcaption>image-20220926110156882</figcaption></figure><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token keyword">select</span> *  from app_user where name <span class="token keyword">in</span> <span class="token punctuation">(</span>select name from app_user where <span class="token function">id</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20220926120150928.png" alt="image-20220926120150928" tabindex="0" loading="lazy"><figcaption>image-20220926120150928</figcaption></figure><h3 id="连表查询" tabindex="-1"><a class="header-anchor" href="#连表查询"><span>连表查询</span></a></h3><p>表 join 表 on 表的连接的语法</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>有<span class="token number">14</span>条数据</span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept<span class="token punctuation">;</span>有<span class="token number">4</span>条数据</span>
<span class="line"><span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp <span class="token keyword">AS</span> e <span class="token keyword">inner</span> <span class="token keyword">join</span> dept <span class="token keyword">AS</span> d<span class="token punctuation">;</span></span>
<span class="line">上面的<span class="token keyword">sql</span>不加<span class="token keyword">where</span>，两种表联合查询出来的结果就是<span class="token number">14</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">56</span>条<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp <span class="token keyword">AS</span> e <span class="token keyword">inner</span> <span class="token keyword">join</span> dept <span class="token keyword">AS</span> d <span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span></span>
<span class="line">这样得出的数据就是<span class="token number">14</span>条<span class="token punctuation">,</span>不过出来的顺序是按照部门先出来</span>
<span class="line"><span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> dept <span class="token keyword">AS</span> d <span class="token keyword">inner</span> <span class="token keyword">join</span> emp <span class="token keyword">AS</span> e <span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp <span class="token keyword">AS</span> e <span class="token keyword">inner</span> <span class="token keyword">join</span> dept <span class="token keyword">AS</span> d <span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> dept <span class="token keyword">AS</span> d <span class="token keyword">inner</span> <span class="token keyword">join</span> emp <span class="token keyword">AS</span> e <span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> dept <span class="token keyword">AS</span> d <span class="token keyword">join</span> emp <span class="token keyword">AS</span> e <span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> dept <span class="token keyword">AS</span> d <span class="token keyword">join</span> emp <span class="token keyword">AS</span> e <span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno <span class="token keyword">from</span> dept <span class="token keyword">AS</span> d <span class="token keyword">join</span> emp <span class="token keyword">AS</span> e<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A表 inner join B表 on 条件</p><p>表示内连接，只查询有交集的数据</p><p>左外连接,以左表为主表，右边的表捎带查询，查询不到的数据用null表示</p><div class="language-java" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">select e<span class="token punctuation">.</span>ename <span class="token constant">AS</span> 员工<span class="token punctuation">,</span>m<span class="token punctuation">.</span>ename <span class="token constant">AS</span> 员工领导 from emp e left join emp m on e<span class="token punctuation">.</span>mgr<span class="token operator">=</span>m<span class="token punctuation">.</span>empno<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>右连接</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> m<span class="token punctuation">.</span>ename <span class="token keyword">AS</span> 员工<span class="token punctuation">,</span>e<span class="token punctuation">.</span>ename <span class="token keyword">AS</span> 员工领导<span class="token punctuation">,</span>m<span class="token punctuation">.</span>empno <span class="token keyword">from</span> emp e <span class="token keyword">right</span> <span class="token keyword">join</span> emp m <span class="token keyword">on</span> m<span class="token punctuation">.</span>mgr<span class="token operator">=</span>e<span class="token punctuation">.</span>empno<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> m<span class="token punctuation">.</span>ename <span class="token keyword">AS</span> 员工<span class="token punctuation">,</span>e<span class="token punctuation">.</span>ename <span class="token keyword">AS</span> 员工 <span class="token keyword">from</span> emp e <span class="token keyword">right</span> <span class="token keyword">join</span> emp m <span class="token keyword">on</span> e<span class="token punctuation">.</span>mgr<span class="token operator">=</span>m<span class="token punctuation">.</span>empno<span class="token punctuation">;</span></span>
<span class="line">是上面左连接<span class="token keyword">left</span>直接改<span class="token keyword">right</span>结果为<span class="token number">21</span>条数据<span class="token punctuation">,</span>结论如下</span>
<span class="line">是因为e<span class="token punctuation">.</span>mgr领导出现了同一个人，除了没有做领导的empno找不到e<span class="token punctuation">.</span>mgr还有一个是老板也返回<span class="token boolean">null</span>，使用<span class="token keyword">distinct</span>查询mgr有个<span class="token boolean">null</span><span class="token operator">+</span><span class="token number">6</span>个不为<span class="token boolean">null</span>，说明有<span class="token number">6</span>个人是领导，出去领导中<span class="token number">1</span>人是老板，所以里面有<span class="token number">7</span>条是重复的e<span class="token punctuation">.</span>mgr，加上最少的<span class="token number">14</span><span class="token operator">=</span><span class="token number">21</span></span>
<span class="line"><span class="token keyword">select</span> m<span class="token punctuation">.</span>empno<span class="token punctuation">,</span>m<span class="token punctuation">.</span>ename <span class="token keyword">AS</span> 员工<span class="token punctuation">,</span>m<span class="token punctuation">.</span>ename <span class="token keyword">AS</span> 员工 <span class="token keyword">from</span> emp e <span class="token keyword">inner</span> <span class="token keyword">join</span> emp m <span class="token keyword">on</span> e<span class="token punctuation">.</span>mgr<span class="token operator">=</span>m<span class="token punctuation">.</span>empno<span class="token punctuation">;</span></span>
<span class="line">查询交集，只有<span class="token number">13</span>条数据，<span class="token number">6</span>人是领导，加上<span class="token number">7</span>条重复</span>
<span class="line"></span></code></pre></div><p>出现数据数量比主表数量多的情况下，连接出问题了，</p><p>外连连和内连接的最大区别是</p><ul><li>内连接在on not true的情况下数据是0</li><li>外连接在on not true的情况下数据是主表的数据数量</li></ul><h3 id="join连接" tabindex="-1"><a class="header-anchor" href="#join连接"><span>join连接</span></a></h3><h4 id="inner-join-join" tabindex="-1"><a class="header-anchor" href="#inner-join-join"><span>inner join == join</span></a></h4><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name <span class="token keyword">from</span> student s <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name <span class="token keyword">from</span> student s <span class="token keyword">inner</span> <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20220926131105641.png" alt="image-20220926131105641" tabindex="0" loading="lazy"><figcaption>image-20220926131105641</figcaption></figure><h4 id="left-join" tabindex="-1"><a class="header-anchor" href="#left-join"><span>left join</span></a></h4><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">left</span> <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20220926131823484.png" alt="image-20220926131823484" tabindex="0" loading="lazy"><figcaption>image-20220926131823484</figcaption></figure><h4 id="right-join" tabindex="-1"><a class="header-anchor" href="#right-join"><span>right join</span></a></h4><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> class c <span class="token keyword">right</span> <span class="token keyword">join</span> student s <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20220926132109924.png" alt="image-20220926132109924" tabindex="0" loading="lazy"><figcaption>image-20220926132109924</figcaption></figure><h4 id="full-outer-join" tabindex="-1"><a class="header-anchor" href="#full-outer-join"><span>full outer join</span></a></h4><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">full</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><code>MySQL不支持full join</code></p><h4 id="union实现full-join" tabindex="-1"><a class="header-anchor" href="#union实现full-join"><span>union实现full join</span></a></h4><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">left</span> <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id</span>
<span class="line"><span class="token keyword">union</span></span>
<span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">right</span> <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 连接两张表的查询结果，重复的不显示</span></span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20220926132859311.png" alt="image-20220926132859311" tabindex="0" loading="lazy"><figcaption>image-20220926132859311</figcaption></figure><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">left</span> <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id</span>
<span class="line"><span class="token keyword">union</span> <span class="token keyword">all</span></span>
<span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">right</span> <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">#连接两张表的查询结果，显示重复</span></span>
<span class="line"><span class="token comment">#order by只能对当前结果进行排序，不能再union前面使用order by排序</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">left</span> <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id</span>
<span class="line"><span class="token keyword">union</span> <span class="token keyword">all</span></span>
<span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">right</span> <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id <span class="token keyword">where</span> s<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 后面查询条件中的where只表示当前查询的where条件，和上面的查询无关</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://47.101.155.205/image-20220926133058079.png" alt="image-20220926133058079" tabindex="0" loading="lazy"><figcaption>image-20220926133058079</figcaption></figure><h3 id="分页和排序" tabindex="-1"><a class="header-anchor" href="#分页和排序"><span>分页和排序</span></a></h3><p>limit order by desc降 asc升</p><p>limit是sql的最后一个条件</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> e<span class="token punctuation">.</span>empno<span class="token punctuation">,</span>e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal<span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp e <span class="token keyword">inner</span> <span class="token keyword">join</span> dept d <span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>d<span class="token punctuation">.</span>deptno <span class="token keyword">order</span> <span class="token keyword">by</span> e<span class="token punctuation">.</span>deptno <span class="token keyword">desc</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal<span class="token punctuation">;</span>默认是升序</span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span>从第一条数据开始，展示后面<span class="token number">5</span>条数据<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span>从第二条数据开始，展示后面<span class="token number">5</span>条数据<span class="token punctuation">;</span></span>
<span class="line">如果按<span class="token number">5</span>条数据分页，查询第二页数据<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span></span>
<span class="line">pagesize<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pagesize表示一页展示pagesize条数据，查看第n页的数据</span>
<span class="line"></span></code></pre></div><h3 id="子查询和嵌套查询" tabindex="-1"><a class="header-anchor" href="#子查询和嵌套查询"><span>子查询和嵌套查询</span></a></h3><h4 id="where中使用子查询" tabindex="-1"><a class="header-anchor" href="#where中使用子查询"><span>where中使用子查询</span></a></h4><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 查询工资高于平均工资的员工所有信息</span></span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h4 id="from后使用子查询" tabindex="-1"><a class="header-anchor" href="#from后使用子查询"><span>from后使用子查询</span></a></h4><p>找出每个部门平均的薪水等级(每个员工的薪资等级)</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> g<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>g<span class="token punctuation">.</span>avg <span class="token keyword">from</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> avg<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">)</span> <span class="token keyword">as</span> g</span>
<span class="line"><span class="token keyword">inner</span> <span class="token keyword">join</span> salgrade</span>
<span class="line"><span class="token keyword">on</span> g<span class="token punctuation">.</span>avg <span class="token operator">between</span> losal <span class="token operator">and</span> hisal<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h4 id="select后使用子查询" tabindex="-1"><a class="header-anchor" href="#select后使用子查询"><span>select后使用子查询</span></a></h4><p>找出每个员工所在的部门名称,要求显示员工名和部门表</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> dept d <span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>d<span class="token punctuation">.</span>deptno<span class="token punctuation">)</span> <span class="token keyword">as</span> dname <span class="token keyword">from</span> emp e<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> ename<span class="token punctuation">,</span>dname <span class="token keyword">from</span> emp e <span class="token keyword">left</span> <span class="token keyword">join</span> dept d <span class="token keyword">on</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>使用select子查询可以不用连表</p><h3 id="函数" tabindex="-1"><a class="header-anchor" href="#函数"><span>函数</span></a></h3><p>ABS()绝对值函数</p><p>ceiling()向上取整</p><p>floor()向下取整</p><p>rand()0-1的随机数</p><p>sign()判断数的符号，负数-1，0就是0，正数1</p><h4 id="字符串" tabindex="-1"><a class="header-anchor" href="#字符串"><span>字符串</span></a></h4><p>char_length()字符串长度</p><p>concat(a,b,c)拼接字符串</p><p>insert(a,i,j,b)表示替换从a串中第i个开始，往后数j用b串替代</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token keyword">insert</span><span class="token punctuation">(</span><span class="token string">&quot;我是中国人&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;就是一个人&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>lower()字符串中的大写字符小写</p><p>upper()字符串中的小写字符大写</p><p>instr(&quot;abcdefijk&quot;,&quot;fi&quot;)5返回字符串的索引</p><p>replace(&quot;abcdefghijklmn&quot;,&quot;cdef&quot;,&quot;ab&quot;)查询到的子串替换成新串</p><p>substr(&quot;&quot;,i,j)截取字符串，重i开始截取数量j</p><p>reverse(&quot;猪是念来过倒&quot;);反转</p><p>mid(&quot;字符串&quot;，start_index,length),截取字符串</p><h4 id="时间" tabindex="-1"><a class="header-anchor" href="#时间"><span>时间</span></a></h4><ul><li>current_date()当前时间年月日YY-MM-DD</li><li>current_time()hh:mm:ss</li><li>now()YY-MM-DD hh:mm:ss</li><li>localtime()本地时间</li><li>sysdate()系统时间</li><li>year(now())</li><li>month(now())</li><li>day(now())</li><li>hour(now())</li><li>minute(now())</li><li>second(now())</li><li>DATE_FORMAT(data, format)日期转指定格式字符串</li><li>STR_TO_DATE(str, format)字符串按指定格式转日期，非法转换结果会为null</li></ul><table><thead><tr><th>format格式</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>%Y</td><td>4位年份</td><td>2025</td></tr><tr><td>%y</td><td>2位年份</td><td>25</td></tr><tr><td>%m</td><td>2位月份</td><td>06</td></tr><tr><td>%c</td><td>月份</td><td>6</td></tr><tr><td>%d</td><td>2位日期</td><td>23</td></tr><tr><td>%H</td><td>24小时制</td><td>21</td></tr><tr><td>%h</td><td>12小时制</td><td>09</td></tr><tr><td>%i</td><td>分钟(00-59)</td><td>23</td></tr><tr><td>%s</td><td>秒(00-59)</td><td>20</td></tr><tr><td>%p</td><td>AM/PM</td><td>AM</td></tr><tr><td>%W</td><td>星期名</td><td>Monday</td></tr><tr><td>%a</td><td>星期名缩写</td><td>Mon</td></tr></tbody></table><h4 id="系统" tabindex="-1"><a class="header-anchor" href="#系统"><span>系统</span></a></h4><p>system_user()系统用户</p><p>user()</p><p>version()</p><h4 id="聚合" tabindex="-1"><a class="header-anchor" href="#聚合"><span>聚合</span></a></h4><p>count(字段)统计字段中的数据，忽略null值，字段是主键速度最优</p><p>count(*)不会忽略null</p><p>count(1)不会忽略null 没有主键优先</p><p>sum()求总和</p><p>avg()平均</p><p>max()最高</p><p>min()最低</p><h4 id="分组函数" tabindex="-1"><a class="header-anchor" href="#分组函数"><span>分组函数</span></a></h4><p>group by 字段</p><p>group by 字段 having 条件</p><p>出现在where后面</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> <span class="token boolean">true</span> <span class="token keyword">group</span> <span class="token keyword">by</span> deptno <span class="token keyword">having</span> <span class="token boolean">true</span> <span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno <span class="token keyword">having</span> <span class="token boolean">true</span> <span class="token keyword">where</span> <span class="token boolean">true</span><span class="token punctuation">;</span>语法错误，<span class="token keyword">where</span>出现在<span class="token keyword">group</span>后面</span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">join</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">on</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">where</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">group</span> <span class="token keyword">by</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">having</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">limit</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre></div><h3 id="exists" tabindex="-1"><a class="header-anchor" href="#exists"><span>exists</span></a></h3><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- exists运算用来判断查询子句是否有记录，如果有一条记录或多条记录则返回true，否则fasle;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20220926165631291.png" alt="image-20220926165631291" tabindex="0" loading="lazy"><figcaption>image-20220926165631291</figcaption></figure><h3 id="select-into" tabindex="-1"><a class="header-anchor" href="#select-into"><span>select into</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> new_table</span>
<span class="line"><span class="token keyword">as</span></span>
<span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 将查询的数据列作为new_table的，并且将数据插入的新表中，新建了一个没有主键的表。</span></span>
<span class="line"><span class="token comment">-- 如果new_table存在，将会报错，提示这张表已经存在。</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 只复制表的结构</span></span>
<span class="line">craete <span class="token keyword">table</span> new_table <span class="token operator">like</span> old_table <span class="token comment">#只复制old_table结构，会创建主键</span></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> new_table <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> old_table <span class="token keyword">where</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">#这种方式不会创建主键</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://47.101.155.205/image-20220926135130041.png" alt="image-20220926135130041" tabindex="0" loading="lazy"><figcaption>image-20220926135130041</figcaption></figure><h3 id="insert-into-select" tabindex="-1"><a class="header-anchor" href="#insert-into-select"><span>insert into select</span></a></h3><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> new_table <span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 将查询到的数据插入已经存在的表中,new_table必须存在，不存在报错。</span></span>
<span class="line"><span class="token comment">-- 表中的主键必须在查询中存在，如果没有，设置自增也不会自增</span></span>
<span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> new_table<span class="token punctuation">(</span>cid<span class="token punctuation">,</span>name<span class="token punctuation">,</span>className<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">select</span> s<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name className <span class="token keyword">from</span> student s <span class="token keyword">join</span> class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 可以通过插入数据对于列的方式实现主键自增，但是主键自增不是连续的</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20220926141317103.png" alt="image-20220926141317103" tabindex="0" loading="lazy"><figcaption>image-20220926141317103</figcaption></figure><h3 id="员工打卡时间统计" tabindex="-1"><a class="header-anchor" href="#员工打卡时间统计"><span>员工打卡时间统计</span></a></h3><figure><img src="http://47.101.155.205/image-20220926201427991.png" alt="image-20220926201427991" tabindex="0" loading="lazy"><figcaption>image-20220926201427991</figcaption></figure><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token keyword">no</span><span class="token punctuation">,</span>date_format<span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">,</span><span class="token string">&#39;%Y-%m-%d&#39;</span><span class="token punctuation">)</span> <span class="token keyword">day</span><span class="token punctuation">,</span>date_format<span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">,</span><span class="token string">&#39;%H:%i&#39;</span><span class="token punctuation">)</span> <span class="token keyword">time</span> <span class="token keyword">from</span> emp </span>
<span class="line"><span class="token comment"># 先获取时间</span></span>
<span class="line"><span class="token keyword">select</span> a<span class="token punctuation">.</span><span class="token keyword">no</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span><span class="token keyword">day</span> <span class="token keyword">day</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token keyword">time</span><span class="token punctuation">)</span> <span class="token keyword">time</span> <span class="token keyword">from</span> </span>
<span class="line"><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">no</span><span class="token punctuation">,</span>date_format<span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">,</span><span class="token string">&#39;%Y-%m-%d&#39;</span><span class="token punctuation">)</span> <span class="token keyword">day</span><span class="token punctuation">,</span>date_format<span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">,</span><span class="token string">&#39;%H:%i&#39;</span><span class="token punctuation">)</span> <span class="token keyword">time</span> <span class="token keyword">from</span> emp<span class="token punctuation">)</span> a</span>
<span class="line"><span class="token keyword">where</span> a<span class="token punctuation">.</span><span class="token keyword">time</span> <span class="token operator">between</span> <span class="token string">&#39;08:00&#39;</span> <span class="token operator">and</span> <span class="token string">&#39;18:00&#39;</span></span>
<span class="line"><span class="token keyword">group</span> <span class="token keyword">by</span> a<span class="token punctuation">.</span><span class="token keyword">no</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span><span class="token keyword">day</span></span>
<span class="line"><span class="token keyword">union</span> </span>
<span class="line"><span class="token keyword">select</span> b<span class="token punctuation">.</span><span class="token keyword">no</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span><span class="token keyword">day</span> <span class="token keyword">day</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token keyword">time</span><span class="token punctuation">)</span> <span class="token keyword">time</span> <span class="token keyword">from</span></span>
<span class="line"><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">no</span><span class="token punctuation">,</span>date_format<span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">,</span><span class="token string">&#39;%Y-%m-%d&#39;</span><span class="token punctuation">)</span> <span class="token keyword">day</span><span class="token punctuation">,</span>date_format<span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">,</span><span class="token string">&#39;%H:%i&#39;</span><span class="token punctuation">)</span> <span class="token keyword">time</span> <span class="token keyword">from</span> emp<span class="token punctuation">)</span> b </span>
<span class="line"><span class="token keyword">where</span> b<span class="token punctuation">.</span><span class="token keyword">time</span> <span class="token operator">between</span> <span class="token string">&#39;17:30&#39;</span> <span class="token operator">and</span> <span class="token string">&#39;18:00&#39;</span></span>
<span class="line"><span class="token keyword">group</span> <span class="token keyword">by</span> b<span class="token punctuation">.</span><span class="token keyword">no</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span><span class="token keyword">day</span></span>
<span class="line"><span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token keyword">day</span><span class="token punctuation">,</span><span class="token keyword">time</span></span>
<span class="line"><span class="token comment">-- 缺点，没有统计超出打卡时间范围的人</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="排序" tabindex="-1"><a class="header-anchor" href="#排序"><span>排序</span></a></h3><figure><img src="http://47.101.155.205/image-20220926203901875.png" alt="image-20220926203901875" tabindex="0" loading="lazy"><figcaption>image-20220926203901875</figcaption></figure><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">set</span> <span class="token variable">@rank</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">@prev</span> <span class="token operator">=</span> <span class="token boolean">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> id<span class="token punctuation">,</span>score<span class="token punctuation">,</span></span>
<span class="line"><span class="token keyword">case</span></span>
<span class="line">	<span class="token keyword">when</span> <span class="token variable">@prev</span> <span class="token operator">=</span> score <span class="token keyword">then</span></span>
<span class="line">		<span class="token variable">@rank</span></span>
<span class="line">	<span class="token keyword">when</span> <span class="token variable">@prev</span> :<span class="token operator">=</span> score <span class="token keyword">then</span></span>
<span class="line">		<span class="token variable">@rank</span> :<span class="token operator">=</span> <span class="token variable">@rank</span> <span class="token operator">+</span> <span class="token number">1</span></span>
<span class="line">	<span class="token keyword">end</span> rank</span>
<span class="line"><span class="token keyword">from</span> student</span>
<span class="line"><span class="token keyword">order</span> <span class="token keyword">by</span> score <span class="token keyword">desc</span><span class="token punctuation">,</span>id </span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-事务-tcl" tabindex="-1"><a class="header-anchor" href="#_5-事务-tcl"><span>5.事务(TCL)</span></a></h2><p>事务原则ACID：原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability）</p><ul><li>A（原子性）事务时最小的工作单元，不可再分</li><li>C（一致性）事务必须保证多条DML语句同时成功或者失败</li><li>I（隔离性）事务A和事务B之间</li><li>D（持久性）说的是最终数据必须持久化到硬盘中，事务才算成功.</li></ul><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">mysql<span class="token operator">&gt;</span> show variables like <span class="token string">&#39;autocommit&#39;</span><span class="token punctuation">;</span></span>
<span class="line">+---------------+-------+</span>
<span class="line"><span class="token operator">|</span> Variable_name <span class="token operator">|</span> Value <span class="token operator">|</span></span>
<span class="line">+---------------+-------+</span>
<span class="line"><span class="token operator">|</span> autocommit    <span class="token operator">|</span> ON    <span class="token operator">|</span></span>
<span class="line">+---------------+-------+</span>
<span class="line"><span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># 查询当前事务是否自动提交；</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 查询字符编码</span></span>
<span class="line">show variables like <span class="token string">&quot;char%&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><strong>只有DML语句才支持事务insert delete update</strong></p><div class="language-markdown line-numbers-mode" data-highlighter="prismjs" data-ext="md" data-title="md"><pre><code><span class="line">事务隔离性存在隔离级别,理论上隔离级别包括4个:</span>
<span class="line">			第一级别:读未提交(read uncommitted)</span>
<span class="line">				对方事务还没有提交,当前事务可以读取到对方未提交的数据</span>
<span class="line">				读未提交存在脏读(Dirty Read)现象:表示读了脏的数据(不稳定的数据)断电,rollback</span>
<span class="line">			第二级别:读已提交(read committed)</span>
<span class="line">				对方事务提交之后的数据我方可以读取到</span>
<span class="line">				这种隔离级别解决了:脏读现象没有了</span>
<span class="line">				读已提交存在的问题:不可重复读取</span>
<span class="line">			第三级别:可重复读(repeatable read)</span>
<span class="line">				这个隔离级别解决了:不可重复读取</span>
<span class="line">				这种隔离级别存在的问题是:读取到的数据是幻象</span>
<span class="line">			第四级别:序列化读/串行化读serializable</span>
<span class="line">				解决了所有问题</span>
<span class="line">				效率低.事务需要排队</span>
<span class="line"></span>
<span class="line"><span class="token code keyword">			oracle数据的默认的隔离级别是:读已提交</span>
<span class="line">			mySQL数据库的默认隔离级别是:可重复读</span></span>
<span class="line">set global transaction isolation level 隔离级别;</span>
<span class="line">查询隔离级别</span>
<span class="line">get global transaction isolation;</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mysql演示可重复读思路" tabindex="-1"><a class="header-anchor" href="#mysql演示可重复读思路"><span>MySQL演示可重复读思路</span></a></h3><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">--1、首先打开两个dos窗口，使用相同的数据库</span></span>
<span class="line"><span class="token comment">--2、在两个表开始事务之前，插入数据，并且都查询下结果</span></span>
<span class="line"><span class="token comment">--3、两个窗口都设置set autocommit=0，然后start transaction;</span></span>
<span class="line"><span class="token comment">--4、第一个窗口可以插入几条数据，然后commit;第二个窗口直接一直查询，可以看到数据和开始事务之前的数据一样</span></span>
<span class="line">即出现了可重复读的现象</span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/可重复读.png" alt="image-20220401170101050" tabindex="0" loading="lazy"><figcaption>image-20220401170101050</figcaption></figure><p>在插入数据的时候，都共用了自增的内存，当出现unique索引，而且这个内容被其他事务的占用，没有提交事务，这个事务会排队，直到占用的事务结束。事务之间的隔离级别会影响select语句的结果</p><p>set autocommit=0关闭自动提交事务</p><p>set autocommit=1开启自动提交事务</p><p>创建一个新表</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> account<span class="token punctuation">(</span></span>
<span class="line">	id <span class="token keyword">int</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span></span>
<span class="line">    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">unique</span><span class="token punctuation">,</span></span>
<span class="line">    money <span class="token keyword">decimal</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>插入两条数据</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> account<span class="token punctuation">(</span>name<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> account<span class="token punctuation">(</span>name<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;ls&quot;</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>set autocommit=0;设置关闭事务自动提交</p><figure><img src="http://47.101.155.205/MySQL事务1.png" alt="image-20220401145937352" tabindex="0" loading="lazy"><figcaption>image-20220401145937352</figcaption></figure><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">update</span> account <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> account<span class="token punctuation">(</span>name<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;ww&quot;</span><span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p><strong>MySQL数据的默认的隔离级别是:可重复读</strong></p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- mysql8.0查询事务隔离级别</span></span>
<span class="line"><span class="token keyword">SELECT</span> @<span class="token variable">@transaction_isolation</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>select @@global.tx_isolation;查询当前事务的隔离性</p><p>set global transaction isolation level read uncommitted;</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span><span class="token punctuation">(</span></span>
<span class="line">	id <span class="token keyword">int</span><span class="token punctuation">,</span></span>
<span class="line">    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token keyword">modify</span> id <span class="token keyword">int</span> <span class="token keyword">auto_increment</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;ls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;ww&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><h2 id="_6-索引" tabindex="-1"><a class="header-anchor" href="#_6-索引"><span>6.索引</span></a></h2><p><strong>索引是帮助MySQL高效获取数据的数据结构。</strong></p><ul><li>主键索引primary key，一个表只能一个字段有主键索引</li><li>唯一索引unique key</li><li>常规索引key/index 关键字设置</li><li>全文索引</li></ul><p><strong>show index from 表名;</strong></p><p><strong>alter table 数据库.表名 add fulltext index 索引名(要加索引的字段);</strong></p><p><strong>create index 索引名称 on 表名(字段);</strong></p><p><strong>drop index 索引名 on 表名;</strong></p><p><strong>explain select语句查看sql语句的执行计划</strong></p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> app_user <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">&quot;用户999520&quot;</span><span class="token punctuation">;</span><span class="token number">0.46</span>sec没有加索引</span>
<span class="line">mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> app_user <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">&quot;用户999520&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----+-------------+----------+------+---------------+------+---------+------+--------+-------------+</span></span>
<span class="line"><span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span>    <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span>   <span class="token operator">|</span> Extra       <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----+-------------+----------+------+---------------+------+---------+------+--------+-------------+</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> app_user <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">999315</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----+-------------+----------+------+---------------+------+---------+------+--------+-------------+</span></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">index</span> app_user_index_name <span class="token keyword">on</span> app_user<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">index</span> app_user_index_name <span class="token keyword">on</span> app_user<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">4.47</span> sec<span class="token punctuation">)</span></span>
<span class="line">Records: <span class="token number">0</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> app_user <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">&quot;用户999520&quot;</span><span class="token punctuation">;</span><span class="token number">0.00</span>sec</span>
<span class="line"><span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> app_user <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">&quot;用户999520&quot;</span><span class="token punctuation">;</span></span>
<span class="line">mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> app_user <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">&quot;用户999520&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----+-------------+----------+------+---------------------+---------------------+---------+-------+------+-</span></span>
<span class="line"><span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span>    <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys       <span class="token operator">|</span> <span class="token keyword">key</span>                 <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> Extra       <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----+-------------+----------+------+---------------------+---------------------+---------+-------+------+-</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> app_user <span class="token operator">|</span> ref  <span class="token operator">|</span> app_user_index_name <span class="token operator">|</span> app_user_index_name <span class="token operator">|</span> <span class="token number">203</span>     <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----+-------------+----------+------+---------------------+---------------------+---------+-------+------+-</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="插入100万条数据" tabindex="-1"><a class="header-anchor" href="#插入100万条数据"><span>插入100万条数据</span></a></h3><p>delimiter $$</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">delimiter</span> $$</span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">function</span> mock_data<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">returns</span> <span class="token keyword">int</span></span>
<span class="line"><span class="token keyword">begin</span></span>
<span class="line">	<span class="token keyword">declare</span> num <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">1000000</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">declare</span> i <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">while</span> i <span class="token operator">&lt;</span> num <span class="token keyword">do</span></span>
<span class="line">		<span class="token keyword">insert</span>语句<span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">end</span> <span class="token keyword">while</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">return</span> i<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">end</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">table</span><span class="token punctuation">(</span>列<span class="token number">1</span><span class="token punctuation">,</span>列<span class="token number">2</span><span class="token punctuation">,</span>列<span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token keyword">value</span><span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">&quot;用户&quot;</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>列<span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">delimiter</span> $$</span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">function</span> mock_data<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">returns</span> <span class="token keyword">int</span></span>
<span class="line"><span class="token keyword">begin</span></span>
<span class="line">	<span class="token keyword">declare</span> num <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">1000001</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">declare</span> i <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">while</span> i <span class="token operator">&lt;</span> num <span class="token keyword">do</span></span>
<span class="line">		<span class="token keyword">insert</span> <span class="token keyword">into</span> app_user<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>phone<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>gender<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token keyword">values</span></span>
<span class="line"><span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">&quot;用户&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">999999999</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token string">&quot;18&quot;</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span><span class="token number">100000000</span><span class="token operator">+</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">999999999</span><span class="token operator">-</span><span class="token number">100000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">999999</span><span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span><span class="token number">18</span><span class="token operator">+</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">current_timestamp</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">end</span> <span class="token keyword">while</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">return</span> i<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">end</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> mock_data<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://47.101.155.205/dos创建MySQL函数.png" alt="image-20220401011828690" tabindex="0" loading="lazy"><figcaption>image-20220401011828690</figcaption></figure><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">delimiter</span> <span class="token comment">//</span></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">function</span> mock_data<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">returns</span> <span class="token keyword">int</span></span>
<span class="line"><span class="token keyword">begin</span></span>
<span class="line">	<span class="token keyword">declare</span> num <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">1000001</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">declare</span> i <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">while</span> i <span class="token operator">&lt;</span> num <span class="token keyword">do</span></span>
<span class="line">		<span class="token keyword">insert</span> <span class="token keyword">into</span> app_user<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>phone<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>gender<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token keyword">values</span></span>
<span class="line"><span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">&quot;用户&quot;</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">999999999</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token string">&quot;18&quot;</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span><span class="token number">100000000</span><span class="token operator">+</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">999999999</span><span class="token operator">-</span><span class="token number">100000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>UUID<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span><span class="token number">18</span><span class="token operator">+</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">current_timestamp</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">end</span> <span class="token keyword">while</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token keyword">return</span> i<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">end</span><span class="token comment">//</span></span>
<span class="line">上面的代码在mysql5<span class="token punctuation">.</span><span class="token number">5.36</span>版本可以在dos窗口直接执行</span>
<span class="line">插入数据代码</span>
<span class="line"><span class="token keyword">select</span> mock_data<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">delimiter</span><span class="token comment">//</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>查看自定义函数</p></blockquote><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">show</span> <span class="token keyword">function</span> <span class="token keyword">status</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 查看函数创建的语句</span></span>
<span class="line"><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">function</span> function_name<span class="token punctuation">(</span>函数名<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><blockquote><p>删除自定义函数</p></blockquote><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 删除自定义函数</span></span>
<span class="line"><span class="token keyword">drop</span> <span class="token keyword">function</span> function_name<span class="token punctuation">(</span>函数名<span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">999999999</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>user表插入数据</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> app_user<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>phone<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>gender<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token keyword">values</span></span>
<span class="line"><span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">&quot;用户&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">999999999</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token string">&quot;18&quot;</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span><span class="token number">100000000</span><span class="token operator">+</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">999999999</span><span class="token operator">-</span><span class="token number">100000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">999999</span><span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span><span class="token number">18</span><span class="token operator">+</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">current_timestamp</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>也可以把密码改成uuid()</p><p>多了一个括号，找了半天</p><p>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;)&#39; at line 1</p><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> app_user<span class="token punctuation">(</span>email<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>password<span class="token punctuation">,</span>age<span class="token punctuation">,</span>create_time<span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span>concat<span class="token punctuation">(</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">999999999</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>concat<span class="token punctuation">(</span><span class="token string">&quot;18&quot;</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span><span class="token number">100000000</span><span class="token operator">+</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">999999999</span><span class="token operator">-</span><span class="token number">100000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">999999</span>）<span class="token punctuation">)</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">current_timestamp</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">insert</span> <span class="token keyword">into</span> app_user<span class="token punctuation">(</span>email<span class="token punctuation">,</span>create_time<span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span>concat<span class="token punctuation">(</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">999999999</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">current_timestamp</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>创建user表</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token identifier"><span class="token punctuation">`</span>mock<span class="token punctuation">`</span></span><span class="token punctuation">(</span></span>
<span class="line">	<span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span> <span class="token keyword">comment</span> <span class="token string">&quot;用户姓名&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&quot;用户邮箱&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>phone<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span> <span class="token keyword">comment</span> <span class="token string">&quot;手机号&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>gender<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">default</span> <span class="token string">&quot;0&quot;</span> <span class="token keyword">comment</span> <span class="token string">&quot;性别(0:男;1:女)&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&quot;密码&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;0&quot;</span> <span class="token keyword">comment</span> <span class="token string">&quot;年龄&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>update_time<span class="token punctuation">`</span></span> <span class="token keyword">timestamp</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">default</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8mb4 <span class="token keyword">comment</span> <span class="token string">&quot;app用户表&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>我的数据库不支持下面的代码</strong></p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token identifier"><span class="token punctuation">`</span>app_user<span class="token punctuation">`</span></span><span class="token punctuation">(</span></span>
<span class="line">	<span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span> <span class="token keyword">comment</span> <span class="token string">&quot;用户姓名&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&quot;用户邮箱&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>phone<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span> <span class="token keyword">comment</span> <span class="token string">&quot;手机号&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>gender<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">default</span> <span class="token string">&quot;0&quot;</span> <span class="token keyword">comment</span> <span class="token string">&quot;性别(0:男;1:女)&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&quot;密码&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;0&quot;</span> <span class="token keyword">comment</span> <span class="token string">&quot;年龄&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token identifier"><span class="token punctuation">`</span>update_time<span class="token punctuation">`</span></span> <span class="token keyword">timestamp</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">default</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8mb4 <span class="token keyword">comment</span> <span class="token string">&quot;app用户表&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="索引原则" tabindex="-1"><a class="header-anchor" href="#索引原则"><span>索引原则</span></a></h3><ul><li>索引不是越多越好</li><li>不要对经常变动的数据加索引</li><li>小数据量不需要加索引</li><li>经常查询的字段可以加索引</li><li>查询带索引的字段不要带表达式</li></ul><h3 id="索引数据结构及算法原理" tabindex="-1"><a class="header-anchor" href="#索引数据结构及算法原理"><span>索引数据结构及算法原理</span></a></h3><p>数据库有两种索引，一种是<strong>聚簇索引</strong>，另一种是<strong>非聚簇索引</strong>。</p><p><strong>聚簇索引</strong>：其数据库记录和索引存储在一起，在B+树种，在叶子节点，索引和记录行存储在一起，查找到索引就是查找到数据库记录。Mysql数据库的主键就是聚簇索引，主键ID和所在的记录行存储在一起。MySQL的数据库文件实际上是以主键作为中间节点，行记录作为叶子节点的一颗B+树。</p><p><strong>非聚簇索引</strong>：其叶子节点记录的不是数据行，而是聚簇索引（主键）。通过B+树在叶子节点找到非聚簇索引，与索引在一起存储的就是主键，在根据主键（聚簇）索引就可以找到对应的记录行，这种通过非聚簇索引找到主键索引，在通过主键索引找到数据行的过程被称为<strong>回表</strong>。</p><p>MySQL数据支持多种引擎，不同引擎使用不同的索引结构，如BTree索引，B+Tree索引，哈希索引，全文索引。</p><blockquote><p>MyISAM引擎</p></blockquote><p>MyISAM索引文件和数据文件是分离的，索引文件仅保存数据记录的地址。MyISAM索引底层使用的是B+Tree索引，data域保存数据记录的地址。MyISAM中索引检索的算法为首先按照B+Tree搜索算法搜索索引，如果指定的Key存在，则取出其data域的值，然后以data域的值为地址，读取相应数据记录。</p><blockquote><p>INNODB引擎</p></blockquote><p>INNODB也是使用B+Tree作为索引的结构，InnoDB的数据文件本身就是索引文件。在INNODB引擎中，表数据文件就是按B+Tree组织的一个索引结构，这棵树的叶节点data域保存了完整的数据记录，索引的key就是数据表的主键，因此INNODB表数据本身就是主索引，而且INNODB表建表必须要主键的原因。</p><p>与MyISAM索引的不同是InnoDB的辅助索引data域存储相应记录主键的值而不是地址。InnoDB的所有辅助索引都引用主键作为data域。</p><h3 id="索引使用策略及优化" tabindex="-1"><a class="header-anchor" href="#索引使用策略及优化"><span>索引使用策略及优化</span></a></h3><p>高效使用索引的首要条件是知道什么样的查询会用到索引，这个和最左前缀原理相关。</p><p>单索引：索引只引用了单个的列。</p><p>联合索引：索引可以以一定顺序引用多个列。</p><p>查询表中有哪些索引</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SHOW INDEX FROM table<span class="token punctuation">(</span>实际的数据库表名<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">#可以查看到表中可以有主索引和辅助索引</span></span>
<span class="line"></span></code></pre></div><p>删除索引</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">ALTER TABLE table_name DROP INDEX index_name<span class="token punctuation">;</span></span>
<span class="line">alter table app_user drop index index1<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">DROP INDEX <span class="token punctuation">[</span>indexName<span class="token punctuation">]</span> ON table_name<span class="token punctuation">;</span> </span>
<span class="line">drop index index1 on app_user<span class="token punctuation">;</span></span>
<span class="line">drop index index2 on app_user<span class="token punctuation">;</span></span>
<span class="line">drop index index3 on app_user<span class="token punctuation">;</span></span>
<span class="line">drop index index4 on app_user<span class="token punctuation">;</span></span>
<span class="line">drop index index6 on app_user<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加辅助索引</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">ALTER TABLE table_name <span class="token function">add</span> PRIMARY KEY<span class="token punctuation">(</span>col主键列名<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">alter table app_user <span class="token function">add</span> PRIMARY KEY<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">#主键索引，表创建主键时自动创建这个是唯一索引</span></span>
<span class="line"></span>
<span class="line">CREATE INDEX indexName ON table_name <span class="token punctuation">(</span>column_name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">#这里只能选用一个列</span></span>
<span class="line">create index index1 on app_user<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">#在表app_user中以id列添加一个索引index1</span></span>
<span class="line"><span class="token comment">#这样创建的索引Non——unique值是1</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#唯一索引:索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。</span></span>
<span class="line">CREATE UNIQUE INDEX indexName ON TABLE<span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">create unique index index2 on app_user<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">alter table app_user <span class="token function">add</span> unique index3 <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">alter table app_user <span class="token function">add</span> unique index4 <span class="token punctuation">(</span>id,name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#普通索引</span></span>
<span class="line">ALTER TABLE table_name ADD INDEX <span class="token variable"><span class="token variable">`</span>index_name<span class="token variable">`</span></span> <span class="token punctuation">(</span>col, last_name<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">))</span><span class="token punctuation">;</span></span>
<span class="line">alter table app_user <span class="token function">add</span> index <span class="token variable"><span class="token variable">`</span>index1<span class="token variable">`</span></span> <span class="token punctuation">(</span>id,name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">alter table app_user <span class="token function">add</span> index <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">#以列名创建索引的名称Non_unique;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#全文索引</span></span>
<span class="line">ALTER TABLE table_name ADD FULLTEXT INDEX index_name<span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">alter table app_user <span class="token function">add</span> fulltext index index1<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">#提示这个表不支持全文索引</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用策略" tabindex="-1"><a class="header-anchor" href="#使用策略"><span>使用策略</span></a></h3><blockquote><p>一、全列匹配</p></blockquote><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">EXPLAIN SELECT 语句<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">#可以查看sql的执行情况</span></span>
<span class="line"></span></code></pre></div><p>where匹配的条件进行精确匹配(指=，in)，索引可以用到。添加索引的列全部被使用到，打乱where列的条件顺序，MySQL的查询优化器会自动调整where条件顺序以匹配适合的索引。</p><blockquote><p>二、最左前缀原理</p></blockquote><p>假如一个表中加入了三个顺序的列(id，name，age)的索引(这里是使用到了联合主键，会自动创建联合索引)，查询时使用一下查询语句</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">EXPLAIN SELECT * from where <span class="token function">id</span> <span class="token operator">=</span> <span class="token number">1</span> and age <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">#由于中间列name的条件不存在，使用最左前缀连接，因此需要对结果进行扫描过滤age(如果id为主键唯一，可以不用扫描)。如果需要使用age索引，可以怎加一个辅助索引(id,age),这时上面的查询就可以使用到索引。</span></span>
<span class="line"><span class="token comment">#还可以使用另外一种方式，如果name的不同值数量不大，可以使用以下方式</span></span>
<span class="line">EXPLAIN SELECT * FROM WHERE <span class="token function">id</span> <span class="token operator">=</span> <span class="token number">1</span> and name in<span class="token punctuation">(</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span> and age <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">#这个时候之前的索引完全使用上了，但是扫描了name所包含的几条数据</span></span>
<span class="line"></span></code></pre></div><p>在一个索引使用的where的情况下，会导致后面的索引不使用。</p><div class="language-java" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">explain select <span class="token operator">*</span> from app_user where id <span class="token operator">=</span> <span class="token number">4</span> and gender <span class="token operator">=</span> <span class="token number">0</span> and name <span class="token operator">=</span><span class="token char">&#39;用户4&#39;</span><span class="token punctuation">;</span>#使用了全部的索引</span>
<span class="line">explain select <span class="token operator">*</span> from app_user where id <span class="token operator">&lt;</span> <span class="token number">10</span> and name <span class="token operator">=</span><span class="token char">&#39;用户4&#39;</span> and gender <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>#只是用id的索引</span>
<span class="line"></span></code></pre></div><p>查询性能</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SHOW PROFILES<span class="token punctuation">;</span></span>
<span class="line"><span class="token builtin class-name">set</span> <span class="token assign-left variable">profiling</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">#开启sql执行的线程状态及消耗的时间</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="索引失效情况" tabindex="-1"><a class="header-anchor" href="#索引失效情况"><span>索引失效情况</span></a></h3><ul><li>查询条件没有指定索引第一列</li><li>使用like查询，且通配符%出现在开头</li><li>使用两个范围列查询</li><li>查询的列含有表达式或者函数</li><li></li></ul><h2 id="_7-权限管理-dcl-和备份" tabindex="-1"><a class="header-anchor" href="#_7-权限管理-dcl-和备份"><span>7.权限管理(DCL)和备份</span></a></h2><h3 id="权限管理" tabindex="-1"><a class="header-anchor" href="#权限管理"><span>权限管理</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">--创建用户</span></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">user</span> 用户名 identified <span class="token keyword">by</span> <span class="token string">&quot;密码&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">user</span> ouy identified <span class="token keyword">by</span> <span class="token string">&quot;123456&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">--修改当前用户密码</span></span>
<span class="line"><span class="token keyword">set</span> password<span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">&quot;新密码&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">--修改指定用户密码</span></span>
<span class="line"><span class="token keyword">set</span> password <span class="token keyword">for</span> 用户名<span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">&quot;密码&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">set</span> password <span class="token keyword">for</span> oy<span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">&quot;1024&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">--重命名</span></span>
<span class="line"><span class="token keyword">rename</span> <span class="token keyword">user</span> 用户名 <span class="token keyword">to</span> 新用户名<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">rename</span> <span class="token keyword">user</span> oy <span class="token keyword">to</span> oycm<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">--授予全部的权限给用户--注意，没有grant权限</span></span>
<span class="line"><span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> 用户 </span>
<span class="line"></span>
<span class="line"><span class="token comment">--查看权限</span></span>
<span class="line"><span class="token keyword">show</span> grants <span class="token keyword">for</span> 用户<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">show</span> grants <span class="token keyword">for</span> oycm<span class="token punctuation">;</span></span>
<span class="line">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> grants <span class="token keyword">for</span> oycm<span class="token punctuation">;</span></span>
<span class="line">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> grants <span class="token keyword">for</span> oycm<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">-----------------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span class="token operator">|</span> Grants <span class="token keyword">for</span> oycm@<span class="token operator">%</span>                                                                                         </span>
<span class="line"><span class="token operator">+</span><span class="token comment">-----------------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span class="token operator">|</span> <span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">&#39;oycm&#39;</span><span class="token variable">@&#39;%&#39;</span> IDENTIFIED <span class="token keyword">BY</span> PASSWORD<span class="token string">&#39;*1054022B32CEAFA48BA111859744C8E18BA67D58&#39;</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">-----------------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span class="token keyword">show</span> grants <span class="token keyword">for</span> root<span class="token variable">@&quot;%&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">show</span> grants <span class="token keyword">for</span> root<span class="token variable">@localhost</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">--撤销权限 哪些权限，在哪些库，给谁撤销</span></span>
<span class="line"><span class="token keyword">revoke</span> 权限 <span class="token keyword">on</span> 库 <span class="token keyword">from</span> 用户<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">revoke</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> oycm<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">--删除用户</span></span>
<span class="line"><span class="token keyword">drop</span> <span class="token keyword">user</span> 用户名<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">drop</span> <span class="token keyword">user</span> ou<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mysql数据备份" tabindex="-1"><a class="header-anchor" href="#mysql数据备份"><span>MySQL数据备份</span></a></h3><p><strong>导出数据</strong></p><ul><li>拷贝物理文件地址</li><li>可视化工具手动到处</li><li>使用命令行导出，mysqldump</li><li>mysqldump -h主机 用户 密码 数据库 表1表2 &gt;导出地址</li></ul><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">mysqldump <span class="token operator">-</span>hlocalhost <span class="token operator">-</span>uroot <span class="token operator">-</span>p1024 school student<span class="token operator">&gt;</span>D:\<span class="token number">1.</span><span class="token keyword">sql</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><strong>导入数据</strong></p><ul><li>source sql文件地址</li><li>mysql -u用户名 -p密码 库名&lt;备份文件</li></ul><h3 id="强制关闭客户端连接" tabindex="-1"><a class="header-anchor" href="#强制关闭客户端连接"><span>强制关闭客户端连接</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 显示当前所有活跃的客户端连接信息</span></span>
<span class="line">SHOW PROCESSLIST<span class="token punctuation">;</span></span>
<span class="line">show full PROCESSLIST<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># thread_id上面结果的id</span></span>
<span class="line">KILL <span class="token operator">&lt;</span>id<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="_8-数据库的规范设计" tabindex="-1"><a class="header-anchor" href="#_8-数据库的规范设计"><span>8.数据库的规范设计</span></a></h2><p><strong>数据库的设计好处：</strong></p><ul><li>节省内存空间，避免数据冗余</li><li>保证数据库的完整性</li><li>方便开发系统</li></ul><p><strong>关于数据库的设计</strong></p><ul><li>分析需求：分析业务和需要处理的数据库的需求</li><li>概要设计：设计关系图E-R表</li></ul><p><strong>设计一个个人博客的数据库</strong></p><ul><li>收集信息，分析需求 <ul><li>用户表（用户登陆注销，用户的个人信息，写博客，创建分类）</li><li>分类表（文章分类，谁创建的）</li><li>文章表（文章的信息）</li><li>评论表（id parent_id自连接）</li><li>友情链接（链接的信息）</li><li>自定义表（系统信息，某个关键的子或者字段key： value：）</li><li>说说表</li></ul></li><li>标识实体（把需求落实到每个字段）</li><li>表示实体之间的关系 <ul><li>关系表</li></ul></li></ul><h3 id="数据库的三大范式" tabindex="-1"><a class="header-anchor" href="#数据库的三大范式"><span>数据库的三大范式</span></a></h3><h4 id="第一范式" tabindex="-1"><a class="header-anchor" href="#第一范式"><span>第一范式</span></a></h4><p>原子性：任何一张表都应该有主键，各个字段的每一列不可再分</p><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">所谓第一范式（1NF）是指在关系模型中，对于添加的一个规范要求，所有的域都应该是原子性的，即数据库表的每一列都是不可分割的原子数据项，而不能是集合，数组，记录等非原子数据项。即实体中的某个属性有多个值时，必须拆分为不同的属性。在符合第一范式（1NF）表中的每个域值只能是实体的一个属性或一个属性的一部分。简而言之，第一范式就是无重复的域。</span>
<span class="line"></span></code></pre></div><h4 id="第二范式" tabindex="-1"><a class="header-anchor" href="#第二范式"><span>第二范式</span></a></h4><p>在第一范式的基础上，消除非主键属性对主键的部分函数依赖</p><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">是所有非主键字段，完全依赖主键，不能产生部分依赖。</span>
<span class="line">多对多的关系</span>
<span class="line">可以使用三张表，</span>
<span class="line">学生和老师的关系</span>
<span class="line"></span></code></pre></div><h4 id="第三范式" tabindex="-1"><a class="header-anchor" href="#第三范式"><span>第三范式</span></a></h4><p>满足第二范式，消除传递依赖</p><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">所有非主键字段，不能产生传递依赖</span>
<span class="line">学生和班级的关系，一对多</span>
<span class="line"></span></code></pre></div><p>冗余和效率</p><h2 id="_9-jdbc" tabindex="-1"><a class="header-anchor" href="#_9-jdbc"><span>9.JDBC</span></a></h2><h3 id="什么是jdbc" tabindex="-1"><a class="header-anchor" href="#什么是jdbc"><span>什么是JDBC？</span></a></h3><p>JDBC(Java DataBase Connectivity)</p><figure><img src="http://47.101.155.205/JDBC.png" alt="image-20220401214010027" tabindex="0" loading="lazy"><figcaption>image-20220401214010027</figcaption></figure><p>java.sql</p><p>javax.sql</p><p>数据库驱动包mysql-connector-java-5.1.23</p><h3 id="第一个jdbc" tabindex="-1"><a class="header-anchor" href="#第一个jdbc"><span>第一个JDBC</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstJDBC</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span><span class="token class-name">SQLException</span><span class="token punctuation">{</span></span>
<span class="line">	</span>
<span class="line">		<span class="token comment">//1.加载驱动</span></span>
<span class="line">		<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		</span>
<span class="line">		<span class="token comment">//2.连接驱动的信息</span></span>
<span class="line">		<span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&quot;</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span></span>
<span class="line">		<span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">&quot;1024&quot;</span><span class="token punctuation">;</span></span>
<span class="line">		</span>
<span class="line">		<span class="token comment">//3.驱动连接数据库</span></span>
<span class="line">		<span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>username<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">//4.执行sql的对象</span></span>
<span class="line">		<span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">//5.执行sql的结果</span></span>
<span class="line">		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_user&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		<span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">		</span>
<span class="line">		<span class="token keyword">while</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">//System.out.println(rs);</span></span>
<span class="line">			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;loginName=&quot;</span> <span class="token operator">+</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;loginName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;loginPwd=&quot;</span> <span class="token operator">+</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;loginPwd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;realName=&quot;</span> <span class="token operator">+</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;realName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=============&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		</span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">//6.关闭连接</span></span>
<span class="line">		rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">		connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-驱动" tabindex="-1"><a class="header-anchor" href="#_1-驱动"><span>1.驱动</span></a></h4><ul><li>加载驱动 DirverManager</li></ul><div class="language-java" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// Driver类中静态代码块的内容</span></span>
<span class="line"><span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.jdbc.mysql.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h4 id="_2-连接所需数据" tabindex="-1"><a class="header-anchor" href="#_2-连接所需数据"><span>2.连接所需数据</span></a></h4><ol><li>url：</li><li>用户名：</li><li>密码：</li></ol><div class="language-java" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">mysql<span class="token operator">:</span></span>
<span class="line">jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>主机地址<span class="token operator">:</span>端口号<span class="token operator">/</span>数据库<span class="token operator">?</span>参数</span>
<span class="line">jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>jdbcstudy<span class="token operator">?</span></span>
<span class="line">oracle<span class="token operator">:</span></span>
<span class="line">jdbc<span class="token operator">:</span>oracle<span class="token operator">:</span>thin<span class="token operator">:</span>@主机地址<span class="token operator">:</span>端口号<span class="token operator">:</span>表</span>
<span class="line">jdbc<span class="token operator">:</span>oracle<span class="token operator">:</span>thin<span class="token operator">:</span><span class="token annotation punctuation">@localhost</span><span class="token operator">:</span><span class="token number">1512</span><span class="token operator">:</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h4 id="_3-connection" tabindex="-1"><a class="header-anchor" href="#_3-connection"><span>3.connection</span></a></h4><p>获取连接</p><div class="language-java" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">connection设置事务<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h4 id="_4-statement" tabindex="-1"><a class="header-anchor" href="#_4-statement"><span>4.statement</span></a></h4><p>Statement：执行sql</p><p>PreparedStatement：能安全执行sql</p><div class="language-java" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">statement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>执行<span class="token class-name">DQLsql</span>，返回<span class="token class-name">ResultSet</span>结果集</span>
<span class="line">statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>执行<span class="token class-name">DMLsql</span><span class="token punctuation">,</span>返回受影响的数据行数</span>
<span class="line">statement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>执行多条sql</span>
<span class="line"></span></code></pre></div><p>Statement执行DDL语句</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jdbc</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JDBCUtils</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test04PreparedStatement</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;create table student(\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;\tid int auto_increment,\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;    cno varchar(12) not null comment &#39;学生学号&#39;,\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;    name varchar(20) not null comment &#39;学生姓名&#39;,\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;    sex varchar(2) not null comment &#39;0:表示男,1:表示女&#39;,\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;    reportedTime timestamp default current_timestamp comment &#39;报到时间&#39;,\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;    addr varchar(100) not null comment &#39;家庭地址&#39;,\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;    phone varchar(11) not null comment &#39;学生电话号码&#39;,\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;    primary key(id)\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                <span class="token string">&quot;)engine innodb default charset=utf8&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">int</span> count <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span>statement<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-resultset" tabindex="-1"><a class="header-anchor" href="#_5-resultset"><span>5.ResultSet</span></a></h4><p>ResultSet：查询结果集</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">resultSet<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">resultSet<span class="token punctuation">.</span><span class="token function">getFloat</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">resultSet<span class="token punctuation">.</span><span class="token function">beforeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">resultSet<span class="token punctuation">.</span><span class="token function">afterLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">resultSet<span class="token punctuation">.</span><span class="token function">previous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>向前移动</span>
<span class="line">resultSet<span class="token punctuation">.</span><span class="token function">absolute</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span>移动到指定行</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-释放资源" tabindex="-1"><a class="header-anchor" href="#_6-释放资源"><span>6.释放资源</span></a></h4><div class="language-java" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><h3 id="sql注入" tabindex="-1"><a class="header-anchor" href="#sql注入"><span>SQL注入</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jdbc</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JDBCUtils</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test03</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入用户名，按enter结束&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">InputStreamReader</span> inputStreamReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">BufferedReader</span> bf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>inputStreamReader<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">String</span> username <span class="token operator">=</span> bf<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入密码，按enter结束&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">String</span> password <span class="token operator">=</span> bf<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//用户名输入&#39; or &#39;1=1        &#39; or &#39;1&#39;=&#39;1    注入</span></span>
<span class="line">        <span class="token comment">//密码输入 &#39; or &#39;1=1    &#39; or &#39;1&#39;=&#39;1</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_user where loginName=&#39;&quot;</span><span class="token operator">+</span>username<span class="token operator">+</span><span class="token string">&quot;&#39; and LoginPwd=&#39;&quot;</span><span class="token operator">+</span>password<span class="token operator">+</span><span class="token string">&quot;&#39;&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            rs <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;登陆成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span>statement<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="preparedstatement" tabindex="-1"><a class="header-anchor" href="#preparedstatement"><span>PreparedStatement</span></a></h3><p>能避免sql注入的问题</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 建一个学生表</span></span>
<span class="line"><span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span></span>
<span class="line">	id <span class="token keyword">int</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span></span>
<span class="line">    cno <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;学生学号&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;学生姓名&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;0:表示男,1:表示女&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    reportedTime <span class="token keyword">timestamp</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span> <span class="token keyword">comment</span> <span class="token string">&#39;报到时间&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    addr <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;家庭地址&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    phone <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;学生电话号码&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token keyword">engine</span> <span class="token keyword">innodb</span> <span class="token keyword">default</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PreparedStatement插入数据</p><ul><li>注意点：传递日期类，接受的Date是java.mysql.Date(传递的时间)</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jdbc</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JDBCUtils</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test04PreparedStatement</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into student(cno,name,sex,addr,phone)values(?,?,?,?,?)&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;201705500110&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//preparedStatement.setDate(3,new Date(new java.util.Date().getTime()));2021-04-01 00:00:00</span></span>
<span class="line">            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;中国湖南省&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&quot;11144442222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">int</span> count <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;插入成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span>preparedStatement<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用idea连接数据库" tabindex="-1"><a class="header-anchor" href="#使用idea连接数据库"><span>使用idea连接数据库</span></a></h3><figure><img src="http://47.101.155.205/idea连接数据库1.png" alt="image-20220402181119358" tabindex="0" loading="lazy"><figcaption>image-20220402181119358</figcaption></figure><figure><img src="http://47.101.155.205/image-20220402184154612.png" alt="image-20220402184154612" tabindex="0" loading="lazy"><figcaption>image-20220402184154612</figcaption></figure><figure><img src="http://47.101.155.205/image-20220402184447997.png" alt="image-20220402184447997" tabindex="0" loading="lazy"><figcaption>image-20220402184447997</figcaption></figure><p>连接上没有表内容</p><h3 id="数据库连接池" tabindex="-1"><a class="header-anchor" href="#数据库连接池"><span>数据库连接池</span></a></h3><p>最小连接数</p><p>最大连接数</p><p>等待超时</p><p>写连接池实现DataSource接口</p><p>DBCP</p><p>CP30</p><p>Druid</p><h2 id="md5" tabindex="-1"><a class="header-anchor" href="#md5"><span>MD5</span></a></h2><p>md5()</p><p>s护具加密？</p><h2 id="补充" tabindex="-1"><a class="header-anchor" href="#补充"><span>补充</span></a></h2><h3 id="查询内存" tabindex="-1"><a class="header-anchor" href="#查询内存"><span>查询内存</span></a></h3><div class="language-sql" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span>data_length<span class="token operator">/</span><span class="token number">1024</span><span class="token operator">/</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;MB&quot;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>查询数据库test内存</span>
<span class="line"><span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token function">round</span><span class="token punctuation">(</span>data_length<span class="token operator">/</span><span class="token number">1024</span><span class="token operator">/</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;MB&quot;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token string">&quot;test&quot;</span></span>
<span class="line"><span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token function">round</span><span class="token punctuation">(</span>data_length<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;kb&quot;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token string">&quot;test&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 优化表</span></span>
<span class="line"><span class="token keyword">optimize</span> <span class="token keyword">table</span> app_user<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- round(数值，几位小数)函数</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="一条sql的执行顺序" tabindex="-1"><a class="header-anchor" href="#一条sql的执行顺序"><span>一条sql的执行顺序？</span></a></h3><h3 id="集群搭建" tabindex="-1"><a class="header-anchor" href="#集群搭建"><span>集群搭建</span></a></h3><p>集群搭建成功之后，stop slave，reset slave在主节点查询从机还有延迟</p><h4 id="使用docker搭建集群" tabindex="-1"><a class="header-anchor" href="#使用docker搭建集群"><span>使用docker搭建集群</span></a></h4><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> pull mysql:5.7</span>
<span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">1024</span> mysql:5.7</span>
<span class="line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql /bin/bash</span>
<span class="line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p1024</span> <span class="token comment">#可以直接连接容器内的mysql数据库</span></span>
<span class="line">/etc/mysql/ <span class="token comment">#目录下存放的是mysql的配置文件，再给数据库建表之后，生效的配置文件时/etc/mysql/*.cnd来覆盖配置</span></span>
<span class="line">/var/lib/ <span class="token comment">#目录会出现三个带有mysql的目录，数据在/var/lib/mysql中</span></span>
<span class="line"></span></code></pre></div><h4 id="主机配置" tabindex="-1"><a class="header-anchor" href="#主机配置"><span>主机配置</span></a></h4><blockquote><p>主机</p></blockquote><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment">#主机授权slave服务器同步权限</span></span>
<span class="line">grant replication slave on *.* to <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;从机库ip&#39;</span> identified by <span class="token string">&#39;oycm1234&#39;</span><span class="token punctuation">;</span></span>
<span class="line">grant replication slave on *.* to <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;106.15.234.93&#39;</span> identified by <span class="token string">&#39;oycm1234&#39;</span></span>
<span class="line">revoke all on *.* from <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;ip&#39;</span></span>
<span class="line">flush privileges<span class="token punctuation">;</span></span>
<span class="line">show master status<span class="token punctuation">;</span> <span class="token comment">#查询主节点状态</span></span>
<span class="line"></span></code></pre></div><p>主机配置文件/etc/my.cnf</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span></span>
<span class="line"><span class="token comment">#server-id要唯一</span></span>
<span class="line">server-id<span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"><span class="token comment">#开启二级制日志功能</span></span>
<span class="line">log-bin<span class="token operator">=</span>mysql-bin</span>
<span class="line"></span>
<span class="line"><span class="token comment">#可选配置</span></span>
<span class="line"><span class="token comment">#默认是0，表示读写主机。1表示只读从机</span></span>
<span class="line">read-only<span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"><span class="token comment">#表示日志文件有效时间，6000秒</span></span>
<span class="line"><span class="token assign-left variable">binlog_expire_logs_seconds</span><span class="token operator">=</span><span class="token number">6000</span></span>
<span class="line"><span class="token comment">#事务内存大小</span></span>
<span class="line"><span class="token assign-left variable">binlog_cache_size</span><span class="token operator">=</span>1M</span>
<span class="line"><span class="token comment">#控制单个日志文件的大小，默认和最大时1GB</span></span>
<span class="line"><span class="token assign-left variable">max_binlog_size</span><span class="token operator">=</span>200MB</span>
<span class="line"><span class="token comment">#设置不需要复制的库</span></span>
<span class="line">binlog-ingore-db<span class="token operator">=</span>mysql</span>
<span class="line"><span class="token comment">#设置需要复制的库，默认全部数据库记录</span></span>
<span class="line">binlog-do-db<span class="token operator">=</span></span>
<span class="line"><span class="token comment">#binlog格式(mixed,statement,row,默认statement)</span></span>
<span class="line"><span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>statement</span>
<span class="line"><span class="token comment">#二进制日志过期时间，默认值时0，表示不自动清理</span></span>
<span class="line"><span class="token assign-left variable">expire_logs_days</span><span class="token operator">=</span><span class="token number">7</span></span>
<span class="line"><span class="token comment">#跳过复制过程遇到的错误，避免从节点端复制终端，1062指一些主键重复，1032主从数据库数据不一致</span></span>
<span class="line"><span class="token assign-left variable">slave_skip_errors</span><span class="token operator">=</span><span class="token number">1062</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SELECT @@server_id<span class="token punctuation">;</span></span>
<span class="line">show variables like <span class="token string">&#39;server_id&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">select</span> * from information_schema.processlist as p where p.command <span class="token operator">=</span> <span class="token string">&#39;Binlog Dump&#39;</span><span class="token punctuation">;</span><span class="token comment">#查看master的slave</span></span>
<span class="line"></span></code></pre></div><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">server_id</span><span class="token operator">=</span><span class="token number">3307</span></span>
<span class="line">binlog-ignore-db<span class="token operator">=</span>mysql</span>
<span class="line">log-bin<span class="token operator">=</span>mysql-bin</span>
<span class="line"><span class="token assign-left variable">binlog_cache_size</span><span class="token operator">=</span>1M</span>
<span class="line"><span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>mixed</span>
<span class="line"><span class="token assign-left variable">expire_logs_days</span><span class="token operator">=</span><span class="token number">7</span></span>
<span class="line"><span class="token assign-left variable">slave_skip_errors</span><span class="token operator">=</span><span class="token number">1062</span></span>
<span class="line"></span></code></pre></div><p>配置文件不能出错，出错直接不能启动</p><h4 id="从机配置" tabindex="-1"><a class="header-anchor" href="#从机配置"><span>从机配置</span></a></h4><blockquote><p>从机</p></blockquote><p>配置在/etc/my.cnf</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">server_id</span><span class="token operator">=</span><span class="token number">3308</span></span>
<span class="line">binlog-ignore-db<span class="token operator">=</span>mysql</span>
<span class="line">log-bin<span class="token operator">=</span>mysql-s1-bin</span>
<span class="line"><span class="token assign-left variable">binlog_cache_size</span><span class="token operator">=</span>1M</span>
<span class="line"><span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>mixed</span>
<span class="line"><span class="token assign-left variable">expire_logs_days</span><span class="token operator">=</span><span class="token number">7</span></span>
<span class="line"><span class="token assign-left variable">slave_skip_errors</span><span class="token operator">=</span><span class="token number">1062</span></span>
<span class="line"><span class="token assign-left variable">relay_log</span><span class="token operator">=</span>mysql-s1-relay-bin</span>
<span class="line"><span class="token assign-left variable">log_slave_updates</span><span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"><span class="token assign-left variable">read_only</span><span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="docker运行容器" tabindex="-1"><a class="header-anchor" href="#docker运行容器"><span>docker运行容器</span></a></h4><blockquote><p>docker运行主服务器容器</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment">#启动一个主数据库容器</span></span>
<span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3307</span>:3306 <span class="token parameter variable">--name</span> mysql-master <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/mysql-m1/log:/var/log/mysql <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/mysql-m1/data:/var/lib/mysql <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/mysql-m1/conf:/etc/mysql <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">1024</span> <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-d</span> mysql:5.7</span>
<span class="line"><span class="token comment">#进入主数据库容器，连接服务端，执行从机授权复制</span></span>
<span class="line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql-master /bin/bash</span>
<span class="line">grant replication slave on *.* to <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;106.15.234.93&#39;</span> identified by <span class="token string">&#39;oycm1234&#39;</span><span class="token punctuation">;</span></span>
<span class="line">flush privileges<span class="token punctuation">;</span></span>
<span class="line">show master status<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">grant all on *.* to <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span> identified by <span class="token string">&#39;密码&#39;</span> with grant option</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://47.101.155.205/image-20220630190801735.png" alt="image-20220630190801735" tabindex="0" loading="lazy"><figcaption>image-20220630190801735</figcaption></figure><blockquote><p>运行从服务器容器</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment">#启动一个从数据库容器</span></span>
<span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3308</span>:3306 <span class="token parameter variable">--name</span> mysql-s1 <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/mysql-s1:/etc/mysql <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">1024</span> <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-d</span> mysql:5.7</span>
<span class="line"></span>
<span class="line"><span class="token function">docker</span> stop mysql-s1</span>
<span class="line"><span class="token comment">#添加配置文件重启</span></span>
<span class="line"><span class="token function">docker</span> restart mysql-s1</span>
<span class="line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql-s1 /bin/bash</span>
<span class="line"></span>
<span class="line"><span class="token comment">#绑定关系</span></span>
<span class="line">change master to <span class="token assign-left variable">master_host</span><span class="token operator">=</span><span class="token string">&#39;106.15.234.93&#39;</span>,master_user<span class="token operator">=</span><span class="token string">&#39;root&#39;</span>,master_password<span class="token operator">=</span><span class="token string">&#39;oycm1234&#39;</span>,master_port<span class="token operator">=</span><span class="token number">3307</span>,master_log_file<span class="token operator">=</span><span class="token string">&#39;mysql-bin.000004&#39;</span>,master_log_pos<span class="token operator">=</span><span class="token number">2180</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">#master_password填写授权时填写的密码</span></span>
<span class="line"></span>
<span class="line">start slave<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">show slave status <span class="token punctuation">\</span>G<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://47.101.155.205/image-20220630195236993.png" alt="image-20220630195236993" tabindex="0" loading="lazy"><figcaption>image-20220630195236993</figcaption></figure><blockquote><p>搭建第二个从机z</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">3309</span>:3306 <span class="token parameter variable">--name</span> mysql-s2 <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/mysql-s2:/etc/mysql <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">1024</span> <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-d</span> mysql:5.7</span>
<span class="line"></span>
<span class="line"><span class="token function">docker</span> stop mysql-s2</span>
<span class="line"></span>
<span class="line"><span class="token function">vim</span> /root/mysql-s2/my.cnf</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span></span>
<span class="line"><span class="token assign-left variable">server_id</span><span class="token operator">=</span><span class="token number">3309</span></span>
<span class="line">binlog-ignore-db<span class="token operator">=</span>mysql</span>
<span class="line">log-bin<span class="token operator">=</span>mysql-s1-bin</span>
<span class="line"><span class="token assign-left variable">binlog_cache_size</span><span class="token operator">=</span>1M</span>
<span class="line"><span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>mixed</span>
<span class="line"><span class="token assign-left variable">expire_logs_days</span><span class="token operator">=</span><span class="token number">7</span></span>
<span class="line"><span class="token assign-left variable">slave_skip_errors</span><span class="token operator">=</span><span class="token number">1062</span></span>
<span class="line"><span class="token assign-left variable">relay_log</span><span class="token operator">=</span>mysql-s1-relay-bin</span>
<span class="line"><span class="token assign-left variable">log_slave_updates</span><span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"><span class="token assign-left variable">read_only</span><span class="token operator">=</span><span class="token number">1</span></span>
<span class="line"></span>
<span class="line"><span class="token function">docker</span> restart mysql-s2</span>
<span class="line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql-s2 /bin/bash</span>
<span class="line"></span>
<span class="line">mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p1024</span></span>
<span class="line">change master to <span class="token assign-left variable">master_host</span><span class="token operator">=</span><span class="token string">&#39;106.15.234.93&#39;</span>,master_user<span class="token operator">=</span><span class="token string">&#39;root&#39;</span>,master_password<span class="token operator">=</span><span class="token string">&#39;oycm1234&#39;</span>,master_port<span class="token operator">=</span><span class="token number">3307</span>,master_log_file<span class="token operator">=</span><span class="token string">&#39;mysql-bin.000003 &#39;</span>,master_log_pos<span class="token operator">=</span><span class="token number">805</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">start slave<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因为数据库是在连接一个从节点后创建的所以有一个数据库会有这个库的记录，另外一个数据库从节点只配置不复制数据库，在和主数据库建立连接之后没有把之前的数据库拷贝过来，所以导致数据缺失。才会出现连接问题。当主库删除从库没有的数据时，会导致，连接出现问题，无法实现数据同步，连接断开。</p><h3 id="sql优化" tabindex="-1"><a class="header-anchor" href="#sql优化"><span>sql优化</span></a></h3><p>开启慢查询日志的两种方式</p><p><strong>配置文件</strong></p><div class="language-conf" data-highlighter="prismjs" data-ext="conf" data-title="conf"><pre><code><span class="line"># 日志文件路劲</span>
<span class="line">log-slow-queries=/路劲</span>
<span class="line"># 超时时间，默认10</span>
<span class="line">long_query_time=2</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><strong>命令</strong></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token builtin class-name">set</span> global slow_query_log <span class="token operator">=</span> on<span class="token punctuation">;</span></span>
<span class="line"><span class="token builtin class-name">set</span> global long_query_time <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token builtin class-name">set</span> global slow_query_log_file <span class="token operator">=</span> <span class="token string">&#39;路径&#39;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>使用mysqldumpslow命令解析慢查询日志</p><h2 id="information-schema-tables" tabindex="-1"><a class="header-anchor" href="#information-schema-tables"><span>information_schema.tables</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TEMPORARY</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>TABLES<span class="token punctuation">`</span></span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>TABLE_CATALOG<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>TABLE_SCHEMA<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>TABLE_NAME<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>TABLE_TYPE<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>ENGINE<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>VERSION<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>ROW_FORMAT<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>TABLE_ROWS<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>AVG_ROW_LENGTH<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>DATA_LENGTH<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>MAX_DATA_LENGTH<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>INDEX_LENGTH<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>DATA_FREE<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>AUTO_INCREMENT<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>CREATE_TIME<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>UPDATE_TIME<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>CHECK_TIME<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>TABLE_COLLATION<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>CHECKSUM<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>CREATE_OPTIONS<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>TABLE_COMMENT<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;&#39;</span></span>
<span class="line"><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span>MEMORY <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8</span>
<span class="line"></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>sysaa_file<span class="token punctuation">`</span></span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>sysaa_pk<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>sysaa001<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>sysaa002<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>sysaa003<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token identifier"><span class="token punctuation">`</span>sysaa004<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>sysaa_pk<span class="token punctuation">`</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="http://github.com/FirstBloodForJava/vuepress-blog/edit/main/docs/database/Mysql.md" aria-label="在 GitHub 上编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->在 GitHub 上编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1164864987@qq.com">oycm</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: mingorg@163.com">ouyangcm</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/vuepress-blog/assets/app-DO9Fsueg.js" defer></script>
  </body>
</html>
