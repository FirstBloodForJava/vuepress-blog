<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><title>Scala | VuePress</title><meta name="description" content="基于MarkDown文档使用VuePress搭建的博客">
    <link rel="preload" href="/vuepress-blog/assets/style-CpYaHraZ.css" as="style"><link rel="stylesheet" href="/vuepress-blog/assets/style-CpYaHraZ.css">
    <link rel="modulepreload" href="/vuepress-blog/assets/app-BIGZvh4f.js"><link rel="modulepreload" href="/vuepress-blog/assets/Scala.html-BKdyopUj.js">
    <link rel="prefetch" href="/vuepress-blog/assets/index.html-D4m84eZG.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ErrorFile文件分析.html-DtPPg4f6.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JVM.html-xpwRrYJm.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JVM调优理论.html-R6Icu2Yo.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Java多线程理论.html-CNmm_RCh.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/垃圾收集器和内存分配策略.html-DG0aoQGg.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/虚拟机性能监控工具.html-Ba51msip.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/EnumSet集合.html-C-Yo6vLG.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/IO.html-TnA5q-2z.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JUC.html-BvvhxQR2.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JavaSE.html-C_SrYoyO.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JavaWeb.html-CorQ_hvS.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Java多线程使用.html-Bgkcs6bJ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Java注解.html-wS4heilI.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Java进阶.html-ZoewIylX.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Netty.html-CW6gvJi3.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Reactor.html-CzjEUGzk.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/javaUtil.html-CHKNgTCz.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/networkModel.html-DG2c09pe.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/recursion.html-BsfK7KJ3.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/divideAndConquer.html-LViisBnw.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/dp.html-BXF8a3Dm.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/algorithm.html-Cw5QfyqL.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/data-structure.html-C80WvTja.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/math.html-LxL70pyz.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Docker.html-BpvEbC-T.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/gradle.html-CAQ9x-vL.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/gradle管理Java项目.html-DamWgccU.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/maven.html-CfyKtPDZ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/maven项目切换gradle步骤.html-DsIQ6hFI.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/DruidPoolProblem.html-4Tsk67Uo.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/InfluxDB.html-CXrGIjVY.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/MongoDB.html-BqFartrm.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Mysql.html-CRgerypE.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Oracle-SQLErr.html-CeAOmq0Z.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Oracle.html-lF4hP9Kk.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ShardingSphere.html-CMTWpPjQ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Transactional.html-COVODrDC.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/seata.html-Du3LTjzb.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JavaScript.html-OKNHcyn1.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/VSCode.html-NUrKwCwt.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/css.html-qCw17Qu5.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/html.html-C9FL80cP.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/nodejs.html-DHyyn_N9.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/vue.html-CETM6P0K.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Linux.html-BgTuIrT4.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Linux进阶.html-B0I1PaiA.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Redis.html-BZrpHpct.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/TCP.html-Bcouziou.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/problem.html-B9b4elh1.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/shell语法.html-BPxht2Gk.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ELK.html-DY_R7M5-.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Elasticsearch.html-CtVAIgLc.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Logstash-8.15.html-BjD0FxU4.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/prometheus.html-CWR35qc3.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ActiveMQ.html-I8YPBsWv.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/RabbitMQ.html-DR8ipnun.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/kafka.html-Bs8iR7F1.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/nginx.html-DecO0DaM.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/nginx配置代理400.html-ByZTU-yx.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/nginx配置代理https请求步骤.html-DKHRZWN8.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Hadoop.html-MhzteBWs.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Scala-Collection.html-B1UsYe_4.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spark.html-CqsO7U6T.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/DesignMode.html-D-e8Jtzy.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpecialInterfaceFunction.html-DEhsvwwZ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Spring注解介绍.html-DmDUYONL.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/logFramework.html-DfdLcpzi.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/util.html-kJA-6haH.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Micrometer.html-DTi65kOP.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpringBoot-2.2.7.RELEASE.html-DfLyzdvT.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-kafka.html-DYQgaOUn.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/starter-actuator.html-BWA9VZ8G.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/starter-embedded.html-DtfhWCI8.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/starter-web.html-CezIzjMG.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/AlibabaSentinel.html-a449dTg0.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Dubbo.html-d2PzlPLQ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpringCloud.html-BLWGlK1E.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ZooKeeper.html-Bwt2jSpZ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/nacos.html-BUwS5yPv.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-sleuth.html-Cg_1ye9r.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/DDD.html-f9waKzIw.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/JMeter.html-R36TbFWS.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/WebService.html-CdQ9yQrX.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/XXL-Job.html-C6OyUbr0.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/cron.html-8S7XAjoD.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/git.html-Iz4ma8iD.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/gitlab.html-D3DU-VnA.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/interview.html-qWyhQrrh.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/uml.html-DzMTw3Ck.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/yaml.html-DPcoPFxY.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/vuepress使用介绍.html-D1-15YXV.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/DateBufferAndCodecs.html-WHhR5FWB.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-core-AOP.html-DEVJbTyV.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-core-SpEL.html-CZQS5Qas.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-core-ioc.html-7HP3lKuU.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/Dao.html-Uvr19uw0.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpringDataJPA.html-DsIbMVqT.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/transactionManagement.html-BhrMq0mO.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpringWebFlux.html-1SspC1kl.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/WebClient.html-Bd6TdmCi.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/SpringMVC.html-Bk3GxmgZ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/WebSocket.html-Cc9tNp1U.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-cloud-gateway-core.html-Csxz-fNz.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-cloud-gateway.html-BkQWF5pW.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/spring-cloud-starter-netflix-zuul.html-r6EEs-d-.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/404.html-BeuyeZRv.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index-DuqNHZ2Z.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/setupDevtools-7MC2TMWH-BEauj7aL.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/vuepress-blog/"><!----><span class="vp-site-name" aria-hidden="true">VuePress</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法策略"><span class="title">算法策略</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法策略"><span class="title">算法策略</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/recursion.html" aria-label="递归"><!---->递归<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/divideAndConquer.html" aria-label="分治"><!---->分治<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/dp.html" aria-label="动态规划"><!---->动态规划<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/data-structure.html" aria-label="数据结构"><!---->数据结构<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/algorithm.html" aria-label="算法"><!---->算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/math.html" aria-label="数学"><!---->数学<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="vue"><span class="title">vue</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="vue"><span class="title">vue</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>vuepress</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/vuepress/vuepress%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D.html" aria-label="vuepress使用介绍"><!---->vuepress使用介绍<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/html.html" aria-label="html"><!---->html<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/css.html" aria-label="css"><!---->css<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/JavaScript.html" aria-label="JavaScript"><!---->JavaScript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/VSCode.html" aria-label="VSCode"><!---->VSCode<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/vue.html" aria-label="vue"><!---->vue<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="nginx"><span class="title">nginx</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="nginx"><span class="title">nginx</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx.html" aria-label="nginx"><!---->nginx<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86https%E8%AF%B7%E6%B1%82%E6%AD%A5%E9%AA%A4.html" aria-label="nginx配置代理https请求步骤"><!---->nginx配置代理https请求步骤<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86400.html" aria-label="nginx配置代理400"><!---->nginx配置代理400<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="监控"><span class="title">监控</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="监控"><span class="title">监控</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/Elasticsearch.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/ELK.html" aria-label="ELK"><!---->ELK<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/Logstash-8.15.html" aria-label="Logstash"><!---->Logstash<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/prometheus.html" aria-label="prometheus"><!---->prometheus<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaEE"><span class="title">JavaEE</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaEE"><span class="title">JavaEE</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JavaSE.html" aria-label="JavaSE"><!---->JavaSE<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E8%BF%9B%E9%98%B6.html" aria-label="进阶"><!---->进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JavaWeb.html" aria-label="JavaWeb"><!---->JavaWeb<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BD%BF%E7%94%A8.html" aria-label="Java多线程使用"><!---->Java多线程使用<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JUC.html" aria-label="JUC"><!---->JUC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/EnumSet%E9%9B%86%E5%90%88.html" aria-label="EnumSet集合"><!---->EnumSet集合<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E6%B3%A8%E8%A7%A3.html" aria-label="Java注解"><!---->Java注解<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/javaUtil.html" aria-label="javaUtil"><!---->javaUtil<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/networkModel.html" aria-label="网络模型"><!---->网络模型<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/IO.html" aria-label="JavaIO"><!---->JavaIO<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Netty.html" aria-label="Netty"><!---->Netty<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Reactor.html" aria-label="Reactor"><!---->Reactor<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="构建工具"><span class="title">构建工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="构建工具"><span class="title">构建工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/maven.html" aria-label="maven"><!---->maven<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/Docker.html" aria-label="Docker"><!---->Docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/gradle.html" aria-label="gradle"><!---->gradle<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/gradle%E7%AE%A1%E7%90%86Java%E9%A1%B9%E7%9B%AE.html" aria-label="gradle管理Java项目"><!---->gradle管理Java项目<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/maven%E9%A1%B9%E7%9B%AE%E5%88%87%E6%8D%A2gradle%E6%AD%A5%E9%AA%A4.html" aria-label="maven项目切换gradle步骤"><!---->maven项目切换gradle步骤<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JVM"><span class="title">JVM</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JVM"><span class="title">JVM</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/JVM.html" aria-label="JVM"><!---->JVM<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E5%92%8C%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5.html" aria-label="垃圾收集器和内存分配策略"><!---->垃圾收集器和内存分配策略<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7.html" aria-label="虚拟机性能监控工具"><!---->虚拟机性能监控工具<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/JVM%E8%B0%83%E4%BC%98%E7%90%86%E8%AE%BA.html" aria-label="JVM调优理论"><!---->JVM调优理论<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%90%86%E8%AE%BA.html" aria-label="Java多线程理论"><!---->Java多线程理论<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/ErrorFile%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90.html" aria-label="ErrorFile文件分析"><!---->ErrorFile文件分析<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="linux"><span class="title">linux</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="linux"><span class="title">linux</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Linux.html" aria-label="Linux"><!---->Linux<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/shell%E8%AF%AD%E6%B3%95.html" aria-label="shell语法"><!---->shell语法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/TCP.html" aria-label="tcp"><!---->tcp<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Redis.html" aria-label="Redis"><!---->Redis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Linux%E8%BF%9B%E9%98%B6.html" aria-label="Linux进阶"><!---->Linux进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/problem.html" aria-label="问题收集"><!---->问题收集<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="消息队列"><span class="title">消息队列</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="消息队列"><span class="title">消息队列</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/RabbitMQ.html" aria-label="RabbitMQ"><!---->RabbitMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/ActiveMQ.html" aria-label="ActiveMQ"><!---->ActiveMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/kafka.html" aria-label="Kafka"><!---->Kafka<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="spring"><span class="title">spring</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="spring"><span class="title">spring</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/Spring%E6%B3%A8%E8%A7%A3%E4%BB%8B%E7%BB%8D.html" aria-label="Spring注解介绍"><!---->Spring注解介绍<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>spring核心-5.2.6.RELEASE</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-ioc.html" aria-label="IOC容器相关"><!---->IOC容器相关<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-SpEL.html" aria-label="SpEL表达式"><!---->SpEL表达式<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-AOP.html" aria-label="Spring AOP代理"><!---->Spring AOP代理<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/DateBufferAndCodecs.html" aria-label="数据缓冲区和编解码器"><!---->数据缓冲区和编解码器<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>数据访问</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/transactionManagement.html" aria-label="事物管理"><!---->事物管理<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/Dao.html" aria-label="数据访问对象"><!---->数据访问对象<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/SpringDataJPA.html" aria-label="SpringDataJPA"><!---->SpringDataJPA<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Servlet请求</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webServlet/SpringMVC.html" aria-label="SpringMVC"><!---->SpringMVC<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webServlet/WebSocket.html" aria-label="WebSocket"><!---->WebSocket<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>响应式处理</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webReactive/SpringWebFlux.html" aria-label="SpringWebFlux"><!---->SpringWebFlux<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webReactive/WebClient.html" aria-label="响应式客户端"><!---->响应式客户端<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/Spring%E6%B3%A8%E8%A7%A3%E4%BB%8B%E7%BB%8D.html" aria-label="Spring注解介绍"><!---->Spring注解介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/logFramework.html" aria-label="日志框架"><!---->日志框架<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/SpecialInterfaceFunction.html" aria-label="Spring特殊接口"><!---->Spring特殊接口<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/DesignMode.html" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/util.html" aria-label="工具类"><!---->工具类<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="springboot"><span class="title">springboot</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="springboot"><span class="title">springboot</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/SpringBoot-2.2.7.RELEASE.html" aria-label="SpringBoot-2.2.7.RELEASE介绍"><!---->SpringBoot-2.2.7.RELEASE介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-embedded.html" aria-label="嵌入式容器starter"><!---->嵌入式容器starter<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-web.html" aria-label="starter-web"><!---->starter-web<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/spring-kafka.html" aria-label="springboot使用Kafka"><!---->springboot使用Kafka<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/Micrometer.html" aria-label="Micrometer"><!---->Micrometer<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-actuator.html" aria-label="starter-actuator"><!---->starter-actuator<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="springcloud"><span class="title">springcloud</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="springcloud"><span class="title">springcloud</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/SpringCloud.html" aria-label="SpringCloud"><!---->SpringCloud<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/spring-sleuth.html" aria-label="spring-sleuth"><!---->spring-sleuth<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/AlibabaSentinel.html" aria-label="Sentinel"><!---->Sentinel<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/nacos.html" aria-label="Nacos"><!---->Nacos<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/ZooKeeper.html" aria-label="ZooKeeper"><!---->ZooKeeper<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/Dubbo.html" aria-label="Dubbo"><!---->Dubbo<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>网关</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-gateway.html" aria-label="spring-cloud-gateway使用介绍"><!---->spring-cloud-gateway使用介绍<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-gateway-core.html" aria-label="gateway核心"><!---->gateway核心<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-starter-netflix-zuul.html" aria-label="zuul-1.x"><!---->zuul-1.x<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="database"><span class="title">database</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="database"><span class="title">database</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Mysql.html" aria-label="MySQL"><!---->MySQL<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Oracle.html" aria-label="Oracle"><!---->Oracle<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/MongoDB.html" aria-label="MongoDB"><!---->MongoDB<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/InfluxDB.html" aria-label="InfluxDB"><!---->InfluxDB<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Oracle-SQLErr.html" aria-label="Oracle执行错误代码"><!---->Oracle执行错误代码<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/ShardingSphere.html" aria-label="ShardingSphere"><!---->ShardingSphere<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Transactional.html" aria-label="Spring事物控制"><!---->Spring事物控制<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/DruidPoolProblem.html" aria-label="DruidPoolProblem"><!---->DruidPoolProblem<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/seata.html" aria-label="seata"><!---->seata<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="其它"><span class="title">其它</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="其它"><span class="title">其它</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/cron.html" aria-label="cron表达式"><!---->cron表达式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/uml.html" aria-label="UML介绍"><!---->UML介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/JMeter.html" aria-label="JMeter"><!---->JMeter<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/XXL-Job.html" aria-label="XXL-Job"><!---->XXL-Job<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/DDD.html" aria-label="领域驱动设计"><!---->领域驱动设计<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/git.html" aria-label="git"><!---->git<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/WebService.html" aria-label="WebService"><!---->WebService<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/interview.html" aria-label="interview"><!---->interview<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="spark"><span class="title">spark</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="spark"><span class="title">spark</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spark/spark.html" aria-label="spark"><!---->spark<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/vuepress-blog/spark/Scala.html" aria-label="Scala2/3"><!---->Scala2/3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spark/Scala-Collection.html" aria-label="Scala-集合"><!---->Scala-集合<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法策略"><span class="title">算法策略</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法策略"><span class="title">算法策略</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/recursion.html" aria-label="递归"><!---->递归<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/divideAndConquer.html" aria-label="分治"><!---->分治<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/dp.html" aria-label="动态规划"><!---->动态规划<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/data-structure.html" aria-label="数据结构"><!---->数据结构<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/algorithm.html" aria-label="算法"><!---->算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/algorithmStrategy/math.html" aria-label="数学"><!---->数学<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="vue"><span class="title">vue</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="vue"><span class="title">vue</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>vuepress</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/vuepress/vuepress%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D.html" aria-label="vuepress使用介绍"><!---->vuepress使用介绍<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/html.html" aria-label="html"><!---->html<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/css.html" aria-label="css"><!---->css<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/JavaScript.html" aria-label="JavaScript"><!---->JavaScript<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/VSCode.html" aria-label="VSCode"><!---->VSCode<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/frontEnd/vue.html" aria-label="vue"><!---->vue<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="nginx"><span class="title">nginx</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="nginx"><span class="title">nginx</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx.html" aria-label="nginx"><!---->nginx<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86https%E8%AF%B7%E6%B1%82%E6%AD%A5%E9%AA%A4.html" aria-label="nginx配置代理https请求步骤"><!---->nginx配置代理https请求步骤<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/nginx/nginx%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86400.html" aria-label="nginx配置代理400"><!---->nginx配置代理400<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="监控"><span class="title">监控</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="监控"><span class="title">监控</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/Elasticsearch.html" aria-label="Elasticsearch"><!---->Elasticsearch<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/ELK.html" aria-label="ELK"><!---->ELK<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/Logstash-8.15.html" aria-label="Logstash"><!---->Logstash<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/monitoring/prometheus.html" aria-label="prometheus"><!---->prometheus<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaEE"><span class="title">JavaEE</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaEE"><span class="title">JavaEE</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JavaSE.html" aria-label="JavaSE"><!---->JavaSE<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E8%BF%9B%E9%98%B6.html" aria-label="进阶"><!---->进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JavaWeb.html" aria-label="JavaWeb"><!---->JavaWeb<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BD%BF%E7%94%A8.html" aria-label="Java多线程使用"><!---->Java多线程使用<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/JUC.html" aria-label="JUC"><!---->JUC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/EnumSet%E9%9B%86%E5%90%88.html" aria-label="EnumSet集合"><!---->EnumSet集合<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Java%E6%B3%A8%E8%A7%A3.html" aria-label="Java注解"><!---->Java注解<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/javaUtil.html" aria-label="javaUtil"><!---->javaUtil<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/networkModel.html" aria-label="网络模型"><!---->网络模型<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/IO.html" aria-label="JavaIO"><!---->JavaIO<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Netty.html" aria-label="Netty"><!---->Netty<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JavaEE/Reactor.html" aria-label="Reactor"><!---->Reactor<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="构建工具"><span class="title">构建工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="构建工具"><span class="title">构建工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/maven.html" aria-label="maven"><!---->maven<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/Docker.html" aria-label="Docker"><!---->Docker<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/gradle.html" aria-label="gradle"><!---->gradle<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/gradle%E7%AE%A1%E7%90%86Java%E9%A1%B9%E7%9B%AE.html" aria-label="gradle管理Java项目"><!---->gradle管理Java项目<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/build/maven%E9%A1%B9%E7%9B%AE%E5%88%87%E6%8D%A2gradle%E6%AD%A5%E9%AA%A4.html" aria-label="maven项目切换gradle步骤"><!---->maven项目切换gradle步骤<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JVM"><span class="title">JVM</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JVM"><span class="title">JVM</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/JVM.html" aria-label="JVM"><!---->JVM<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E5%92%8C%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5.html" aria-label="垃圾收集器和内存分配策略"><!---->垃圾收集器和内存分配策略<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7.html" aria-label="虚拟机性能监控工具"><!---->虚拟机性能监控工具<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/JVM%E8%B0%83%E4%BC%98%E7%90%86%E8%AE%BA.html" aria-label="JVM调优理论"><!---->JVM调优理论<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%90%86%E8%AE%BA.html" aria-label="Java多线程理论"><!---->Java多线程理论<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/JVM/ErrorFile%E6%96%87%E4%BB%B6%E5%88%86%E6%9E%90.html" aria-label="ErrorFile文件分析"><!---->ErrorFile文件分析<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="linux"><span class="title">linux</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="linux"><span class="title">linux</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Linux.html" aria-label="Linux"><!---->Linux<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/shell%E8%AF%AD%E6%B3%95.html" aria-label="shell语法"><!---->shell语法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/TCP.html" aria-label="tcp"><!---->tcp<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Redis.html" aria-label="Redis"><!---->Redis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/Linux%E8%BF%9B%E9%98%B6.html" aria-label="Linux进阶"><!---->Linux进阶<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/linux/problem.html" aria-label="问题收集"><!---->问题收集<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="消息队列"><span class="title">消息队列</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="消息队列"><span class="title">消息队列</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/RabbitMQ.html" aria-label="RabbitMQ"><!---->RabbitMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/ActiveMQ.html" aria-label="ActiveMQ"><!---->ActiveMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/mq/kafka.html" aria-label="Kafka"><!---->Kafka<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="spring"><span class="title">spring</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="spring"><span class="title">spring</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/Spring%E6%B3%A8%E8%A7%A3%E4%BB%8B%E7%BB%8D.html" aria-label="Spring注解介绍"><!---->Spring注解介绍<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>spring核心-5.2.6.RELEASE</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-ioc.html" aria-label="IOC容器相关"><!---->IOC容器相关<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-SpEL.html" aria-label="SpEL表达式"><!---->SpEL表达式<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/spring-core-AOP.html" aria-label="Spring AOP代理"><!---->Spring AOP代理<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/core/DateBufferAndCodecs.html" aria-label="数据缓冲区和编解码器"><!---->数据缓冲区和编解码器<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>数据访问</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/transactionManagement.html" aria-label="事物管理"><!---->事物管理<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/Dao.html" aria-label="数据访问对象"><!---->数据访问对象<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/dataAccess/SpringDataJPA.html" aria-label="SpringDataJPA"><!---->SpringDataJPA<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Servlet请求</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webServlet/SpringMVC.html" aria-label="SpringMVC"><!---->SpringMVC<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webServlet/WebSocket.html" aria-label="WebSocket"><!---->WebSocket<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>响应式处理</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webReactive/SpringWebFlux.html" aria-label="SpringWebFlux"><!---->SpringWebFlux<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/spring/webReactive/WebClient.html" aria-label="响应式客户端"><!---->响应式客户端<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/Spring%E6%B3%A8%E8%A7%A3%E4%BB%8B%E7%BB%8D.html" aria-label="Spring注解介绍"><!---->Spring注解介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/logFramework.html" aria-label="日志框架"><!---->日志框架<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/SpecialInterfaceFunction.html" aria-label="Spring特殊接口"><!---->Spring特殊接口<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/DesignMode.html" aria-label="设计模式"><!---->设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spring/util.html" aria-label="工具类"><!---->工具类<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="springboot"><span class="title">springboot</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="springboot"><span class="title">springboot</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/SpringBoot-2.2.7.RELEASE.html" aria-label="SpringBoot-2.2.7.RELEASE介绍"><!---->SpringBoot-2.2.7.RELEASE介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-embedded.html" aria-label="嵌入式容器starter"><!---->嵌入式容器starter<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-web.html" aria-label="starter-web"><!---->starter-web<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/spring-kafka.html" aria-label="springboot使用Kafka"><!---->springboot使用Kafka<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/Micrometer.html" aria-label="Micrometer"><!---->Micrometer<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springboot/starter-actuator.html" aria-label="starter-actuator"><!---->starter-actuator<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="springcloud"><span class="title">springcloud</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="springcloud"><span class="title">springcloud</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/SpringCloud.html" aria-label="SpringCloud"><!---->SpringCloud<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/spring-sleuth.html" aria-label="spring-sleuth"><!---->spring-sleuth<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/AlibabaSentinel.html" aria-label="Sentinel"><!---->Sentinel<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/nacos.html" aria-label="Nacos"><!---->Nacos<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/ZooKeeper.html" aria-label="ZooKeeper"><!---->ZooKeeper<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/springcloud/Dubbo.html" aria-label="Dubbo"><!---->Dubbo<!----></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>网关</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-gateway.html" aria-label="spring-cloud-gateway使用介绍"><!---->spring-cloud-gateway使用介绍<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-gateway-core.html" aria-label="gateway核心"><!---->gateway核心<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/vuepress-blog/springcloud/gateway/spring-cloud-starter-netflix-zuul.html" aria-label="zuul-1.x"><!---->zuul-1.x<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="database"><span class="title">database</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="database"><span class="title">database</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Mysql.html" aria-label="MySQL"><!---->MySQL<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Oracle.html" aria-label="Oracle"><!---->Oracle<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/MongoDB.html" aria-label="MongoDB"><!---->MongoDB<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/InfluxDB.html" aria-label="InfluxDB"><!---->InfluxDB<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Oracle-SQLErr.html" aria-label="Oracle执行错误代码"><!---->Oracle执行错误代码<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/ShardingSphere.html" aria-label="ShardingSphere"><!---->ShardingSphere<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/Transactional.html" aria-label="Spring事物控制"><!---->Spring事物控制<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/DruidPoolProblem.html" aria-label="DruidPoolProblem"><!---->DruidPoolProblem<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/database/seata.html" aria-label="seata"><!---->seata<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="其它"><span class="title">其它</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="其它"><span class="title">其它</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/cron.html" aria-label="cron表达式"><!---->cron表达式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/uml.html" aria-label="UML介绍"><!---->UML介绍<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/JMeter.html" aria-label="JMeter"><!---->JMeter<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/XXL-Job.html" aria-label="XXL-Job"><!---->XXL-Job<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/DDD.html" aria-label="领域驱动设计"><!---->领域驱动设计<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/git.html" aria-label="git"><!---->git<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/WebService.html" aria-label="WebService"><!---->WebService<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/tools/interview.html" aria-label="interview"><!---->interview<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="spark"><span class="title">spark</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="spark"><span class="title">spark</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spark/spark.html" aria-label="spark"><!---->spark<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/vuepress-blog/spark/Scala.html" aria-label="Scala2/3"><!---->Scala2/3<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/spark/Scala-Collection.html" aria-label="Scala-集合"><!---->Scala-集合<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Scala <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="scala" tabindex="-1"><a class="header-anchor" href="#scala"><span>Scala</span></a></h1><p><a href="https://scala-lang.org/" target="_blank" rel="noopener noreferrer">Scala 官网</a></p><p><a href="https://www.runoob.com/scala/scala-tutorial.html" target="_blank" rel="noopener noreferrer">菜鸟教程</a></p><p><a href="https://scastie.scala-lang.org/" target="_blank" rel="noopener noreferrer">Scala 在线代码编写</a></p><p><a href="https://www.scala-lang.org/api/current/index.html" target="_blank" rel="noopener noreferrer">Scala API 文档</a></p><p>Scala(Scalable Language) 是一种多范式编程语言。运行在 JVM 上：可以调用 Java 库，也可以被 Java 调用。</p><p>两大范式特点：</p><ul><li>面向对象(OOP Object-Oriented Programming)：一切皆对象，和 Java 类似。</li><li>函数式(FP Functional Programming)：支持高阶函数，不可变数据结构、模式匹配等。</li></ul><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p><a href="https://www.scala-lang.org/download/" target="_blank" rel="noopener noreferrer">Scala 官网安装介绍地址</a></p><p><a href="https://github.com/coursier/coursier/releases/latest/download/cs-x86_64-pc-win32.zip" target="_blank" rel="noopener noreferrer">Coursier exe 安装下载地址</a></p><figure><img src="http://47.101.155.205/image-20250927210244664.png" alt="image-20250927210244664" tabindex="0" loading="lazy"><figcaption>image-20250927210244664</figcaption></figure><p><a href="https://github.com/scala/scala/" target="_blank" rel="noopener noreferrer">scala2 github 地址</a></p><figure><img src="http://47.101.155.205/image-20250927153815943.png" alt="image-20250927153815943" tabindex="0" loading="lazy"><figcaption>image-20250927153815943</figcaption></figure><p><a href="https://github.com/scala/scala3" target="_blank" rel="noopener noreferrer">scala3 github 地址</a></p><p><a href="https://github.com/VirtusLab/scala-cli/" target="_blank" rel="noopener noreferrer">scala-cli github 地址</a></p><p><strong>Coursier 安装方式</strong></p><ol><li><a href="https://github.com/coursier/coursier/releases/latest/download/cs-x86_64-pc-win32.zip" target="_blank" rel="noopener noreferrer">Coursier 之间下载地址</a>；<a href="https://github.com/coursier/coursier" target="_blank" rel="noopener noreferrer">Coursier Github 地址</a>；</li><li>下载解压后，双击 exe，根据命令行窗口提示配置环境变量：JAVA(<code>%JAVA_HOME%\bin</code>)、Coursier(<code>%USERPROFILE%\AppData\Local\Coursier\data\bin</code>)；</li></ol><figure><img src="http://47.101.155.205/image-20250928093557111.png" alt="image-20250928093557111" tabindex="0" loading="lazy"><figcaption>image-20250928093557111</figcaption></figure><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 安装 scala 开发环境</span></span>
<span class="line">cs setup</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 切换 全局 scala/scalac 版本为 2.12.20</span></span>
<span class="line">cs <span class="token function">install</span> scala:2.12.20 <span class="token operator">&amp;&amp;</span> cs <span class="token function">install</span> scalac:2.12.20</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 切换 3.7.3</span></span>
<span class="line">cs <span class="token function">install</span> scala:3.7.3 <span class="token operator">&amp;&amp;</span> cs <span class="token function">install</span> scalac:3.7.3</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 临时切换 scala 版本</span></span>
<span class="line">cs launch scala:2.12.20</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://47.101.155.205/image-20250928095606292.png" alt="image-20250928095606292" tabindex="0" loading="lazy"><figcaption>image-20250928095606292</figcaption></figure><p><strong>解压缩安装方式：scala github 地址下载压缩包，配置环境变量(SCALA_HOME)。</strong></p><p><strong>HelloWorld</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-85-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-85-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-85-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><p>hello.scala 编写以下代码</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">object</span> hello <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">	println<span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">scalac hello.scala</span>
<span class="line">scala hello</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p></p><!--]--></div><div class="vp-tab" id="tab-85-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><p><strong>scala jdk 版本有要求，3.7.3 要求 jdk 17</strong></p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token annotation punctuation">@main</span></span>
<span class="line"><span class="token keyword">def</span> hello<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> </span>
<span class="line"> println<span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><strong>不支持编译后再运行模式，支持 scala run 编译+运行模式，但是需要下载依赖。</strong></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">scala run hello.scala</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><figure><img src="http://47.101.155.205/image-20250928103324224.png" alt="image-20250928103324224" tabindex="0" loading="lazy"><figcaption>image-20250928103324224</figcaption></figure><!--]--></div><!--]--></div><h2 id="idea" tabindex="-1"><a class="header-anchor" href="#idea"><span>IDEA</span></a></h2><figure><img src="http://47.101.155.205/image-20251022110544492.png" alt="Scala 插件配置" tabindex="0" loading="lazy"><figcaption>Scala 插件配置</figcaption></figure><figure><img src="http://47.101.155.205/image-20251022110326422.png" alt="Scala 编译器配置" tabindex="0" loading="lazy"><figcaption>Scala 编译器配置</figcaption></figure><figure><img src="http://47.101.155.205/image-20251022110821914.png" alt="项目配置 scala" tabindex="0" loading="lazy"><figcaption>项目配置 scala</figcaption></figure><h2 id="repl" tabindex="-1"><a class="header-anchor" href="#repl"><span>REPL</span></a></h2><p>REPL(Read-Evaluate-Print-Loop) 是一个命令行解释器。</p><figure><img src="http://47.101.155.205/image-20250928105254512.png" alt="image-20250928105254512" tabindex="0" loading="lazy"><figcaption>image-20250928105254512</figcaption></figure><h2 id="scala-features" tabindex="-1"><a class="header-anchor" href="#scala-features"><span>Scala Features</span></a></h2><p><strong>高级语言特点：</strong></p><ol><li>高级语言；</li><li>简洁的语法；</li><li>动态类型表现；</li><li>Expressive type system；</li><li>函数式编程语言；</li><li>OOP：所有类型继承超类 <code>Any</code>，<code>Any</code> 的直接子类是 <code>AnyVal</code>(值类型，例如：Int 和 Boolean)和 <code>AnyRef</code>(引用类型)；</li><li>FP 和 OOP 结合：Scala 本质是在类型化设置中融合 FP 和 OOP；</li><li>类型推断；</li><li>客户端和服务端都支持；</li><li>无缝与 Java 结合；</li><li>丰富的库；</li></ol><p><strong>Scala 生态系统：</strong></p><p><a href="https://github.com/lauris/awesome-scala" target="_blank" rel="noopener noreferrer">Scala 开源系统列表</a></p><p><a href="https://index.scala-lang.org/" target="_blank" rel="noopener noreferrer">Scala 库搜索列表</a></p><p>构建工具：</p><ul><li>stb：https://www.scala-sbt.org/</li><li>gradle：</li></ul><h2 id="变量和数据类型" tabindex="-1"><a class="header-anchor" href="#变量和数据类型"><span>变量和数据类型</span></a></h2><p><strong>两种变量类型</strong>：</p><ul><li>val：创建一个不可变的变量，和 Java 的 final 一样。</li><li>var：创建一个可变变量，当且仅当变量随着时间变化才使用。</li></ul><p><strong>变量声明</strong>：显示声明变量类型或隐式声明编译器推断类型。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> x<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 显示声明</span></span>
<span class="line"><span class="token keyword">val</span> x <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 隐式声明</span></span>
<span class="line"><span class="token keyword">val</span> m <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p><strong>内置数据类型</strong>：是类对应的对象，不是原始数据类型。</p><ol><li><code>Boolean</code>：true/false。</li><li><code>Byte</code>：8-bit，-2^7~2^7-1。</li><li><code>Short</code>：16-bit，</li><li><code>Int</code>：32-bit，可以用进制法表示数值 <code>0xACE</code>。</li><li><code>Long</code>：64-bit，隐式声明数值携带后缀 <code>L</code>。</li><li><code>Double</code>：64-bit，隐式声明数值携带后缀 <code>D</code>。</li><li><code>Float</code>：32-bit，隐式声明数值携带后缀 <code>F</code>。</li><li><code>Char</code>：16-bit，<code>val c = &#39;c&#39;</code>。</li><li><code>String</code>：支持字符串插值；创建多行字符串方便。</li></ol><figure><img src="http://47.101.155.205/image-20251010112619373.png" alt="image-20251010112619373" tabindex="0" loading="lazy"><figcaption>image-20251010112619373</figcaption></figure><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 只能在没有精度丢失情况下才可转换</span></span>
<span class="line"><span class="token keyword">val</span> x<span class="token operator">:</span> <span class="token builtin">Long</span> <span class="token operator">=</span> <span class="token number">987654321</span></span>
<span class="line"><span class="token keyword">val</span> y<span class="token operator">:</span> <span class="token builtin">Float</span> <span class="token operator">=</span> x<span class="token punctuation">.</span>toFloat</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>大数值类型：</p><ol><li><code>BigInt</code>：大整数，<code>BigInt(1234567890)</code>。</li><li><code>BigDecimal</code>：<code>BigDecimal(123456.789)</code>。</li></ol><p>Int 和 Double 是默认数字类型，<code>val i = 1</code> 和 <code>val i = 1.0</code> 分别被推断成 <code>Int</code> 和 <code>Double</code> 类型。</p><p><strong>s 插值</strong>：字符串前面添加 <code>s</code> 允许之间在字符串中使用变量。</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span></span>
<span class="line"><span class="token keyword">val</span> age <span class="token operator">=</span> <span class="token number">10</span></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;name </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">, age </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">age</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// $$ 使用两个表示转义</span></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;price </span><span class="token escape symbol">$$</span><span class="token string">10&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ${} 中可以嵌入任意表达式</span></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;2 + 2 = </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression"><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3 个 双引号创建多行文本</span></span>
<span class="line"><span class="token keyword">val</span> multiline <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;多行文本</span>
<span class="line">				   继续&quot;&quot;&quot;</span></span>
<span class="line"><span class="token comment">// 多行文本使用 s 插值</span></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;&quot;&quot;name: &quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">&quot;,</span>
<span class="line">           |age: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">age</span></span><span class="token string">&quot;&quot;&quot;</span></span><span class="token punctuation">.</span>stripMargin<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3 个双引号对 双引号转义</span></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;&quot;&quot;{&quot;name&quot;:&quot;James&quot;}&quot;&quot;&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>f 插值</strong>：字符串前面添加 <code>f</code> 允许简单的格式化字符串，类似 printf(String format, Object ... args) 方法。会进行类型校验。变量后不接类型，默认使用 <code>%s</code>。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> height <span class="token operator">=</span> <span class="token number">1.8d</span></span>
<span class="line"><span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string">&quot;James&quot;</span></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">f</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">%s is </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">height</span></span><span class="token string">%2.2f meters tall&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// %% 表示转义</span></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">f</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">%s is </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">height</span></span><span class="token string">%2.2f meters tall, %%&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><strong>raw 插值</strong>：不对转义字符转义，<code>\n</code> 就是 <code>\n</code> 字符。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string">&quot;cm&quot;</span></span>
<span class="line"><span class="token keyword">val</span> str1 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token id function">raw</span><span class="token string">&quot;hello\n</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">&quot;</span></span></span>
<span class="line">println<span class="token punctuation">(</span>str1<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="type" tabindex="-1"><a class="header-anchor" href="#type"><span>Type</span></a></h3><p>在 Scala 中，所有值都有一个类型，包括数值和函数。如下图类的结构：</p><figure><img src="http://47.101.155.205/image-20250930111020781.png" alt="image-20250930111020781" tabindex="0" loading="lazy"><figcaption>image-20250930111020781</figcaption></figure><p><code>Any</code> 是所有类型的超类，和 Java 的 Object 类一样定义了通用方法，例如：<code>equals</code>，<code>hashCode</code>，<code>toString</code>。</p><p><code>Any</code> 有一个子类型 <code>Matchable</code>，用于匹配模式下的类型匹配。不能直接使用 <code>Any</code> 类型进行模式匹配，只能对 <code>Matchable</code> 的子类型的值进行模式匹配。</p><p><code>Matchable</code> 有两个子类型：<code>AnyVal</code> 和 <code>AnyRef</code>。</p><p><code>AnyVal</code> 表示值类型，几种已经定义的值类型，是不可为 <code>null</code> 的：<code>Double</code>，<code>Float</code>，<code>Long</code>，<code>Int</code>，<code>Short</code>，<code>Byte</code>，<code>Char</code>，<code>Unit</code>，<code>Boolean</code>。<code>Unit</code> 是一个不携带任何信息的值类型。只有一个 <code>Unit</code> 的实例，可以用 <code>()</code> 表示。</p><p><code>Nothing</code> 是所有类型的子类型，被称为底层类型。用于发出非终止信号，例如：抛出异常，程序退出，无限循环。</p><p><code>Null</code> 是所有引用类型的子类型。用 <code>null</code> 关键字表示值，在 Scala 中几乎不使用。</p><h3 id="自定义插值表达式" tabindex="-1"><a class="header-anchor" href="#自定义插值表达式"><span>自定义插值表达式</span></a></h3><p>自定义一个 p-插值表达式，<code>p&quot;1,-2&quot;</code> 转换成 <code>Point</code> 对象。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Point<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> pt <span class="token operator">=</span> <span class="token string-interpolation"><span class="token id function">p</span><span class="token string">&quot;1,-2&quot;</span></span>     <span class="token comment">// Point(1.0,-2.0)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-358-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-358-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-358-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><p>创建隐式类</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 创建模板</span></span>
<span class="line"><span class="token keyword">implicit</span> <span class="token keyword">class</span> PointHelper<span class="token punctuation">(</span><span class="token keyword">val</span> sc<span class="token operator">:</span> StringContext<span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token builtin">AnyVal</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> p<span class="token punctuation">(</span>args<span class="token operator">:</span> <span class="token builtin">Any</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">:</span> Point <span class="token operator">=</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 具体实现逻辑</span></span>
<span class="line"><span class="token keyword">implicit</span> <span class="token keyword">class</span> PointHelper<span class="token punctuation">(</span><span class="token keyword">val</span> sc<span class="token operator">:</span> StringContext<span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token builtin">AnyVal</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> p<span class="token punctuation">(</span>args<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">:</span> Point <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 使用 s-插值表达式解析然后使用 &#39;,&#39; 分割</span></span>
<span class="line">    <span class="token keyword">val</span> pts <span class="token operator">=</span> sc<span class="token punctuation">.</span>s<span class="token punctuation">(</span>args<span class="token operator">:</span> _<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map <span class="token punctuation">{</span> _<span class="token punctuation">.</span>toDoubleOption<span class="token punctuation">.</span>getOrElse<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line">    Point<span class="token punctuation">(</span>pts<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pts<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-358-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><p>使用 <code>extension</code> 方法</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 创建模板</span></span>
<span class="line"><span class="token keyword">extension</span> <span class="token punctuation">(</span>sc<span class="token operator">:</span> StringContext<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> p<span class="token punctuation">(</span>args<span class="token operator">:</span> <span class="token builtin">Any</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">:</span> Point <span class="token operator">=</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 具体实现逻辑</span></span>
<span class="line"><span class="token keyword">extension</span> <span class="token punctuation">(</span>sc<span class="token operator">:</span> StringContext<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> p<span class="token punctuation">(</span>args<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">:</span> Point <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> pts <span class="token operator">=</span> sc<span class="token punctuation">.</span>s<span class="token punctuation">(</span>args<span class="token operator">:</span> _<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map <span class="token punctuation">{</span> _<span class="token punctuation">.</span>toDoubleOption<span class="token punctuation">.</span>getOrElse<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line">    Point<span class="token punctuation">(</span>pts<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pts<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="generic" tabindex="-1"><a class="header-anchor" href="#generic"><span>Generic</span></a></h3><p>泛型 <code>class/trait</code> 将类型作为 <code>[...]</code> 中的参数。Scala 约定使用单个字母命名参数。可以作用在类中的方法参数或返回值上。</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-378-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-378-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-378-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Stack<span class="token punctuation">[</span>A<span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">var</span> elements<span class="token operator">:</span> List<span class="token punctuation">[</span>A<span class="token punctuation">]</span> <span class="token operator">=</span> Nil</span>
<span class="line">  <span class="token keyword">def</span> push<span class="token punctuation">(</span>x<span class="token operator">:</span> A<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">    elements <span class="token operator">=</span> elements<span class="token punctuation">.</span>prepended<span class="token punctuation">(</span>x<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> peek<span class="token operator">:</span> A <span class="token operator">=</span> elements<span class="token punctuation">.</span>head</span>
<span class="line">  <span class="token keyword">def</span> pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> A <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> currentTop <span class="token operator">=</span> peek</span>
<span class="line">    elements <span class="token operator">=</span> elements<span class="token punctuation">.</span>tail</span>
<span class="line">    currentTop</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> stack <span class="token operator">=</span> <span class="token keyword">new</span> Stack<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span></span>
<span class="line">stack<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">println<span class="token punctuation">(</span>stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-378-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Stack<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">var</span> elements<span class="token operator">:</span> List<span class="token punctuation">[</span>A<span class="token punctuation">]</span> <span class="token operator">=</span> Nil</span>
<span class="line">  <span class="token keyword">def</span> push<span class="token punctuation">(</span>x<span class="token operator">:</span> A<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">    elements <span class="token operator">=</span> elements<span class="token punctuation">.</span>prepended<span class="token punctuation">(</span>x<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> peek<span class="token operator">:</span> A <span class="token operator">=</span> elements<span class="token punctuation">.</span>head</span>
<span class="line">  <span class="token keyword">def</span> pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> A <span class="token operator">=</span></span>
<span class="line">    <span class="token keyword">val</span> currentTop <span class="token operator">=</span> peek</span>
<span class="line">    elements <span class="token operator">=</span> elements<span class="token punctuation">.</span>tail</span>
<span class="line">    currentTop</span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> stack <span class="token operator">=</span> Stack<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span></span>
<span class="line">stack<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">println<span class="token punctuation">(</span>stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="intersection-type" tabindex="-1"><a class="header-anchor" href="#intersection-type"><span>Intersection Type</span></a></h3><p>在类型上使用 <code>&amp;</code> 运算符创建交集类型(Intersection Type)。<code>A &amp; B</code> 表示值同时属于类型 A 和类型 B。</p><p><strong>仅 Scala 3</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> Resettable<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> reset<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">trait</span> Growable<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> add<span class="token punctuation">(</span>a<span class="token operator">:</span> A<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span></span>
<span class="line"><span class="token comment">// 参数 x 需要同时是 Resettable 和 Growable[String] 类型</span></span>
<span class="line"><span class="token keyword">def</span> f<span class="token punctuation">(</span>x<span class="token operator">:</span> Resettable <span class="token operator">&amp;</span> Growable<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">  x<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  x<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">&quot;first&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-396-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-396-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-396-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> Both<span class="token punctuation">[</span>A<span class="token punctuation">]</span> <span class="token keyword">extends</span> Resettable <span class="token keyword">with</span> Growable<span class="token punctuation">[</span>A<span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">def</span> f<span class="token punctuation">(</span>x<span class="token operator">:</span> Both<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span></span>
<span class="line"></span></code></pre></div><!--]--></div><div class="vp-tab" id="tab-396-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> Both<span class="token punctuation">[</span>A<span class="token punctuation">]</span> <span class="token keyword">extends</span> Resettable<span class="token punctuation">,</span> Growable<span class="token punctuation">[</span>A<span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">def</span> f<span class="token punctuation">(</span>x<span class="token operator">:</span> Both<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><h3 id="union-type-scala-3" tabindex="-1"><a class="header-anchor" href="#union-type-scala-3"><span>Union Type(Scala 3)</span></a></h3><p>在类型上使用 <code>|</code> 运算符创建 Union Type(联合类型)。<code>A | B</code> 表示参数可以是 A 或 B 类型。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Username<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Password<span class="token punctuation">(</span>hash<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> help<span class="token punctuation">(</span>id<span class="token operator">:</span> Username <span class="token operator">|</span> Password<span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line">  <span class="token keyword">val</span> user <span class="token operator">=</span> id <span class="token keyword">match</span></span>
<span class="line">    <span class="token keyword">case</span> Username<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> lookupName<span class="token punctuation">(</span>name<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">case</span> Password<span class="token punctuation">(</span>hash<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> lookupPassword<span class="token punctuation">(</span>hash<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>抽象替代联合类型</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> UsernameOrPassword</span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Username<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> UsernameOrPassword</span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Password<span class="token punctuation">(</span>hash<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> UsernameOrPassword</span>
<span class="line"><span class="token keyword">def</span> help<span class="token punctuation">(</span>id<span class="token operator">:</span> UsernameOrPassword<span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>使用枚举标记并集。Username 不是 UsernameOrPassword 的子类型，需要显示</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">enum</span> UsernameOrPassword<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> IsUsername<span class="token punctuation">(</span>u<span class="token operator">:</span> Username<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> IsPassword<span class="token punctuation">(</span>p<span class="token operator">:</span> Password<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> help<span class="token punctuation">(</span>id<span class="token operator">:</span> UsernameOrPassword<span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line">  <span class="token keyword">val</span> user <span class="token operator">=</span> id <span class="token keyword">match</span></span>
<span class="line">    <span class="token keyword">case</span> UsernameOrPassword<span class="token punctuation">.</span>IsUsername<span class="token punctuation">(</span>u<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> lookupName<span class="token punctuation">(</span>u<span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">case</span> UsernameOrPassword<span class="token punctuation">.</span>IsPassword<span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> lookupPassword<span class="token punctuation">(</span>p<span class="token punctuation">.</span>hash<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><h3 id="algebraic-data-type" tabindex="-1"><a class="header-anchor" href="#algebraic-data-type"><span>Algebraic Data Type</span></a></h3><p>可以使用 <code>enum</code> 构建 Algebraic Data Type(ADT，代数数据类型)。是一种通过组合积类型（<code>product type</code>）及和类型（<code>sum type</code>）构建数据结构的方式。</p><p><strong>Scala 3 通过 enum 简化了 ADT。</strong></p><p><strong>Sum Type(和类型)</strong>：一个类型有不同的情况，或关系。3 种大的类型：CrustSize(大小)、CrustType(类型)、Topping(加料)。</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-434-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-434-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-434-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">sealed</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> CrustSize</span>
<span class="line"><span class="token comment">// 大小由不同的表示</span></span>
<span class="line"><span class="token keyword">object</span> CrustSize <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Small <span class="token keyword">extends</span> CrustSize</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Medium <span class="token keyword">extends</span> CrustSize</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Large <span class="token keyword">extends</span> CrustSize</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">sealed</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> CrustType</span>
<span class="line"><span class="token keyword">object</span> CrustType <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Thin <span class="token keyword">extends</span> CrustType</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Thick <span class="token keyword">extends</span> CrustType</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Regular <span class="token keyword">extends</span> CrustType</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">sealed</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> Topping</span>
<span class="line"><span class="token keyword">object</span> Topping <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Cheese <span class="token keyword">extends</span> Topping</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Pepperoni <span class="token keyword">extends</span> Topping</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> BlackOlives <span class="token keyword">extends</span> Topping</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> GreenOlives <span class="token keyword">extends</span> Topping</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Onions <span class="token keyword">extends</span> Topping</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><!--]--></div><div class="vp-tab" id="tab-434-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">enum</span> CrustSize<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Small<span class="token punctuation">,</span> Medium<span class="token punctuation">,</span> Large</span>
<span class="line"></span>
<span class="line"><span class="token keyword">enum</span> CrustType<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Thin<span class="token punctuation">,</span> Thick<span class="token punctuation">,</span> Regular</span>
<span class="line"></span>
<span class="line"><span class="token keyword">enum</span> Topping<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Cheese<span class="token punctuation">,</span> Pepperoni<span class="token punctuation">,</span> BlackOlives<span class="token punctuation">,</span> GreenOlives<span class="token punctuation">,</span> Onions</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p></p><!--]--></div><!--]--></div><p><strong>Product Type(积类型)</strong>：一个类型由多个字段组合而成，与关系。Scala 中 case 对象可以用来表示单例对象，可访问但不可变的结构，也可以用 case class 表示</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 定义 case class</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Person<span class="token punctuation">(</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">  vocation<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// case 对象创建</span></span>
<span class="line"><span class="token keyword">val</span> p <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Reginald Kenneth Dwight&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Singer&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 默认的 toString 方法</span></span>
<span class="line">p              </span>
<span class="line"></span>
<span class="line"><span class="token comment">// 可访问，不可变</span></span>
<span class="line">p<span class="token punctuation">.</span>name           </span>
<span class="line"><span class="token comment">// p.name = &quot;Joe&quot; 不能修改数据</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 需要更新返回一个新的对象</span></span>
<span class="line"><span class="token keyword">val</span> p2 <span class="token operator">=</span> p<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;Elton John&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="virance-型变" tabindex="-1"><a class="header-anchor" href="#virance-型变"><span>Virance(型变)</span></a></h3><p>Scala 支持 3 种型变方式：</p><ul><li>Invariant Type：不变，既生产又消费。<code>Array[T]</code>。</li><li>Covariant Type：协变，只产生类型 T。<code>List[+T]</code>。</li><li>Contravariant Type：逆变，只消费类型 T。<code>Function[-A, +B]</code>。</li></ul><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> Item <span class="token punctuation">{</span> <span class="token keyword">def</span> productNumber<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">trait</span> Buyable <span class="token keyword">extends</span> Item <span class="token punctuation">{</span> <span class="token keyword">def</span> price<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">trait</span> Book <span class="token keyword">extends</span> Buyable <span class="token punctuation">{</span> <span class="token keyword">def</span> isbn<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> RedBook <span class="token keyword">extends</span> Book <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">def</span> productNumber<span class="token operator">:</span> <span class="token builtin">Int</span>  <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">    <span class="token keyword">def</span> price<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">2</span></span>
<span class="line">    <span class="token keyword">def</span> isbn<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;RedBook&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><strong>Invariant Type(不变类型)</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// invariant type, Pipeline[T] 参数指定类型不可变</span></span>
<span class="line"><span class="token keyword">trait</span> Pipeline<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> process<span class="token punctuation">(</span>t<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> T</span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> PipelineUtil<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> oneOf<span class="token punctuation">(</span>p1<span class="token operator">:</span> Pipeline<span class="token punctuation">[</span>Buyable<span class="token punctuation">]</span><span class="token punctuation">,</span> p2<span class="token operator">:</span> Pipeline<span class="token punctuation">[</span>Buyable<span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token operator">:</span> Buyable<span class="token punctuation">)</span><span class="token operator">:</span> Buyable <span class="token operator">=</span></span>
<span class="line">    <span class="token keyword">val</span> b1 <span class="token operator">=</span> p1<span class="token punctuation">.</span>process<span class="token punctuation">(</span>b<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">val</span> b2 <span class="token operator">=</span> p2<span class="token punctuation">.</span>process<span class="token punctuation">(</span>b<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> b1<span class="token punctuation">.</span>price <span class="token operator">&lt;</span> b2<span class="token punctuation">.</span>price then b1 <span class="token keyword">else</span> b2</span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> Pipeline<span class="token punctuation">[</span>Buyable<span class="token punctuation">]</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">def</span> process<span class="token punctuation">(</span>t<span class="token operator">:</span> Buyable<span class="token punctuation">)</span><span class="token operator">:</span> Buyable <span class="token operator">=</span> t</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">val</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> Pipeline<span class="token punctuation">[</span>Book<span class="token punctuation">]</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">def</span> process<span class="token punctuation">(</span>t<span class="token operator">:</span> Book<span class="token punctuation">)</span><span class="token operator">:</span> Book <span class="token operator">=</span> t</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">val</span> b <span class="token operator">=</span> <span class="token keyword">new</span> Buyable<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">def</span> productNumber<span class="token operator">:</span> <span class="token builtin">Int</span>  <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">    <span class="token keyword">def</span> price<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">2</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>p1，p2 的类型只能是 <code>Pipeline[Buyable]</code>。虽然<code>Book &lt;: Buyable &lt;: Item</code>，但<code>Pipeline[Buyable]</code> 和 <code>Pipeline[Book]</code> 没有任何关系 。</p><figure><img src="http://47.101.155.205/image-20251013160445359.png" alt="image-20251013160445359" tabindex="0" loading="lazy"><figcaption>image-20251013160445359</figcaption></figure><p><strong>Covariant Type(协变类型)</strong>：可以是该类型或其子类型，该参数类型只能作用<strong>在方法返回类型有效</strong>。<strong>val 作用在构造方法上有效</strong>。</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// covariant type, Producer[+T] 参数指定类型, 可以为其类型或子类型</span></span>
<span class="line"><span class="token keyword">trait</span> Producer<span class="token punctuation">[</span><span class="token operator">+</span>T<span class="token punctuation">]</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> make<span class="token operator">:</span> T</span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> PipelineUtil<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> makeTwo<span class="token punctuation">(</span>p<span class="token operator">:</span> Producer<span class="token punctuation">[</span>Buyable<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> </span>
<span class="line">    p<span class="token punctuation">.</span>make<span class="token punctuation">.</span>price <span class="token operator">+</span> p<span class="token punctuation">.</span>make<span class="token punctuation">.</span>price</span>
<span class="line"></span>
<span class="line"><span class="token comment">// Producer[RedBook] &lt;: Producer[Buyable], 父(Producer[Buyable]) = 子(Producer[RedBook])</span></span>
<span class="line"><span class="token comment">// 方法返回值, 返回的类型为 T 的子类型, 不影响 Producer 不影响 T 方法编译</span></span>
<span class="line"><span class="token keyword">val</span> pr <span class="token operator">=</span> <span class="token keyword">new</span> Producer<span class="token punctuation">[</span>RedBook<span class="token punctuation">]</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">def</span> make<span class="token operator">:</span> RedBook <span class="token operator">=</span> RedBook<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">val</span> pb<span class="token operator">:</span> Producer<span class="token punctuation">[</span>Buyable<span class="token punctuation">]</span> <span class="token operator">=</span> pr</span>
<span class="line"></span>
<span class="line">PipelineUtil<span class="token punctuation">.</span>makeTwo<span class="token punctuation">(</span>pr<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>协变不能作为方法参数的原因</strong>：</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Box<span class="token punctuation">[</span><span class="token operator">+</span>A<span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> set<span class="token punctuation">(</span>value<span class="token operator">:</span> A<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">Cat <span class="token operator">&lt;</span><span class="token operator">:</span> Animal <span class="token keyword">=&gt;</span> Box<span class="token punctuation">[</span>Cat<span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">:</span> Box<span class="token punctuation">[</span>Animal<span class="token punctuation">]</span></span>
<span class="line"><span class="token comment">// 所以</span></span>
<span class="line"><span class="token keyword">val</span> catBox<span class="token operator">:</span> Box<span class="token punctuation">[</span>Cat<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> Box<span class="token punctuation">[</span>Cat<span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">val</span> animalBox<span class="token operator">:</span> Box<span class="token punctuation">[</span>Animal<span class="token punctuation">]</span> <span class="token operator">=</span> catBox</span>
<span class="line"><span class="token comment">// 这里逻辑上就会有问题</span></span>
<span class="line">animalBox<span class="token punctuation">.</span>set<span class="token punctuation">(</span><span class="token keyword">new</span> Dog<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p><strong>Contravariant Type(逆变类型)</strong>：该参数类型在<strong>方法参数上</strong>才有效。</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// contravariant type, Consumer[-T] 参数指定类型</span></span>
<span class="line"><span class="token keyword">trait</span> Consumer<span class="token punctuation">[</span><span class="token operator">-</span>T<span class="token punctuation">]</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> take<span class="token punctuation">(</span>t<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> buy<span class="token operator">:</span> Consumer<span class="token punctuation">[</span>Buyable<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> Consumer<span class="token punctuation">[</span>Buyable<span class="token punctuation">]</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">def</span> take<span class="token punctuation">(</span>t<span class="token operator">:</span> Buyable<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> print<span class="token punctuation">(</span><span class="token string">&quot;Buyable: &quot;</span> <span class="token operator">+</span> t<span class="token punctuation">.</span>price<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// Consumer[Buyable] &lt;: Consumer[Book], 父(Consumer[Book]) = 子(Consumer[Buyable])</span></span>
<span class="line"><span class="token comment">// 方法参数, 接收类型为 T, Consumer[Buyable] 转为 Consumer[Book], 意味着该方法参数需要 Book 类型</span></span>
<span class="line"><span class="token comment">// Consumer[Buyable] &lt;: Consumer[Book] 转换关系, 但是类型需要为 T 的子类型</span></span>
<span class="line"><span class="token keyword">val</span> book<span class="token operator">:</span> Consumer<span class="token punctuation">[</span>Book<span class="token punctuation">]</span> <span class="token operator">=</span> buy</span>
<span class="line"></span>
<span class="line"><span class="token keyword">trait</span> Function<span class="token punctuation">[</span><span class="token operator">-</span>A<span class="token punctuation">,</span> <span class="token operator">+</span>B<span class="token punctuation">]</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>a<span class="token operator">:</span> A<span class="token punctuation">)</span><span class="token operator">:</span> B</span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> f<span class="token operator">:</span> Function<span class="token punctuation">[</span>Buyable<span class="token punctuation">,</span> Buyable<span class="token punctuation">]</span> <span class="token operator">=</span> b <span class="token keyword">=&gt;</span> b</span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> g<span class="token operator">:</span> Function<span class="token punctuation">[</span>Buyable<span class="token punctuation">,</span> Item<span class="token punctuation">]</span> <span class="token operator">=</span> f</span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> h<span class="token operator">:</span> Function<span class="token punctuation">[</span>Book<span class="token punctuation">,</span> Buyable<span class="token punctuation">]</span> <span class="token operator">=</span> f</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>逆变类型不能作为返回值的原因</strong></p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Box<span class="token punctuation">[</span><span class="token operator">+</span>A<span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> make<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> A <span class="token operator">=</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">Cat <span class="token operator">&lt;</span><span class="token operator">:</span> Animal <span class="token keyword">=&gt;</span> Box<span class="token punctuation">[</span>Animal<span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">:</span> Box<span class="token punctuation">[</span>Cat<span class="token punctuation">]</span></span>
<span class="line"><span class="token comment">// 则</span></span>
<span class="line"><span class="token keyword">val</span> animalBox<span class="token operator">:</span> Box<span class="token punctuation">[</span>Animal<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> Box<span class="token punctuation">[</span>Animal<span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">val</span> catBox<span class="token operator">:</span> Box<span class="token punctuation">[</span>Cat<span class="token punctuation">]</span> <span class="token operator">=</span> animalBox</span>
<span class="line"><span class="token comment">// 这里逻辑上就会有问题</span></span>
<span class="line">catBox<span class="token punctuation">.</span>make<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><h3 id="opaque-type-不透明类型-scala-3" tabindex="-1"><a class="header-anchor" href="#opaque-type-不透明类型-scala-3"><span>Opaque Type(不透明类型)(Scala 3)</span></a></h3><p>将 Double 封装成对数（3就是以10为底，1000的对数），引入一个新的类型。</p><p><strong>为什么使用 REPL 控制执行的结果不符合预期？</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// protected 隐藏 underlying, 使用 Logarithm(2), underlying = log 2; new Logarithm(2), underlying = 2</span></span>
<span class="line"><span class="token comment">// underlying 就是以常数 e 为底, d 的对数</span></span>
<span class="line"><span class="token keyword">class</span> Logarithm<span class="token punctuation">(</span><span class="token keyword">protected</span> <span class="token keyword">val</span> underlying<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 对数还原成 d</span></span>
<span class="line">  <span class="token keyword">def</span> toDouble<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> math<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>underlying<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> <span class="token operator">+</span><span class="token punctuation">(</span>that<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> Logarithm <span class="token operator">=</span></span>
<span class="line">    <span class="token comment">// 调用 companion object apply 方法, 省略方法名</span></span>
<span class="line">    Logarithm<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>toDouble <span class="token operator">+</span> that<span class="token punctuation">.</span>toDouble<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> <span class="token operator">*</span><span class="token punctuation">(</span>that<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> Logarithm <span class="token operator">=</span></span>
<span class="line">    <span class="token keyword">new</span> Logarithm<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>underlying <span class="token operator">+</span> that<span class="token punctuation">.</span>underlying<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> logE<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> underlying</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> Logarithm <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>d<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token operator">:</span> Logarithm <span class="token operator">=</span> <span class="token keyword">new</span> Logarithm<span class="token punctuation">(</span>math<span class="token punctuation">.</span>log<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> l2 <span class="token operator">=</span> Logarithm<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">val</span> l3 <span class="token operator">=</span> Logarithm<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;x = </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">l2<span class="token punctuation">.</span>toDouble</span><span class="token punctuation">}</span></span><span class="token string">, y = </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">l2<span class="token punctuation">.</span>logE</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;x = </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">l3<span class="token punctuation">.</span>toDouble</span><span class="token punctuation">}</span></span><span class="token string">, y = </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">l3<span class="token punctuation">.</span>logE</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;l2 + l3 = </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression"><span class="token punctuation">(</span>l2 <span class="token operator">+</span> l3<span class="token punctuation">)</span><span class="token punctuation">.</span>toDouble</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;l2 * l3 = </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression"><span class="token punctuation">(</span>l2 <span class="token operator">*</span> l3<span class="token punctuation">)</span><span class="token punctuation">.</span>toDouble</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">(</span>l2 <span class="token operator">*</span> l3<span class="token punctuation">)</span><span class="token punctuation">.</span>toDouble <span class="token comment">// 6.0</span></span>
<span class="line"><span class="token punctuation">(</span>l2 <span class="token operator">+</span> l3<span class="token punctuation">)</span><span class="token punctuation">.</span>toDouble <span class="token comment">// 5.0</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://47.101.155.205/image-20251017112338507.png" alt="image-20251017112338507" tabindex="0" loading="lazy"><figcaption>image-20251017112338507</figcaption></figure><figure><img src="http://47.101.155.205/image-20251017112533052.png" alt="image-20251017112533052" tabindex="0" loading="lazy"><figcaption>image-20251017112533052</figcaption></figure><p><strong>使用 Logarithm 存储 Double 的对数，但是每次运算都带来了性能开销（抽象开销）：每次运算都需要提取 underlying 值，然后创建 Logarithm 对象。</strong></p><p>使用模块化抽象，来解决对象频繁创建的问题。但是 <code>LogarithmsImpl</code> 实现的 <code>type Logarithm</code> 固定为 <code>Double</code> 类型。</p><p><strong>问题：出现了定义的 + 和 * 运算没有生效的情况。</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> Logarithms <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 以 e 为底, d 的对数值</span></span>
<span class="line">  <span class="token keyword">type</span> Logarithm</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> add<span class="token punctuation">(</span>x<span class="token operator">:</span> Logarithm<span class="token punctuation">,</span> y<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> Logarithm</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> mul<span class="token punctuation">(</span>x<span class="token operator">:</span> Logarithm<span class="token punctuation">,</span> y<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> Logarithm</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> make<span class="token punctuation">(</span>d<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token operator">:</span> Logarithm</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> extract<span class="token punctuation">(</span>x<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">extension</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token operator">+</span><span class="token punctuation">(</span>y<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> Logarithm <span class="token operator">=</span> add<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token operator">*</span><span class="token punctuation">(</span>y<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> Logarithm <span class="token operator">=</span> mul<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> LogarithmsImpl <span class="token keyword">extends</span> Logarithms <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">type</span> Logarithm <span class="token operator">=</span> <span class="token builtin">Double</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> add<span class="token punctuation">(</span>x<span class="token operator">:</span> Logarithm<span class="token punctuation">,</span> y<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> Logarithm <span class="token operator">=</span> make<span class="token punctuation">(</span>extract<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> extract<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> mul<span class="token punctuation">(</span>x<span class="token operator">:</span> Logarithm<span class="token punctuation">,</span> y<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> Logarithm <span class="token operator">=</span> x <span class="token operator">+</span> y</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> make<span class="token punctuation">(</span>d<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token operator">:</span> Logarithm <span class="token operator">=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span>d<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> extract<span class="token punctuation">(</span>x<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> math<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>x<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://47.101.155.205/image-20251017150934812.png" alt="image-20251017150934812" tabindex="0" loading="lazy"><figcaption>image-20251017150934812</figcaption></figure><p><strong>Opaque Type（不透明类型）</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">object</span> Logarithms<span class="token operator">:</span></span>
<span class="line">  <span class="token comment">// 定义不透明类型</span></span>
<span class="line">  <span class="token comment">// Logarithm 和 Double 类型相等，仅在 Logarithm 作用域可知，改作用域应用在 Logarithms，且 extension Logarithm 的方法</span></span>
<span class="line">  <span class="token keyword">opaque</span> <span class="token keyword">type</span> Logarithm <span class="token operator">=</span> <span class="token builtin">Double</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">object</span> Logarithm<span class="token operator">:</span></span>
<span class="line">    <span class="token keyword">def</span> apply<span class="token punctuation">(</span>d<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token operator">:</span> Logarithm <span class="token operator">=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span>d<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">extension</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> extract<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> math<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>x<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> Logarithm <span class="token operator">=</span> Logarithm<span class="token punctuation">(</span>math<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> math<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token operator">*</span> <span class="token punctuation">(</span>y<span class="token operator">:</span> Logarithm<span class="token punctuation">)</span><span class="token operator">:</span> Logarithm <span class="token operator">=</span> x <span class="token operator">+</span> y</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="http://47.101.155.205/image-20251017152535556.png" alt="image-20251017152535556" tabindex="0" loading="lazy"><figcaption>image-20251017152535556</figcaption></figure><h3 id="structural-type-scala-3" tabindex="-1"><a class="header-anchor" href="#structural-type-scala-3"><span>Structural Type(Scala 3)</span></a></h3><p><strong>使用语法</strong>：仅包含抽象成员的结构</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">type</span> MyType <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> m1<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">val</span> name<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 函数参数内联定义</span></span>
<span class="line"><span class="token keyword">def</span> printName<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">val</span> name<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">  println<span class="token punctuation">(</span>x<span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Record<span class="token punctuation">(</span>elems<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">Any</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Selectable<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">val</span> fields <span class="token operator">=</span> elems<span class="token punctuation">.</span>toMap</span>
<span class="line">  <span class="token keyword">def</span> selectDynamic<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Any</span> <span class="token operator">=</span> fields<span class="token punctuation">(</span>name<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Person <span class="token operator">=</span> Record <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> name<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">val</span> age<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> person <span class="token operator">=</span> Record<span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;name&quot;</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Emma&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string">&quot;age&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">42</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">.</span>asInstanceOf<span class="token punctuation">[</span>Person<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">person<span class="token punctuation">.</span>name</span><span class="token punctuation">}</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">person<span class="token punctuation">.</span>age</span><span class="token punctuation">}</span></span><span class="token string"> years old.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">person<span class="token punctuation">.</span>selectDynamic<span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>asInstanceOf<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span></span>
<span class="line">person<span class="token punctuation">.</span>selectDynamic<span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>asInstanceOf<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">type</span> Book <span class="token operator">=</span> Record <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> title<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">val</span> author<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">val</span> year<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line">  <span class="token keyword">val</span> rating<span class="token operator">:</span> <span class="token builtin">Double</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> book <span class="token operator">=</span> Record<span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;title&quot;</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;The Catcher in the Rye&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string">&quot;author&quot;</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;J. D. Salinger&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string">&quot;year&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">1951</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string">&quot;rating&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">4.5</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">.</span>asInstanceOf<span class="token punctuation">[</span>Book<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dependent-function-type-scala-3" tabindex="-1"><a class="header-anchor" href="#dependent-function-type-scala-3"><span>Dependent Function Type(Scala 3)</span></a></h3><h2 id="控制语句" tabindex="-1"><a class="header-anchor" href="#控制语句"><span>控制语句</span></a></h2><p><strong>EOP(expression-oriented programming)</strong>：编写的表达式返回一个值时，这样的称为面向表达式编程。不返回值的称为语句。</p><h3 id="if-else" tabindex="-1"><a class="header-anchor" href="#if-else"><span>if/else</span></a></h3><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-559-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-559-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-559-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 语句</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;negative&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;zero&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;positive&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 返回值, 类似三目运算符, EOP</span></span>
<span class="line"><span class="token keyword">val</span> x <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span> a <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> b <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 作为方法主体返回值</span></span>
<span class="line"><span class="token keyword">def</span> compare<span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-</span><span class="token number">1</span></span>
<span class="line">  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span></span>
<span class="line">    <span class="token number">0</span></span>
<span class="line">  <span class="token keyword">else</span></span>
<span class="line">    <span class="token number">1</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><!--]--></div><div class="vp-tab" id="tab-559-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><p>与 Scala 2对比，用 then 替换了 {}。</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">if</span> x <span class="token operator">&lt;</span> <span class="token number">0</span> then</span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;negative&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">else</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token number">0</span> then</span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;zero&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">else</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;positive&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 返回值, 类似三目运算符, EOP</span></span>
<span class="line"><span class="token keyword">val</span> x <span class="token operator">=</span> <span class="token keyword">if</span> a <span class="token operator">&lt;</span> b then a <span class="token keyword">else</span> b</span>
<span class="line"></span>
<span class="line"><span class="token comment">// 仅 Scala 3 支持，在表达结尾添加 end if</span></span>
<span class="line"><span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token number">1</span> then</span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;x is 1, as you can see:&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  println<span class="token punctuation">(</span>x<span class="token punctuation">)</span></span>
<span class="line">end <span class="token keyword">if</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 作为方法主体</span></span>
<span class="line"><span class="token keyword">def</span> compare<span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span></span>
<span class="line">  <span class="token keyword">if</span> a <span class="token operator">&lt;</span> b then</span>
<span class="line">    <span class="token operator">-</span><span class="token number">1</span></span>
<span class="line">  <span class="token keyword">else</span> <span class="token keyword">if</span> a <span class="token operator">==</span> b then</span>
<span class="line">    <span class="token number">0</span></span>
<span class="line">  <span class="token keyword">else</span></span>
<span class="line">    <span class="token number">1</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="for-循环" tabindex="-1"><a class="header-anchor" href="#for-循环"><span>for 循环</span></a></h3><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-576-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-576-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-576-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> ints <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// p &lt;- e, for 循环生成模板</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> ints<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> x <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">2</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;i = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i</span></span><span class="token string">, x = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">x</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 嵌套 for 循环, 执行 2x2x2 = 8 次. 注意: () 变成 {}</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">  i <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token number">2</span></span>
<span class="line">  j <span class="token keyword">&lt;-</span> <span class="token char">&#39;a&#39;</span> to <span class="token char">&#39;b&#39;</span></span>
<span class="line">  k <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token number">10</span> by <span class="token number">5</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token punctuation">{</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;i = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i</span></span><span class="token string">, j = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">j</span></span><span class="token string">, k = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">k</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 循环中增加条件, 支持多条件</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> ints <span class="token keyword">if</span> i <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">  println<span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 嵌套 for 循环 + 条件</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">  i <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token number">3</span></span>
<span class="line">  j <span class="token keyword">&lt;-</span> <span class="token char">&#39;a&#39;</span> to <span class="token char">&#39;c&#39;</span></span>
<span class="line">  <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">2</span></span>
<span class="line">  <span class="token keyword">if</span> j <span class="token operator">==</span> <span class="token char">&#39;b&#39;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token punctuation">{</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;i = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i</span></span><span class="token string">, j = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">j</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>   <span class="token comment">// prints: &quot;i = 2, j = b&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// for 表达式, EOP. for yield 返回新的结果</span></span>
<span class="line"><span class="token keyword">val</span> doubles <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> ints<span class="token punctuation">)</span> <span class="token keyword">yield</span> i <span class="token operator">*</span> <span class="token number">2</span></span>
<span class="line"><span class="token keyword">val</span> doubles <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> ints<span class="token punctuation">)</span> <span class="token keyword">yield</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> doubles <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">{</span> i <span class="token keyword">&lt;-</span> ints <span class="token punctuation">}</span> <span class="token keyword">yield</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// for if yield</span></span>
<span class="line"><span class="token keyword">val</span> fruits <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;banana&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lime&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> fruitLengths <span class="token operator">=</span></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span>f <span class="token keyword">&lt;-</span> fruits <span class="token keyword">if</span> f<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">yield</span> f<span class="token punctuation">.</span>length</span>
<span class="line"><span class="token comment">// 作为方法体返回结果</span></span>
<span class="line"><span class="token keyword">def</span> between3and10<span class="token punctuation">(</span>xs<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">    x <span class="token keyword">&lt;-</span> xs</span>
<span class="line">    <span class="token keyword">if</span> x <span class="token operator">&gt;=</span> <span class="token number">3</span></span>
<span class="line">    <span class="token keyword">if</span> x <span class="token operator">&lt;=</span> <span class="token number">10</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">yield</span> x</span>
<span class="line">between3and10<span class="token punctuation">(</span>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Map for 循环</span></span>
<span class="line"><span class="token keyword">val</span> states <span class="token operator">=</span> Map<span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;AK&quot;</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Alaska&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string">&quot;AL&quot;</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Alabama&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token string">&quot;AZ&quot;</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Arizona&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>abbrev<span class="token punctuation">,</span> fullName<span class="token punctuation">)</span> <span class="token keyword">&lt;-</span> states<span class="token punctuation">)</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">abbrev</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">fullName</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><!--]--></div><div class="vp-tab" id="tab-576-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> ints <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// p &lt;- e, for 循环生成模板</span></span>
<span class="line"><span class="token keyword">for</span> i <span class="token keyword">&lt;-</span> ints <span class="token keyword">do</span> println<span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 嵌套 for 循环, 执行 2x2x2 = 8 次</span></span>
<span class="line"><span class="token keyword">for</span></span>
<span class="line">  i <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token number">2</span></span>
<span class="line">  j <span class="token keyword">&lt;-</span> <span class="token char">&#39;a&#39;</span> to <span class="token char">&#39;b&#39;</span></span>
<span class="line">  k <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token number">10</span> by <span class="token number">5</span></span>
<span class="line"><span class="token keyword">do</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;i = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i</span></span><span class="token string">, j = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">j</span></span><span class="token string">, k = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">k</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 循环中增加条件, 支持多条件</span></span>
<span class="line"><span class="token keyword">for</span></span>
<span class="line">  i <span class="token keyword">&lt;-</span> ints</span>
<span class="line">  <span class="token keyword">if</span> i <span class="token operator">&gt;</span> <span class="token number">2</span></span>
<span class="line"><span class="token keyword">do</span></span>
<span class="line">  println<span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 嵌套 for 循环 + 条件</span></span>
<span class="line"><span class="token keyword">for</span></span>
<span class="line">  i <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token number">3</span></span>
<span class="line">  j <span class="token keyword">&lt;-</span> <span class="token char">&#39;a&#39;</span> to <span class="token char">&#39;c&#39;</span></span>
<span class="line">  <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">2</span></span>
<span class="line">  <span class="token keyword">if</span> j <span class="token operator">==</span> <span class="token char">&#39;b&#39;</span></span>
<span class="line"><span class="token keyword">do</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;i = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i</span></span><span class="token string">, j = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">j</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// for yield 返回新的结果</span></span>
<span class="line"><span class="token keyword">val</span> doubles <span class="token operator">=</span> <span class="token keyword">for</span> i <span class="token keyword">&lt;-</span> ints <span class="token keyword">yield</span> i <span class="token operator">*</span> <span class="token number">2</span></span>
<span class="line"><span class="token keyword">val</span> doubles <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> ints<span class="token punctuation">)</span> <span class="token keyword">yield</span> i <span class="token operator">*</span> <span class="token number">2</span></span>
<span class="line"><span class="token keyword">val</span> doubles <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">&lt;-</span> ints<span class="token punctuation">)</span> <span class="token keyword">yield</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> doubles <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">{</span> i <span class="token keyword">&lt;-</span> ints <span class="token punctuation">}</span> <span class="token keyword">yield</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// for if yield</span></span>
<span class="line"><span class="token keyword">val</span> fruits <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;banana&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lime&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> fruitLengths <span class="token operator">=</span> <span class="token keyword">for</span></span>
<span class="line">  f <span class="token keyword">&lt;-</span> fruits</span>
<span class="line">  <span class="token keyword">if</span> f<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">4</span></span>
<span class="line"><span class="token keyword">yield</span></span>
<span class="line">  f<span class="token punctuation">.</span>length</span>
<span class="line"><span class="token comment">// 作为方法体返回结果</span></span>
<span class="line"><span class="token keyword">def</span> between3and10<span class="token punctuation">(</span>xs<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span></span>
<span class="line">  <span class="token keyword">for</span></span>
<span class="line">    x <span class="token keyword">&lt;-</span> xs</span>
<span class="line">    <span class="token keyword">if</span> x <span class="token operator">&gt;=</span> <span class="token number">3</span></span>
<span class="line">    <span class="token keyword">if</span> x <span class="token operator">&lt;=</span> <span class="token number">10</span></span>
<span class="line">  <span class="token keyword">yield</span> x</span>
<span class="line">between3and10<span class="token punctuation">(</span>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Map for 循环</span></span>
<span class="line"><span class="token keyword">val</span> states <span class="token operator">=</span> Map<span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;AK&quot;</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Alaska&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string">&quot;AL&quot;</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Alabama&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">  <span class="token string">&quot;AZ&quot;</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Arizona&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span>abbrev<span class="token punctuation">,</span> fullName<span class="token punctuation">)</span> <span class="token keyword">&lt;-</span> states <span class="token keyword">do</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">abbrev</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">fullName</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="while-循环" tabindex="-1"><a class="header-anchor" href="#while-循环"><span>while 循环</span></a></h3><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-590-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-590-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-590-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  println<span class="token punctuation">(</span>x<span class="token punctuation">)</span></span>
<span class="line">  x <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p></p><!--]--></div><div class="vp-tab" id="tab-590-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span></span>
<span class="line">  x <span class="token operator">&lt;</span> <span class="token number">3</span></span>
<span class="line"><span class="token keyword">do</span></span>
<span class="line">  println<span class="token punctuation">(</span>x<span class="token punctuation">)</span></span>
<span class="line">  x <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="line"></span></code></pre></div><p></p><!--]--></div><!--]--></div><h3 id="match-表达式" tabindex="-1"><a class="header-anchor" href="#match-表达式"><span>match 表达式</span></a></h3><p>match 表达式支持匹配的类型：</p><ul><li>普通常量：<code>case 3 =&gt;</code></li><li>集合：<code>case List(els : _*) =&gt;</code></li><li>Tuple：<code>case (x, y) =&gt;</code></li><li>构造方法：<code>case Person(first, last) =&gt;</code></li><li>类：<code>case p: Person =&gt;</code></li></ul><p><strong>match 的类型没用和 case 中的类型匹配，则会抛出 MatchError。</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-640-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-640-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-640-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> i <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line"><span class="token comment">// 作为表达式返回结果</span></span>
<span class="line"><span class="token keyword">val</span> result <span class="token operator">=</span> i <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;one&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">2</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;two&quot;</span></span>
<span class="line">  <span class="token comment">// _ 表示任意</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token string">&quot;other&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">i <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">2</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;other&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 变量匹配(变量名大写) + 获取未匹配的变量值</span></span>
<span class="line"><span class="token keyword">val</span> N <span class="token operator">=</span> <span class="token number">42</span></span>
<span class="line">i <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">0</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> N <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;42&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> n <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;You gave me: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">n</span></span><span class="token string">&quot;</span></span> <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 多种情况匹配 </span></span>
<span class="line"><span class="token keyword">val</span> evenOrOdd <span class="token operator">=</span> i <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">5</span> <span class="token operator">|</span> <span class="token number">7</span> <span class="token operator">|</span> <span class="token number">9</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;odd&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">6</span> <span class="token operator">|</span> <span class="token number">8</span> <span class="token operator">|</span> <span class="token number">10</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;even&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;some other number&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 结合 if 匹配</span></span>
<span class="line">i <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;one, a lonely number&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> x <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> x <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;two’s company, three’s a crowd&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> x <span class="token keyword">if</span> x <span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;4+, that’s a party&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;i’m guessing your number is zero or less&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 范围匹配</span></span>
<span class="line">i <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> a <span class="token keyword">if</span> <span class="token number">0</span> to <span class="token number">9</span> contains a <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;0-9 range: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">a</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> b <span class="token keyword">if</span> <span class="token number">10</span> to <span class="token number">19</span> contains b <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;10-19 range: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">b</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> c <span class="token keyword">if</span> <span class="token number">20</span> to <span class="token number">29</span> contains c <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;20-29 range: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">c</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Hmmm...&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 类型匹配</span></span>
<span class="line"><span class="token keyword">val</span> p <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Fred&quot;</span><span class="token punctuation">)</span></span>
<span class="line">p <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> Person<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;Fred&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> says, Yubba dubba doo&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> Person<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;Bam Bam&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> says, Bam bam!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Watch the Flintstones!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 作为方法体</span></span>
<span class="line"><span class="token keyword">def</span> getClassAsString<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> x <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> s<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;&#39;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">s</span></span><span class="token string">&#39; is a String&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> i<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;Int&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> d<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;Double&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> l<span class="token operator">:</span> List<span class="token punctuation">[</span>_<span class="token punctuation">]</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;List&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token string">&quot;Unknown&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">getClassAsString<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">getClassAsString<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span></span>
<span class="line">getClassAsString<span class="token punctuation">(</span>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 将匹配的值绑定到变量</span></span>
<span class="line"><span class="token keyword">trait</span> Animal <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> name<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Cat<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Animal <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> meow<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;Meow&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Dog<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Animal <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> bark<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;Bark&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> speak<span class="token punctuation">(</span>animal<span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token operator">=</span> animal <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> c @ Cat<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;Felix&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> says, </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">c<span class="token punctuation">.</span>meow</span><span class="token punctuation">}</span></span><span class="token string">!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> d @ Dog<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;Rex&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> says, </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">d<span class="token punctuation">.</span>bark</span><span class="token punctuation">}</span></span><span class="token string">!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;I don&#39;t know you!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">speak<span class="token punctuation">(</span>Cat<span class="token punctuation">(</span><span class="token string">&quot;Felix&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Felix says, Meow!&quot;</span></span>
<span class="line">speak<span class="token punctuation">(</span>Dog<span class="token punctuation">(</span><span class="token string">&quot;Rex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// &quot;Rex says, Bark!&quot;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">def</span> pattern<span class="token punctuation">(</span>x<span class="token operator">:</span> Matchable<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> x <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// constant patterns</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">0</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;zero&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token boolean">true</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;true&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token string">&quot;hello&quot;</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;you said &#39;hello&#39;&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> Nil <span class="token keyword">=&gt;</span> <span class="token string">&quot;an empty List&quot;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// sequence patterns</span></span>
<span class="line">  <span class="token keyword">case</span> List<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> _<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;a 3-element list with 0 as the first element&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> _<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;list, starts with 1, has any number of elements&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> Vector<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> _<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;vector, starts w/ 1, has any number of elements&quot;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// tuple patterns</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">a</span></span><span class="token string"> and </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">b</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">a</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">b</span></span><span class="token string">, and </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">c</span></span><span class="token string">&quot;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// constructor patterns</span></span>
<span class="line">  <span class="token keyword">case</span> Person<span class="token punctuation">(</span>first<span class="token punctuation">,</span> <span class="token string">&quot;Alexander&quot;</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Alexander, first name = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">first</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> Dog<span class="token punctuation">(</span><span class="token string">&quot;Zeus&quot;</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;found a dog named Zeus&quot;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// type test patterns</span></span>
<span class="line">  <span class="token keyword">case</span> s<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got a string: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">s</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> i<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got an int: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> f<span class="token operator">:</span> <span class="token builtin">Float</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got a float: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">f</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> a<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;array of int: </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">a<span class="token punctuation">.</span>mkString<span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> as<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;string array: </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">as<span class="token punctuation">.</span>mkString<span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> d<span class="token operator">:</span> Dog <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;dog: </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">d<span class="token punctuation">.</span>name</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> list<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token operator">?</span><span class="token punctuation">]</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got a List: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">list</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> m<span class="token operator">:</span> Map<span class="token punctuation">[</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">]</span> <span class="token keyword">=&gt;</span> m<span class="token punctuation">.</span>toString</span>
<span class="line"></span>
<span class="line">  <span class="token comment">// the default wildcard pattern</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token string">&quot;Unknown&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><!--]--></div><div class="vp-tab" id="tab-640-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><p>相比 Scala2，省略了 match 后的 <code>{}</code></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> i <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line"><span class="token comment">// 作为表达式返回结果</span></span>
<span class="line"><span class="token keyword">val</span> result <span class="token operator">=</span> i <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;one&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">2</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;two&quot;</span></span>
<span class="line">  <span class="token comment">// _ 表示任意</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token string">&quot;other&quot;</span></span>
<span class="line">i <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">2</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;other&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 变量匹配(变量名大写) + 获取未匹配的变量值</span></span>
<span class="line"><span class="token keyword">val</span> N <span class="token operator">=</span> <span class="token number">42</span></span>
<span class="line">i <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">0</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> N <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;42&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> n <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;You gave me: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">n</span></span><span class="token string">&quot;</span></span> <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 多种情况匹配 </span></span>
<span class="line"><span class="token keyword">val</span> evenOrOdd <span class="token operator">=</span> i <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">5</span> <span class="token operator">|</span> <span class="token number">7</span> <span class="token operator">|</span> <span class="token number">9</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;odd&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">6</span> <span class="token operator">|</span> <span class="token number">8</span> <span class="token operator">|</span> <span class="token number">10</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;even&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;some other number&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 结合 if 匹配</span></span>
<span class="line">i <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;one, a lonely number&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> x <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> x <span class="token operator">==</span> <span class="token number">3</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;two’s company, three’s a crowd&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> x <span class="token keyword">if</span> x <span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;4+, that’s a party&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;i’m guessing your number is zero or less&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 范围匹配</span></span>
<span class="line">i <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> a <span class="token keyword">if</span> <span class="token number">0</span> to <span class="token number">9</span> contains a <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;0-9 range: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">a</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> b <span class="token keyword">if</span> <span class="token number">10</span> to <span class="token number">19</span> contains b <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;10-19 range: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">b</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> c <span class="token keyword">if</span> <span class="token number">20</span> to <span class="token number">29</span> contains c <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;20-29 range: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">c</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Hmmm...&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 类型匹配</span></span>
<span class="line"><span class="token keyword">val</span> p <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Fred&quot;</span><span class="token punctuation">)</span></span>
<span class="line">p <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> Person<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;Fred&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> says, Yubba dubba doo&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> Person<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;Bam Bam&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> says, Bam bam!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Watch the Flintstones!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 作为方法体</span></span>
<span class="line"><span class="token keyword">def</span> getClassAsString<span class="token punctuation">(</span>x<span class="token operator">:</span> Matchable<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> x <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> s<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;&#39;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">s</span></span><span class="token string">&#39; is a String&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> i<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;Int&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> d<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;Double&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> l<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token operator">?</span><span class="token punctuation">]</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;List&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token string">&quot;Unknown&quot;</span></span>
<span class="line">getClassAsString<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">getClassAsString<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span></span>
<span class="line">getClassAsString<span class="token punctuation">(</span>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 将匹配的值绑定到变量</span></span>
<span class="line"><span class="token keyword">trait</span> Animal<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">val</span> name<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Cat<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Animal<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> meow<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;Meow&quot;</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Dog<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Animal<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> bark<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;Bark&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> speak<span class="token punctuation">(</span>animal<span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token operator">=</span> animal <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> c @ Cat<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;Felix&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> says, </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">c<span class="token punctuation">.</span>meow</span><span class="token punctuation">}</span></span><span class="token string">!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> d @ Dog<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;Rex&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> says, </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">d<span class="token punctuation">.</span>bark</span><span class="token punctuation">}</span></span><span class="token string">!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;I don&#39;t know you!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">speak<span class="token punctuation">(</span>Cat<span class="token punctuation">(</span><span class="token string">&quot;Felix&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Felix says, Meow!&quot;</span></span>
<span class="line">speak<span class="token punctuation">(</span>Dog<span class="token punctuation">(</span><span class="token string">&quot;Rex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// &quot;Rex says, Bark!&quot;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">def</span> pattern<span class="token punctuation">(</span>x<span class="token operator">:</span> Matchable<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> x <span class="token keyword">match</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// constant patterns</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token number">0</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;zero&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token boolean">true</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;true&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token string">&quot;hello&quot;</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;you said &#39;hello&#39;&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> Nil <span class="token keyword">=&gt;</span> <span class="token string">&quot;an empty List&quot;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// sequence patterns</span></span>
<span class="line">  <span class="token keyword">case</span> List<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> _<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;a 3-element list with 0 as the first element&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> _<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;list, starts with 1, has any number of elements&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> Vector<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> _<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;vector, starts w/ 1, has any number of elements&quot;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// tuple patterns</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">a</span></span><span class="token string"> and </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">b</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">a</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">b</span></span><span class="token string">, and </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">c</span></span><span class="token string">&quot;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// constructor patterns</span></span>
<span class="line">  <span class="token keyword">case</span> Person<span class="token punctuation">(</span>first<span class="token punctuation">,</span> <span class="token string">&quot;Alexander&quot;</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Alexander, first name = </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">first</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> Dog<span class="token punctuation">(</span><span class="token string">&quot;Zeus&quot;</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;found a dog named Zeus&quot;</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// type test patterns</span></span>
<span class="line">  <span class="token keyword">case</span> s<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got a string: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">s</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> i<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got an int: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> f<span class="token operator">:</span> <span class="token builtin">Float</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got a float: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">f</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> a<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;array of int: </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">a<span class="token punctuation">.</span>mkString<span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> as<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;string array: </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">as<span class="token punctuation">.</span>mkString<span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> d<span class="token operator">:</span> Dog <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;dog: </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">d<span class="token punctuation">.</span>name</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> list<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token operator">?</span><span class="token punctuation">]</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;got a List: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">list</span></span><span class="token string">&quot;</span></span></span>
<span class="line">  <span class="token keyword">case</span> m<span class="token operator">:</span> Map<span class="token punctuation">[</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">]</span> <span class="token keyword">=&gt;</span> m<span class="token punctuation">.</span>toString</span>
<span class="line"></span>
<span class="line">  <span class="token comment">// the default wildcard pattern</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token string">&quot;Unknown&quot;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>仅 Scala 3 支持</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 链式匹配</span></span>
<span class="line">i <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> odd<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token keyword">if</span> odd <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;odd&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> even<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token keyword">if</span> even <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;even&quot;</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token string">&quot;not an integer&quot;</span></span>
<span class="line"><span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token string">&quot;even&quot;</span> <span class="token keyword">=&gt;</span> <span class="token boolean">true</span></span>
<span class="line">  <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 属性 match</span></span>
<span class="line">List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span>map<span class="token punctuation">(</span>_ <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span>headOption</span>
<span class="line">  <span class="token punctuation">.</span><span class="token keyword">match</span></span>
<span class="line">    <span class="token keyword">case</span> Some<span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;The head is: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">value</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">case</span> None <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;The list is empty&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="try-catch-finally" tabindex="-1"><a class="header-anchor" href="#try-catch-finally"><span>try/catch/finally</span></a></h3><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-663-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-663-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-663-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">  writeTextToFile<span class="token punctuation">(</span>text<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> ioe<span class="token operator">:</span> IOException <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Got an IOException.&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> nfe<span class="token operator">:</span> NumberFormatException <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Got a NumberFormatException.&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;Clean up your resources here.&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><!--]--></div><div class="vp-tab" id="tab-663-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><p>相比 Scala2，省略了 match 后的 <code>{}</code></p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">try</span></span>
<span class="line">  writeTextToFile<span class="token punctuation">(</span>text<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">catch</span></span>
<span class="line">  <span class="token keyword">case</span> ioe<span class="token operator">:</span> IOException <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Got an IOException.&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> nfe<span class="token operator">:</span> NumberFormatException <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Got a NumberFormatException.&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">finally</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;Clean up your resources here.&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p></p><!--]--></div><!--]--></div><h2 id="domain-modeling" tabindex="-1"><a class="header-anchor" href="#domain-modeling"><span>Domain Modeling</span></a></h2><h3 id="tools" tabindex="-1"><a class="header-anchor" href="#tools"><span>Tools</span></a></h3><p>Scala 提供了许多结构，以便进行建模。</p><ul><li>Class</li><li>Object</li><li>Companion Object</li><li>Trait</li><li>Abstract Class</li><li>Enum（<strong>仅Scala 3</strong>）</li><li>Case Class</li><li>Case Object</li></ul><h4 id="class" tabindex="-1"><a class="header-anchor" href="#class"><span>Class</span></a></h4><p>定义一个 <code>Class</code> 的语法，<code>var</code> 表示属性可变的，使用 <code>val</code> 表示属性仅可读。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Person<span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> vocation<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">class</span> Book<span class="token punctuation">(</span><span class="token keyword">var</span> title<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> author<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> year<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">class</span> Movie<span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> director<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> year<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-735-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-735-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-735-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> p <span class="token operator">=</span> <span class="token keyword">new</span> Person<span class="token punctuation">(</span><span class="token string">&quot;oycm&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Java Development&quot;</span><span class="token punctuation">)</span></span>
<span class="line">p<span class="token punctuation">.</span>name</span>
<span class="line">p<span class="token punctuation">.</span>vocation</span>
<span class="line"><span class="token comment">// 修改</span></span>
<span class="line">p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span></span>
<span class="line">p<span class="token punctuation">.</span>vocation <span class="token operator">=</span> <span class="token string">&quot;C++ Development&quot;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><!--]--></div><div class="vp-tab" id="tab-735-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> p <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;oycm&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Java Development&quot;</span><span class="token punctuation">)</span></span>
<span class="line">p<span class="token punctuation">.</span>name</span>
<span class="line">p<span class="token punctuation">.</span>vocation</span>
<span class="line"><span class="token comment">// 修改</span></span>
<span class="line">p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span></span>
<span class="line">p<span class="token punctuation">.</span>vocation <span class="token operator">=</span> <span class="token string">&quot;C++ Development&quot;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><p><strong>定义属性和方法</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-746-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-746-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-746-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Person<span class="token punctuation">(</span><span class="token keyword">var</span> firstName<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> lastName<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;initialization begins&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">val</span> fullName <span class="token operator">=</span> firstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> lastName</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> printFullName<span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">    println<span class="token punctuation">(</span>fullName<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  printFullName</span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;initialization ends&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-746-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Person<span class="token punctuation">(</span><span class="token keyword">var</span> firstName<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> lastName<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line"></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;initialization begins&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">val</span> fullName <span class="token operator">=</span> firstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> lastName</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> printFullName<span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">    println<span class="token punctuation">(</span>fullName<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  printFullName</span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;initialization ends&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p><strong>定义属性默认参数值</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-757-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-757-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-757-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Socket<span class="token punctuation">(</span><span class="token keyword">val</span> timeout<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token keyword">val</span> linger<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> toString <span class="token operator">=</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;timeout: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">timeout</span></span><span class="token string">, linger: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">linger</span></span><span class="token string">&quot;</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建对象的方式</span></span>
<span class="line"><span class="token keyword">val</span> s <span class="token operator">=</span> <span class="token keyword">new</span> Socket<span class="token punctuation">(</span><span class="token punctuation">)</span>                  <span class="token comment">// timeout: 5000, linger: 5000</span></span>
<span class="line"><span class="token keyword">val</span> s <span class="token operator">=</span> <span class="token keyword">new</span> Socket<span class="token punctuation">(</span><span class="token number">2500</span><span class="token punctuation">)</span>              <span class="token comment">// timeout: 2500, linger: 5000</span></span>
<span class="line"><span class="token keyword">val</span> s <span class="token operator">=</span> <span class="token keyword">new</span> Socket<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>      <span class="token comment">// timeout: 10000, linger: 10000</span></span>
<span class="line"><span class="token keyword">val</span> s <span class="token operator">=</span> <span class="token keyword">new</span> Socket<span class="token punctuation">(</span>timeout <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">)</span>   <span class="token comment">// timeout: 10000, linger: 5000</span></span>
<span class="line"><span class="token keyword">val</span> s <span class="token operator">=</span> <span class="token keyword">new</span> Socket<span class="token punctuation">(</span>linger <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">)</span>    <span class="token comment">// timeout: 5000, linger: 10000</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-757-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Socket<span class="token punctuation">(</span><span class="token keyword">val</span> timeout<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token keyword">val</span> linger<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> toString <span class="token operator">=</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;timeout: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">timeout</span></span><span class="token string">, linger: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">linger</span></span><span class="token string">&quot;</span></span></span>
<span class="line"><span class="token comment">// 创建对象的方式</span></span>
<span class="line"><span class="token keyword">val</span> s <span class="token operator">=</span> Socket<span class="token punctuation">(</span><span class="token punctuation">)</span>                  <span class="token comment">// timeout: 5000, linger: 5000</span></span>
<span class="line"><span class="token keyword">val</span> s <span class="token operator">=</span> Socket<span class="token punctuation">(</span><span class="token number">2500</span><span class="token punctuation">)</span>              <span class="token comment">// timeout: 2500, linger: 5000</span></span>
<span class="line"><span class="token keyword">val</span> s <span class="token operator">=</span> Socket<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>      <span class="token comment">// timeout: 10000, linger: 10000</span></span>
<span class="line"><span class="token keyword">val</span> s <span class="token operator">=</span> Socket<span class="token punctuation">(</span>timeout <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">)</span>   <span class="token comment">// timeout: 10000, linger: 5000</span></span>
<span class="line"><span class="token keyword">val</span> s <span class="token operator">=</span> Socket<span class="token punctuation">(</span>linger <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">)</span>    <span class="token comment">// timeout: 5000, linger: 10000</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><p><strong>多种构造方法</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-768-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-768-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-768-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span>_</span>
<span class="line"></span>
<span class="line"><span class="token comment">// 主要的构造方法</span></span>
<span class="line"><span class="token keyword">class</span> Student<span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">var</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">var</span> govtId<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line"><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">var</span> _applicationDate<span class="token operator">:</span> Option<span class="token punctuation">[</span>LocalDate<span class="token punctuation">]</span> <span class="token operator">=</span> None</span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">var</span> _studentId<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 构造方法, 也可以执行参数默认值</span></span>
<span class="line">  <span class="token keyword">def</span> <span class="token keyword">this</span><span class="token punctuation">(</span></span>
<span class="line">    name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">    govtId<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">    applicationDate<span class="token operator">:</span> LocalDate</span>
<span class="line">  <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> govtId<span class="token punctuation">)</span></span>
<span class="line">    _applicationDate <span class="token operator">=</span> Some<span class="token punctuation">(</span>applicationDate<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> <span class="token keyword">this</span><span class="token punctuation">(</span></span>
<span class="line">    name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">    govtId<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">    studentId<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line">  <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> govtId<span class="token punctuation">)</span></span>
<span class="line">    _studentId <span class="token operator">=</span> studentId</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-768-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token operator">*</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// [1] the primary constructor</span></span>
<span class="line"><span class="token keyword">class</span> Student<span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">var</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">var</span> govtId<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">var</span> _applicationDate<span class="token operator">:</span> Option<span class="token punctuation">[</span>LocalDate<span class="token punctuation">]</span> <span class="token operator">=</span> None</span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">var</span> _studentId<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// [2] a constructor for when the student has completed</span></span>
<span class="line">  <span class="token comment">// their application</span></span>
<span class="line">  <span class="token keyword">def</span> <span class="token keyword">this</span><span class="token punctuation">(</span></span>
<span class="line">    name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">    govtId<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">    applicationDate<span class="token operator">:</span> LocalDate</span>
<span class="line">  <span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> govtId<span class="token punctuation">)</span></span>
<span class="line">    _applicationDate <span class="token operator">=</span> Some<span class="token punctuation">(</span>applicationDate<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// [3] a constructor for when the student is approved</span></span>
<span class="line">  <span class="token comment">// and now has a student id</span></span>
<span class="line">  <span class="token keyword">def</span> <span class="token keyword">this</span><span class="token punctuation">(</span></span>
<span class="line">    name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">    govtId<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">    studentId<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line">  <span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> govtId<span class="token punctuation">)</span></span>
<span class="line">    _studentId <span class="token operator">=</span> studentId</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h4 id="object" tabindex="-1"><a class="header-anchor" href="#object"><span>Object</span></a></h4><p>Object 是只有一个实例的类。在访问其成员时才进行初始化。</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-782-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-782-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-782-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">object</span> StringUtils <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> truncate<span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> s<span class="token punctuation">.</span>take<span class="token punctuation">(</span>length<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> containsWhitespace<span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Boolean</span> <span class="token operator">=</span> s<span class="token punctuation">.</span>matches<span class="token punctuation">(</span><span class="token string">&quot;.*\\s.*&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> isNullOrEmpty<span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Boolean</span> <span class="token operator">=</span> s <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> s<span class="token punctuation">.</span>trim<span class="token punctuation">.</span>isEmpty</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用方式</span></span>
<span class="line">StringUtils<span class="token punctuation">.</span>truncate<span class="token punctuation">(</span><span class="token string">&quot;Chuck Bartowski&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 导入所有成员使用</span></span>
<span class="line"><span class="token keyword">import</span> StringUtils<span class="token punctuation">.</span>_</span>
<span class="line">truncate<span class="token punctuation">(</span><span class="token string">&quot;Chuck Bartowski&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>       <span class="token comment">// &quot;Chuck&quot;</span></span>
<span class="line">containsWhitespace<span class="token punctuation">(</span><span class="token string">&quot;Sarah Walker&quot;</span><span class="token punctuation">)</span>   <span class="token comment">// true</span></span>
<span class="line">isNullOrEmpty<span class="token punctuation">(</span><span class="token string">&quot;John Casey&quot;</span><span class="token punctuation">)</span>          <span class="token comment">// false</span></span>
<span class="line"><span class="token comment">// 导入指定的成员使用</span></span>
<span class="line"><span class="token keyword">import</span> StringUtils<span class="token punctuation">.</span><span class="token punctuation">{</span>truncate<span class="token punctuation">,</span> containsWhitespace<span class="token punctuation">}</span></span>
<span class="line">truncate<span class="token punctuation">(</span><span class="token string">&quot;Charles Carmichael&quot;</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>       <span class="token comment">// &quot;Charles&quot;</span></span>
<span class="line">containsWhitespace<span class="token punctuation">(</span><span class="token string">&quot;Captain Awesome&quot;</span><span class="token punctuation">)</span>   <span class="token comment">// true</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 访问属性</span></span>
<span class="line"><span class="token keyword">object</span> MathConstants <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> PI <span class="token operator">=</span> <span class="token number">3.14159</span></span>
<span class="line">  <span class="token keyword">val</span> E <span class="token operator">=</span> <span class="token number">2.71828</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">println<span class="token punctuation">(</span>MathConstants<span class="token punctuation">.</span>PI<span class="token punctuation">)</span>   <span class="token comment">// 3.14159</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-782-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">object</span> StringUtils<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> truncate<span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> s<span class="token punctuation">.</span>take<span class="token punctuation">(</span>length<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> containsWhitespace<span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Boolean</span> <span class="token operator">=</span> s<span class="token punctuation">.</span>matches<span class="token punctuation">(</span><span class="token string">&quot;.*\\s.*&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> isNullOrEmpty<span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Boolean</span> <span class="token operator">=</span> s <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> s<span class="token punctuation">.</span>trim<span class="token punctuation">.</span>isEmpty</span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用方式</span></span>
<span class="line">StringUtils<span class="token punctuation">.</span>truncate<span class="token punctuation">(</span><span class="token string">&quot;Chuck Bartowski&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 导入所有成员使用</span></span>
<span class="line"><span class="token keyword">import</span> StringUtils<span class="token punctuation">.</span>*</span>
<span class="line">truncate<span class="token punctuation">(</span><span class="token string">&quot;Chuck Bartowski&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>       <span class="token comment">// &quot;Chuck&quot;</span></span>
<span class="line">containsWhitespace<span class="token punctuation">(</span><span class="token string">&quot;Sarah Walker&quot;</span><span class="token punctuation">)</span>   <span class="token comment">// true</span></span>
<span class="line">isNullOrEmpty<span class="token punctuation">(</span><span class="token string">&quot;John Casey&quot;</span><span class="token punctuation">)</span>          <span class="token comment">// false</span></span>
<span class="line"><span class="token comment">// 导入指定的成员使用</span></span>
<span class="line"><span class="token keyword">import</span> StringUtils<span class="token punctuation">.</span><span class="token punctuation">{</span>truncate<span class="token punctuation">,</span> containsWhitespace<span class="token punctuation">}</span></span>
<span class="line">truncate<span class="token punctuation">(</span><span class="token string">&quot;Charles Carmichael&quot;</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>       <span class="token comment">// &quot;Charles&quot;</span></span>
<span class="line">containsWhitespace<span class="token punctuation">(</span><span class="token string">&quot;Captain Awesome&quot;</span><span class="token punctuation">)</span>   <span class="token comment">// true</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 访问属性</span></span>
<span class="line"><span class="token keyword">object</span> MathConstants<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">val</span> PI <span class="token operator">=</span> <span class="token number">3.14159</span></span>
<span class="line">  <span class="token keyword">val</span> E <span class="token operator">=</span> <span class="token number">2.71828</span></span>
<span class="line"></span>
<span class="line">println<span class="token punctuation">(</span>MathConstants<span class="token punctuation">.</span>PI<span class="token punctuation">)</span>   <span class="token comment">// 3.14159</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h4 id="companion-object" tabindex="-1"><a class="header-anchor" href="#companion-object"><span>Companion Object</span></a></h4><p>在声明一个类的文件中，还有一个 Object 类，两个类的名称一致。class 类能访问 object 类私有的成员。</p><p>Companion Object 对象用法：</p><ul><li>一个命名空间下的静态方法组</li><li><code>apply</code> 方法，构建对象的工厂模式。<strong>调用该方法可以省略方法名</strong>。</li><li><code>unapply</code>，结构对象，用于匹配模式。<a href="https://docs.scala-lang.org/scala3/reference/changed-features/pattern-matching.html" target="_blank" rel="noopener noreferrer">使用介绍</a></li></ul><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-816-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-816-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-816-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 为了导入 Pi, pow</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span>_</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> Circle<span class="token punctuation">(</span><span class="token keyword">val</span> radius<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> Circle<span class="token punctuation">.</span>calculateArea<span class="token punctuation">(</span>radius<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> Circle <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">def</span> calculateArea<span class="token punctuation">(</span>radius<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> Pi <span class="token operator">*</span> pow<span class="token punctuation">(</span>radius<span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> circle1 <span class="token operator">=</span> <span class="token keyword">new</span> Circle<span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">)</span></span>
<span class="line">circle1<span class="token punctuation">.</span>area</span>
<span class="line"></span>
<span class="line"><span class="token comment">// apply 方法应用</span></span>
<span class="line"><span class="token keyword">class</span> Person <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">  <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> toString <span class="token operator">=</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">age</span></span><span class="token string"> years old&quot;</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> Person <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// factory method</span></span>
<span class="line">  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> Person</span>
<span class="line">    p<span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">    p</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> Person</span>
<span class="line">    p<span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">    p<span class="token punctuation">.</span>age <span class="token operator">=</span> age</span>
<span class="line">    p</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> joe <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> fred <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Fred&quot;</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-816-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 为了导入 Pi, pow</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token operator">*</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> Circle<span class="token punctuation">(</span><span class="token keyword">val</span> radius<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> Circle<span class="token punctuation">.</span>calculateArea<span class="token punctuation">(</span>radius<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> Circle<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">def</span> calculateArea<span class="token punctuation">(</span>radius<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> Pi <span class="token operator">*</span> pow<span class="token punctuation">(</span>radius<span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> circle1 <span class="token operator">=</span> Circle<span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">)</span></span>
<span class="line">circle1<span class="token punctuation">.</span>area</span>
<span class="line"></span>
<span class="line"><span class="token comment">// apply 方法应用</span></span>
<span class="line"><span class="token keyword">class</span> Person<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">  <span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> toString <span class="token operator">=</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">age</span></span><span class="token string"> years old&quot;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> Person<span class="token operator">:</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// factory method</span></span>
<span class="line">  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> Person <span class="token operator">=</span></span>
<span class="line">    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> Person</span>
<span class="line">    p<span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">    p</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> Person <span class="token operator">=</span></span>
<span class="line">    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> Person</span>
<span class="line">    p<span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">    p<span class="token punctuation">.</span>age <span class="token operator">=</span> age</span>
<span class="line">    p</span>
<span class="line"></span>
<span class="line">end Person</span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> joe <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> fred <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Fred&quot;</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h4 id="trait" tabindex="-1"><a class="header-anchor" href="#trait"><span>Trait</span></a></h4><p>类似 Java8 中的接口，有以下特征：</p><ul><li>抽象方法和属性</li><li>实例方法和属性</li></ul><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-842-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-842-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-842-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 作为接口，定义其它实现类的抽象成员</span></span>
<span class="line"><span class="token keyword">trait</span> Employee <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> id<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line">  <span class="token keyword">def</span> firstName<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">def</span> lastName<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 定义抽象成员+实例成员</span></span>
<span class="line"><span class="token keyword">trait</span> HasLegs <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> numLegs<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line">  <span class="token keyword">def</span> walk<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span></span>
<span class="line">  <span class="token keyword">def</span> stop<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Stopped walking&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">trait</span> HasTail <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> tailColor<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">def</span> wagTail<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Tail is wagging&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> stopTail<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Tail is stopped&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 类实现</span></span>
<span class="line"><span class="token keyword">class</span> IrishSetter<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> HasLegs <span class="token keyword">with</span> HasTail <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> numLegs <span class="token operator">=</span> <span class="token number">4</span></span>
<span class="line">  <span class="token keyword">val</span> tailColor <span class="token operator">=</span> <span class="token string">&quot;Red&quot;</span></span>
<span class="line">  <span class="token keyword">def</span> walk<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;I’m walking&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> toString <span class="token operator">=</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> is a Dog&quot;</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-842-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 作为接口，定义其它实现类的抽象成员</span></span>
<span class="line"><span class="token keyword">trait</span> Employee<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> id<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line">  <span class="token keyword">def</span> firstName<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">def</span> lastName<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 定义抽象成员+实例成员</span></span>
<span class="line"><span class="token keyword">trait</span> HasLegs<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> numLegs<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line">  <span class="token keyword">def</span> walk<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span></span>
<span class="line">  <span class="token keyword">def</span> stop<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Stopped walking&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">trait</span> HasTail<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> tailColor<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">def</span> wagTail<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Tail is wagging&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> stopTail<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Tail is stopped&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 类实现</span></span>
<span class="line"><span class="token keyword">class</span> IrishSetter<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> HasLegs<span class="token punctuation">,</span> HasTail<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">val</span> numLegs <span class="token operator">=</span> <span class="token number">4</span></span>
<span class="line">  <span class="token keyword">val</span> tailColor <span class="token operator">=</span> <span class="token string">&quot;Red&quot;</span></span>
<span class="line">  <span class="token keyword">def</span> walk<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;I’m walking&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> toString <span class="token operator">=</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> is a Dog&quot;</span></span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h4 id="abstract-class" tabindex="-1"><a class="header-anchor" href="#abstract-class"><span>Abstract Class</span></a></h4><p>一个类需要有抽象成员，可以定义 Trait 或 Abstract 类。大多数情况下使用 Trait 类，两种情况下使用 Abstract 类：</p><ul><li>使用构造方法参数创建对象</li><li>代码将会被 java 使用</li></ul><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-868-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-868-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-868-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> Pet<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> greeting<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">def</span> age<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> toString <span class="token operator">=</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;My name is </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">, I say </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">greeting</span></span><span class="token string">, and I’m </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">age</span></span><span class="token string">&quot;</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> Dog<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> age<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Pet<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> greeting <span class="token operator">=</span> <span class="token string">&quot;Woof&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> d <span class="token operator">=</span> <span class="token keyword">new</span> Dog<span class="token punctuation">(</span><span class="token string">&quot;Fido&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-868-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> Pet<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> greeting<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">def</span> age<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> toString <span class="token operator">=</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;My name is </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">, I say </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">greeting</span></span><span class="token string">, and I’m </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">age</span></span><span class="token string">&quot;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> Dog<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> age<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Pet<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">val</span> greeting <span class="token operator">=</span> <span class="token string">&quot;Woof&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> d <span class="token operator">=</span> Dog<span class="token punctuation">(</span><span class="token string">&quot;Fido&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>在 Scala 3中，Trait 也可以携带参数</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> Pet<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> greeting<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">def</span> age<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> toString <span class="token operator">=</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;My name is </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">, I say </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">greeting</span></span><span class="token string">, and I’m </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">age</span></span><span class="token string">&quot;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> Dog<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> age<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Pet<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">val</span> greeting <span class="token operator">=</span> <span class="token string">&quot;Woof&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> d <span class="token operator">=</span> Dog<span class="token punctuation">(</span><span class="token string">&quot;Fido&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h4 id="enum-scala-3" tabindex="-1"><a class="header-anchor" href="#enum-scala-3"><span>Enum(Scala 3)</span></a></h4><p>enum 用于定义一组有限命名值组成的类型。</p><p>用于定义 披萨特征的枚举：</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">enum</span> CrustSize<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Small<span class="token punctuation">,</span> Medium<span class="token punctuation">,</span> Large</span>
<span class="line"><span class="token comment">// 相当于下面的简写</span></span>
<span class="line"><span class="token keyword">enum</span> CrustSize<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Small <span class="token keyword">extends</span> CrustSize</span>
<span class="line">  <span class="token keyword">case</span> Medium <span class="token keyword">extends</span> CrustSize</span>
<span class="line">  <span class="token keyword">case</span> Large <span class="token keyword">extends</span> CrustSize</span>
<span class="line"></span>
<span class="line"><span class="token keyword">enum</span> CrustType<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Thin<span class="token punctuation">,</span> Thick<span class="token punctuation">,</span> Regular</span>
<span class="line"></span>
<span class="line"><span class="token keyword">enum</span> Topping<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Cheese<span class="token punctuation">,</span> Pepperoni<span class="token punctuation">,</span> BlackOlives<span class="token punctuation">,</span> GreenOlives<span class="token punctuation">,</span> Onions</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>枚举的特征：属性和方法</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">enum</span> Color<span class="token punctuation">(</span><span class="token keyword">val</span> rgb<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Red   <span class="token keyword">extends</span> Color<span class="token punctuation">(</span><span class="token number">0xFF0000</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> Green <span class="token keyword">extends</span> Color<span class="token punctuation">(</span><span class="token number">0x00FF00</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> Blue  <span class="token keyword">extends</span> Color<span class="token punctuation">(</span><span class="token number">0x0000FF</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">enum</span> Planet<span class="token punctuation">(</span>mass<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> radius<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">val</span> G <span class="token operator">=</span> <span class="token number">6.67300</span>E<span class="token operator">-</span><span class="token number">11</span></span>
<span class="line">  <span class="token keyword">def</span> surfaceGravity <span class="token operator">=</span> G <span class="token operator">*</span> mass <span class="token operator">/</span> <span class="token punctuation">(</span>radius <span class="token operator">*</span> radius<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> surfaceWeight<span class="token punctuation">(</span>otherMass<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line">    otherMass <span class="token operator">*</span> surfaceGravity</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">case</span> Mercury <span class="token keyword">extends</span> Planet<span class="token punctuation">(</span><span class="token number">3.303</span>e<span class="token operator">+</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">2.4397e6</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> Earth   <span class="token keyword">extends</span> Planet<span class="token punctuation">(</span><span class="token number">5.976</span>e<span class="token operator">+</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">6.37814e6</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Scala 枚举应用到 Java：继承 java.lang.Enum</strong></p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">enum</span> Color <span class="token keyword">extends</span> Enum<span class="token punctuation">[</span>Color<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token keyword">case</span> Red<span class="token punctuation">,</span> Green<span class="token punctuation">,</span> Blue <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h4 id="case-class" tabindex="-1"><a class="header-anchor" href="#case-class"><span>Case Class</span></a></h4><p><code>case class</code> 定义类的属性都是不可变的。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Person<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> relation<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> christina <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Christina&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;niece&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>由于 case 字段的不可变性，Scala 编译器为该类生成了许多方法：</p><ul><li><code>unapply</code> 方法，可以直接用于匹配模式，<code>case Person(n, r) =&gt; ...)</code></li><li><code>copy </code> 方法创建实例的修改副本</li><li>重写 <code>equals</code> 和 <code>hashcode</code> 方法</li><li>生成默认的 <code>toString</code> 方法</li></ul><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-930-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-930-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-930-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// match 匹配模式</span></span>
<span class="line">christina <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> Person<span class="token punctuation">(</span>n<span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;name is &quot;</span> <span class="token operator">+</span> n<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 重写 equals 和 hashcode 方法</span></span>
<span class="line"><span class="token keyword">val</span> hannah <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Christina&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;niece&quot;</span><span class="token punctuation">)</span></span>
<span class="line">christina <span class="token operator">==</span> hannah       <span class="token comment">// true</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 默认 toString 方法</span></span>
<span class="line">println<span class="token punctuation">(</span>christina<span class="token punctuation">)</span>        <span class="token comment">// Person(Christina,niece)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// copy</span></span>
<span class="line"><span class="token keyword">val</span> o <span class="token operator">=</span> hannah<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;oycm&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-930-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line">christina <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> Person<span class="token punctuation">(</span>n<span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;name is &quot;</span> <span class="token operator">+</span> n<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> hannah <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Christina&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;niece&quot;</span><span class="token punctuation">)</span></span>
<span class="line">christina <span class="token operator">==</span> hannah       <span class="token comment">// true</span></span>
<span class="line"></span>
<span class="line">println<span class="token punctuation">(</span>christina<span class="token punctuation">)</span>        <span class="token comment">// Person(Christina,niece)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// copy</span></span>
<span class="line"><span class="token keyword">val</span> o <span class="token operator">=</span> hannah<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;oycm&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h4 id="case-object" tabindex="-1"><a class="header-anchor" href="#case-object"><span>Case Object</span></a></h4><p><code>case object</code> 就像 <code>object</code> 类，像 <code>case class</code> 比 <code>class</code> 类多一些特点。<code>case object</code> 有以下特点：</p><ul><li>可序列化</li><li>有默认的 <code>hashCode</code> 实现</li><li><code>toString</code> 实现</li><li>用于创建枚举</li><li>不能有构造方法参数</li><li>用于传递不可变的消息</li></ul><p><strong>定义消息的类型</strong></p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">sealed</span> <span class="token keyword">trait</span> Message</span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> PlaySong<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Message</span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> IncreaseVolume<span class="token punctuation">(</span>amount<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Message</span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> DecreaseVolume<span class="token punctuation">(</span>amount<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Message</span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">object</span> StopPlaying <span class="token keyword">extends</span> Message</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-980-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-980-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-980-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">def</span> handleMessages<span class="token punctuation">(</span>message<span class="token operator">:</span> Message<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> message <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> PlaySong<span class="token punctuation">(</span>name<span class="token punctuation">)</span>         <span class="token keyword">=&gt;</span> playSong<span class="token punctuation">(</span>name<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> IncreaseVolume<span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> changeVolume<span class="token punctuation">(</span>amount<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> DecreaseVolume<span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> changeVolume<span class="token punctuation">(</span><span class="token operator">-</span>amount<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> StopPlaying            <span class="token keyword">=&gt;</span> stopPlayingSong<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><!--]--></div><div class="vp-tab" id="tab-980-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">def</span> handleMessages<span class="token punctuation">(</span>message<span class="token operator">:</span> Message<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> message <span class="token keyword">match</span></span>
<span class="line">  <span class="token keyword">case</span> PlaySong<span class="token punctuation">(</span>name<span class="token punctuation">)</span>         <span class="token keyword">=&gt;</span> playSong<span class="token punctuation">(</span>name<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> IncreaseVolume<span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> changeVolume<span class="token punctuation">(</span>amount<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> DecreaseVolume<span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> changeVolume<span class="token punctuation">(</span><span class="token operator">-</span>amount<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">case</span> StopPlaying            <span class="token keyword">=&gt;</span> stopPlayingSong<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><h3 id="oop-modeling" tabindex="-1"><a class="header-anchor" href="#oop-modeling"><span>OOP Modeling</span></a></h3><p>OOP 主要使用 <code>trait</code> 和 <code>class</code> 关键字。</p><p><code>traid</code>：可以用作简单的 <code>interface</code> ，但它可以包含抽象的和具体的方法和属性。</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-997-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-997-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-997-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> Speaker <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> speak<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">trait</span> TailWagger <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> startTail<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;tail is wagging&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> stopTail<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;tail is stopped&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">trait</span> Runner <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> startRunning<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;I’m running&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> stopRunning<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Stopped running&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 继承 trait</span></span>
<span class="line"><span class="token keyword">class</span> Dog<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Speaker <span class="token keyword">with</span> TailWagger <span class="token keyword">with</span> Runner <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> speak<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;Woof!&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> Cat<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Speaker <span class="token keyword">with</span> TailWagger <span class="token keyword">with</span> Runner <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> speak<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;Meow&quot;</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> startRunning<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Yeah ... I don’t run&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> stopRunning<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;No need to stop&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-997-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> Speaker<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> speak<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">trait</span> TailWagger<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> startTail<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;tail is wagging&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> stopTail<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;tail is stopped&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">trait</span> Runner<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> startRunning<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;I’m running&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> stopRunning<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Stopped running&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 继承 trait</span></span>
<span class="line"><span class="token keyword">class</span> Dog<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Speaker<span class="token punctuation">,</span> TailWagger<span class="token punctuation">,</span> Runner<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> speak<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;Woof!&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> Cat<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Speaker<span class="token punctuation">,</span> TailWagger<span class="token punctuation">,</span> Runner<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> speak<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;Meow&quot;</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> startRunning<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Yeah ... I don’t run&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">def</span> stopRunning<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;No need to stop&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><!--]--></div><!--]--></div><p><code>class</code>：</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1011-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1011-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-1011-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Person<span class="token punctuation">(</span><span class="token keyword">var</span> firstName<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> lastName<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> printFullName<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">firstName</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">lastName</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> p <span class="token operator">=</span> <span class="token keyword">new</span> Person<span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Stephens&quot;</span><span class="token punctuation">)</span></span>
<span class="line">println<span class="token punctuation">(</span>p<span class="token punctuation">.</span>firstName<span class="token punctuation">)</span></span>
<span class="line">p<span class="token punctuation">.</span>lastName <span class="token operator">=</span> <span class="token string">&quot;Legend&quot;</span></span>
<span class="line">p<span class="token punctuation">.</span>printFullName<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> p <span class="token operator">=</span> <span class="token keyword">new</span> Person<span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Stephens&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><!--]--></div><div class="vp-tab" id="tab-1011-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Person<span class="token punctuation">(</span><span class="token keyword">var</span> firstName<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token keyword">var</span> lastName<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> printFullName<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">firstName</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">lastName</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> p <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Stephens&quot;</span><span class="token punctuation">)</span></span>
<span class="line">println<span class="token punctuation">(</span>p<span class="token punctuation">.</span>firstName<span class="token punctuation">)</span></span>
<span class="line">p<span class="token punctuation">.</span>lastName <span class="token operator">=</span> <span class="token string">&quot;Legend&quot;</span></span>
<span class="line">p<span class="token punctuation">.</span>printFullName<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> p <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Stephens&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><!--]--></div><!--]--></div><h4 id="trait-1" tabindex="-1"><a class="header-anchor" href="#trait-1"><span>Trait</span></a></h4><p>Scala 中用 <code>trait</code> 来分解具体。</p><ul><li>抽象成员要求子类必须实现</li><li>实例成员可以提供给子类使用</li><li>抽象方法 <code>def m(): T</code></li><li>抽象属性 <code>val x: T</code></li><li>泛型抽象属性 <code>type T</code>，边界泛型 <code>type T &lt;: S</code></li><li><strong>Scala 3</strong>：给的抽象类型 <code>given t: T</code></li></ul><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1063-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1063-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-1063-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> Showable <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> show<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">def</span> showHtml <span class="token operator">=</span> <span class="token string">&quot;&lt;p&gt;&quot;</span> <span class="token operator">+</span> show <span class="token operator">+</span> <span class="token string">&quot;&lt;/p&gt;&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// Document 继承 Showable</span></span>
<span class="line"><span class="token keyword">class</span> Document<span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Showable <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> show <span class="token operator">=</span> text</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><!--]--></div><div class="vp-tab" id="tab-1063-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> Showable<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> show<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">def</span> showHtml <span class="token operator">=</span> <span class="token string">&quot;&lt;p&gt;&quot;</span> <span class="token operator">+</span> show <span class="token operator">+</span> <span class="token string">&quot;&lt;/p&gt;&quot;</span></span>
<span class="line"><span class="token comment">// Document 继承 Showable</span></span>
<span class="line"><span class="token keyword">class</span> Document<span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Showable<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> show <span class="token operator">=</span> text</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><h4 id="mixin-composition" tabindex="-1"><a class="header-anchor" href="#mixin-composition"><span>Mixin Composition</span></a></h4><p>Scala 的 <code>trait</code> 不仅支持抽象和具体的定义，还支持组合多个 <code>trait</code>，这称为 <code>Mixin Composition</code>。</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1077-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1077-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-1077-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> GreetingService <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> translate<span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">def</span> sayHello <span class="token operator">=</span> translate<span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">trait</span> TranslationService <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> translate<span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;...&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// ComposedService 组合了 2 个 trait</span></span>
<span class="line"><span class="token keyword">trait</span> ComposedService <span class="token keyword">extends</span> GreetingService <span class="token keyword">with</span> TranslationService</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-1077-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> GreetingService<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> translate<span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line">  <span class="token keyword">def</span> sayHello <span class="token operator">=</span> translate<span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">trait</span> TranslationService<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">def</span> translate<span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;...&quot;</span></span>
<span class="line"><span class="token comment">// ComposedService 组合了 2 个 trait</span></span>
<span class="line"><span class="token keyword">trait</span> ComposedService <span class="token keyword">extends</span> GreetingService<span class="token punctuation">,</span> TranslationService</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><h4 id="class-1" tabindex="-1"><a class="header-anchor" href="#class-1"><span>Class</span></a></h4><p><code>class</code> 与 <code>trait</code> 一样，可以 <code>extends</code> 多个 <code>trait</code>，但是只能由一个 <code>super class</code>。</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1091-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1091-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-1091-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><table><thead><tr><th>class</th><th>语法</th></tr></thead><tbody><tr><td>trait</td><td>trait T1, trait T2, trait T3</td></tr><tr><td>Composition trait</td><td>S1 extends T1 with T2 with ...</td></tr><tr><td>class</td><td>C extends S1 with T2 with ...</td></tr><tr><td>实例</td><td>new C()</td></tr><tr><td>实例</td><td>new C() with T3</td></tr></tbody></table><!--]--></div><div class="vp-tab" id="tab-1091-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><p><strong>支持 open class</strong></p><table><thead><tr><th>class</th><th>语法</th></tr></thead><tbody><tr><td>trait</td><td>trait T1, trait T2, trait T3</td></tr><tr><td>Composition trait</td><td>S1 extends T1, T2, ...</td></tr><tr><td>class</td><td>C extends S1, T2, ...</td></tr><tr><td>实例</td><td>C()</td></tr></tbody></table><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 仅 Scala 3 支持</span></span>
<span class="line"><span class="token keyword">open</span> <span class="token keyword">class</span> Person<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><h4 id="access-modifier" tabindex="-1"><a class="header-anchor" href="#access-modifier"><span>Access Modifier</span></a></h4><p>在 Scala 中，默认所有的成员定义都是 <code>public</code>。要隐藏具体的定义，可以使用 <code>private</code> 或 <code>protected</code> 修饰成员(method, field, type)。<code>private</code> 成员仅对 <code>class/trait</code> 自己可见，以及 <code>companion object</code> 可见。<code>protected</code> 对类的子类可见。</p><h4 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example</span></a></h4><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1210-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1210-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-1210-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> SubjectObserver <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">type</span> S <span class="token operator">&lt;</span><span class="token operator">:</span> Subject</span>
<span class="line">  <span class="token keyword">type</span> O <span class="token operator">&lt;</span><span class="token operator">:</span> Observer</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">trait</span> Subject <span class="token punctuation">{</span> <span class="token keyword">self</span><span class="token operator">:</span> S <span class="token keyword">=&gt;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> observers<span class="token operator">:</span> List<span class="token punctuation">[</span>O<span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> subscribe<span class="token punctuation">(</span>obs<span class="token operator">:</span> O<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      observers <span class="token operator">=</span> obs <span class="token operator">::</span> observers</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">def</span> publish<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">for</span> <span class="token punctuation">(</span> obs <span class="token keyword">&lt;-</span> observers <span class="token punctuation">)</span> obs<span class="token punctuation">.</span>notify<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">trait</span> Observer <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">def</span> notify<span class="token punctuation">(</span>sub<span class="token operator">:</span> S<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>SubjectObserver</code> 中定义了 2 个 <code>trait</code>：<code>Subject</code>，<code>Observer</code>。</p><p><code>type S &lt;: Subject</code> 表示上界，S 是 <code>Subject</code> 的子类。</p><p><code>self: S =&gt;</code> self 是 <code>this</code> 的别名(自引用)，附带一个类型约束，当使用 this 或 self，表示的静态类型是 <code>S</code>。必须是 <code>S</code> 的子类型。</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">object</span> SensorReader <span class="token keyword">extends</span> SubjectObserver <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">type</span> S <span class="token operator">=</span> Sensor</span>
<span class="line">  <span class="token keyword">type</span> O <span class="token operator">=</span> Display</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">class</span> Sensor<span class="token punctuation">(</span><span class="token keyword">val</span> label<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Subject <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> currentValue <span class="token operator">=</span> <span class="token number">0.0</span></span>
<span class="line">    <span class="token keyword">def</span> value <span class="token operator">=</span> currentValue</span>
<span class="line">    <span class="token keyword">def</span> changeValue<span class="token punctuation">(</span>v<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      currentValue <span class="token operator">=</span> v</span>
<span class="line">      publish<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">class</span> Display <span class="token keyword">extends</span> Observer <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">def</span> notify<span class="token punctuation">(</span>sub<span class="token operator">:</span> Sensor<span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line">      println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">sub<span class="token punctuation">.</span>label</span><span class="token punctuation">}</span></span><span class="token string"> has value </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">sub<span class="token punctuation">.</span>value</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>定义了一个单例类 <code>SensorReader</code>。</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">import</span> SensorReader<span class="token punctuation">.</span>_</span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> Sensor<span class="token punctuation">(</span><span class="token string">&quot;sensor1&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> Sensor<span class="token punctuation">(</span><span class="token string">&quot;sensor2&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> d1 <span class="token operator">=</span> <span class="token keyword">new</span> Display<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> d2 <span class="token operator">=</span> <span class="token keyword">new</span> Display<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">s1<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span>d1<span class="token punctuation">)</span></span>
<span class="line">s1<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span>d2<span class="token punctuation">)</span></span>
<span class="line">s2<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span>d1<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">s1<span class="token punctuation">.</span>changeValue<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">s2<span class="token punctuation">.</span>changeValue<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><!--]--></div><div class="vp-tab" id="tab-1210-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">trait</span> SubjectObserver<span class="token operator">:</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">type</span> S <span class="token operator">&lt;</span><span class="token operator">:</span> Subject</span>
<span class="line">  <span class="token keyword">type</span> O <span class="token operator">&lt;</span><span class="token operator">:</span> Observer</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">trait</span> Subject<span class="token operator">:</span></span>
<span class="line">    <span class="token keyword">self</span><span class="token operator">:</span> S <span class="token keyword">=&gt;</span></span>
<span class="line">      <span class="token keyword">private</span> <span class="token keyword">var</span> observers<span class="token operator">:</span> List<span class="token punctuation">[</span>O<span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">def</span> subscribe<span class="token punctuation">(</span>obs<span class="token operator">:</span> O<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">        observers <span class="token operator">=</span> obs <span class="token operator">::</span> observers</span>
<span class="line">      <span class="token keyword">def</span> publish<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line">        <span class="token keyword">for</span> obs <span class="token keyword">&lt;-</span> observers <span class="token keyword">do</span> obs<span class="token punctuation">.</span>notify<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">trait</span> Observer<span class="token operator">:</span></span>
<span class="line">    <span class="token keyword">def</span> notify<span class="token punctuation">(</span>sub<span class="token operator">:</span> S<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>SubjectObserver</code> 中定义了 2 个 <code>trait</code>：<code>Subject</code>，<code>Observer</code>。</p><p><code>type S &lt;: Subject</code> 表示上界，S 是 <code>Subject</code> 的子类。</p><p><code>self: S =&gt;</code> self 是 <code>this</code> 的别名(自引用)，附带一个类型约束，当使用 this 或 self，表示的静态类型是 <code>S</code>。必须是 <code>S</code> 的子类型。</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">object</span> SensorReader <span class="token keyword">extends</span> SubjectObserver<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">type</span> S <span class="token operator">=</span> Sensor</span>
<span class="line">  <span class="token keyword">type</span> O <span class="token operator">=</span> Display</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">class</span> Sensor<span class="token punctuation">(</span><span class="token keyword">val</span> label<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Subject<span class="token operator">:</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> currentValue <span class="token operator">=</span> <span class="token number">0.0</span></span>
<span class="line">    <span class="token keyword">def</span> value <span class="token operator">=</span> currentValue</span>
<span class="line">    <span class="token keyword">def</span> changeValue<span class="token punctuation">(</span>v<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line">      currentValue <span class="token operator">=</span> v</span>
<span class="line">      publish<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">class</span> Display <span class="token keyword">extends</span> Observer<span class="token operator">:</span></span>
<span class="line">    <span class="token keyword">def</span> notify<span class="token punctuation">(</span>sub<span class="token operator">:</span> Sensor<span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line">      println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">sub<span class="token punctuation">.</span>label</span><span class="token punctuation">}</span></span><span class="token string"> has value </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">sub<span class="token punctuation">.</span>value</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>定义了一个单例类 <code>SensorReader</code>。</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">import</span> SensorReader<span class="token punctuation">.</span>*</span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> s1 <span class="token operator">=</span> Sensor<span class="token punctuation">(</span><span class="token string">&quot;sensor1&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> s2 <span class="token operator">=</span> Sensor<span class="token punctuation">(</span><span class="token string">&quot;sensor2&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> d1 <span class="token operator">=</span> Display<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> d2 <span class="token operator">=</span> Display<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">s1<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span>d1<span class="token punctuation">)</span></span>
<span class="line">s1<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span>d2<span class="token punctuation">)</span></span>
<span class="line">s2<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span>d1<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">s1<span class="token punctuation">.</span>changeValue<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">s2<span class="token punctuation">.</span>changeValue<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="fp-modeling" tabindex="-1"><a class="header-anchor" href="#fp-modeling"><span>FP Modeling</span></a></h3><p>FP 编程，两个核心概念：</p><ul><li>代数数据类型(ADT Algebraic Data Types) 是一种构建数据模型的方式，核心思想是使用有限的组合规则定义复杂的数据结构。两类主要组合方式：和类型(Sum Type)、积类型(Product Type)。</li><li>数据本身只是结构，但往往需要在数据上定义行为/功能。</li></ul><p><strong>函数式方法指的是使用函数式编程(FP)的风格或特性来编写代码的方法。函数式编程是一种编程范式，它将计算视为数学函数的求值，并避免使用程序状态和可变数据。在函数式编程中，函数是一等公民，意味着函数可以作为参数传递，也可以作为返回值返回（HOF），并且常常使用不可变数据和无副作用的函数。函数式方法特点：</strong></p><ul><li>不可变性(Immutability)：数据一旦创建，就不能被改变。任何修改都会创建一个新的数据副本。</li><li>纯函数(Pure Functions)：函数的输出只依赖于输入，并且不会产生副作用（例如修改全局变量、修改输入参数等）。</li><li>高阶函数(Higher-order Functions)：函数可以作为参数传递给其他函数，也可以作为函数的返回值。</li><li>递归(Recursion)：用递归来代替循环，因为循环通常需要改变循环变量（状态）。</li><li>函数组合(Function Composition)：将多个函数组合成一个新的函数。</li></ul><h4 id="data-model" tabindex="-1"><a class="header-anchor" href="#data-model"><span>Data Model</span></a></h4><p><strong>sum type(和类型)</strong>：CrustSize、CrustType、Topping。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">enum</span> CrustSize<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Small<span class="token punctuation">,</span> Medium<span class="token punctuation">,</span> Large</span>
<span class="line"></span>
<span class="line"><span class="token keyword">enum</span> CrustType<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Thin<span class="token punctuation">,</span> Thick<span class="token punctuation">,</span> Regular</span>
<span class="line"></span>
<span class="line"><span class="token keyword">enum</span> Topping<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Cheese<span class="token punctuation">,</span> Pepperoni<span class="token punctuation">,</span> BlackOlives<span class="token punctuation">,</span> GreenOlives<span class="token punctuation">,</span> Onions</span>
<span class="line"></span></code></pre></div><p><strong>product type(积类型)</strong>：Pizza。</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">import</span> CrustSize<span class="token punctuation">.</span>*</span>
<span class="line"><span class="token keyword">import</span> CrustType<span class="token punctuation">.</span>*</span>
<span class="line"><span class="token keyword">import</span> Topping<span class="token punctuation">.</span>*</span>
<span class="line"></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Pizza<span class="token punctuation">(</span></span>
<span class="line">  <span class="token comment">// Pizza 大小</span></span>
<span class="line">  crustSize<span class="token operator">:</span> CrustSize<span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// Pizza 类型</span></span>
<span class="line">  crustType<span class="token operator">:</span> CrustType<span class="token punctuation">,</span></span>
<span class="line">  toppings<span class="token operator">:</span> Seq<span class="token punctuation">[</span>Topping<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 地址</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Address<span class="token punctuation">(</span></span>
<span class="line">  street1<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">  street2<span class="token operator">:</span> Option<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  city<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">  state<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">  zipCode<span class="token operator">:</span> <span class="token builtin">String</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 客户</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Customer<span class="token punctuation">(</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">  phone<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span></span>
<span class="line">  address<span class="token operator">:</span> Address</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 订单</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Order<span class="token punctuation">(</span></span>
<span class="line">  pizzas<span class="token operator">:</span> Seq<span class="token punctuation">[</span>Pizza<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  customer<span class="token operator">:</span> Customer</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="operation-model" tabindex="-1"><a class="header-anchor" href="#operation-model"><span>Operation Model</span></a></h4><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">def</span> pizzaPrice<span class="token punctuation">(</span>p<span class="token operator">:</span> Pizza<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> p <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> Pizza<span class="token punctuation">(</span>crustSize<span class="token punctuation">,</span> crustType<span class="token punctuation">,</span> toppings<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> base  <span class="token operator">=</span> <span class="token number">6.00</span></span>
<span class="line">    <span class="token keyword">val</span> crust <span class="token operator">=</span> crustPrice<span class="token punctuation">(</span>crustSize<span class="token punctuation">,</span> crustType<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">val</span> tops  <span class="token operator">=</span> toppings<span class="token punctuation">.</span>map<span class="token punctuation">(</span>toppingPrice<span class="token punctuation">)</span><span class="token punctuation">.</span>sum</span>
<span class="line">    base <span class="token operator">+</span> crust <span class="token operator">+</span> tops</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// Topping 的价格函数</span></span>
<span class="line"><span class="token keyword">def</span> toppingPrice<span class="token punctuation">(</span>t<span class="token operator">:</span> Topping<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> t <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> Cheese <span class="token operator">|</span> Onions <span class="token keyword">=&gt;</span> <span class="token number">0.5</span></span>
<span class="line">  <span class="token keyword">case</span> Pepperoni <span class="token operator">|</span> BlackOlives <span class="token operator">|</span> GreenOlives <span class="token keyword">=&gt;</span> <span class="token number">0.75</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 面包的价格</span></span>
<span class="line"><span class="token keyword">def</span> crustPrice<span class="token punctuation">(</span>s<span class="token operator">:</span> CrustSize<span class="token punctuation">,</span> t<span class="token operator">:</span> CrustType<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span></span>
<span class="line">  <span class="token punctuation">(</span>s<span class="token punctuation">,</span> t<span class="token punctuation">)</span> <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Small | Medium 大小, 任意大小固定</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">(</span>Small <span class="token operator">|</span> Medium<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token number">0.25</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">(</span>Large<span class="token punctuation">,</span> Thin<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token number">0.50</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">(</span>Large<span class="token punctuation">,</span> Regular<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token number">0.75</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">(</span>Large<span class="token punctuation">,</span> Thick<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token number">1.00</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="功能规划" tabindex="-1"><a class="header-anchor" href="#功能规划"><span>功能规划</span></a></h4><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Pizza<span class="token punctuation">(</span></span>
<span class="line">  crustSize<span class="token operator">:</span> CrustSize<span class="token punctuation">,</span></span>
<span class="line">  crustType<span class="token operator">:</span> CrustType<span class="token punctuation">,</span></span>
<span class="line">  toppings<span class="token operator">:</span> Seq<span class="token punctuation">[</span>Topping<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> Pizza <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> price<span class="token punctuation">(</span>p<span class="token operator">:</span> Pizza<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> p <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> Pizza<span class="token punctuation">(</span>crustSize<span class="token punctuation">,</span> crustType<span class="token punctuation">,</span> toppings<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> base  <span class="token operator">=</span> <span class="token number">6.00</span></span>
<span class="line">    <span class="token keyword">val</span> crust <span class="token operator">=</span> crustPrice<span class="token punctuation">(</span>crustSize<span class="token punctuation">,</span> crustType<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">val</span> tops  <span class="token operator">=</span> toppings<span class="token punctuation">.</span>map<span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">.</span>sum</span>
<span class="line">    base <span class="token operator">+</span> crust <span class="token operator">+</span> tops</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">sealed</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> Topping</span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> Topping <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Cheese <span class="token keyword">extends</span> Topping</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Pepperoni <span class="token keyword">extends</span> Topping</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> BlackOlives <span class="token keyword">extends</span> Topping</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> GreenOlives <span class="token keyword">extends</span> Topping</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">object</span> Onions <span class="token keyword">extends</span> Topping</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> price<span class="token punctuation">(</span>t<span class="token operator">:</span> Topping<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> </span>
<span class="line">    <span class="token punctuation">(</span>s<span class="token punctuation">,</span> t<span class="token punctuation">)</span> <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Small | Medium 大小, 任意大小固定</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">(</span>Small <span class="token operator">|</span> Medium<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token number">0.25</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">(</span>Large<span class="token punctuation">,</span> Thin<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token number">0.50</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">(</span>Large<span class="token punctuation">,</span> Regular<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token number">0.75</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">(</span>Large<span class="token punctuation">,</span> Thick<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token number">1.00</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="extension-method" tabindex="-1"><a class="header-anchor" href="#extension-method"><span>Extension Method</span></a></h4><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1320-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1320-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-1320-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Pizza<span class="token punctuation">(</span></span>
<span class="line">  crustSize<span class="token operator">:</span> CrustSize<span class="token punctuation">,</span></span>
<span class="line">  crustType<span class="token operator">:</span> CrustType<span class="token punctuation">,</span></span>
<span class="line">  toppings<span class="token operator">:</span> Seq<span class="token punctuation">[</span>Topping<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 隐式类</span></span>
<span class="line"><span class="token keyword">implicit</span> <span class="token keyword">class</span> PizzaOps<span class="token punctuation">(</span>p<span class="token operator">:</span> Pizza<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> price<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span></span>
<span class="line">    pizzaPrice<span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token comment">// implementation from above</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> addTopping<span class="token punctuation">(</span>t<span class="token operator">:</span> Topping<span class="token punctuation">)</span><span class="token operator">:</span> Pizza <span class="token operator">=</span></span>
<span class="line">    p<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>toppings <span class="token operator">=</span> p<span class="token punctuation">.</span>toppings <span class="token operator">:</span><span class="token operator">+</span> t<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> removeAllToppings<span class="token operator">:</span> Pizza <span class="token operator">=</span></span>
<span class="line">    p<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>toppings <span class="token operator">=</span> Seq<span class="token punctuation">.</span>empty<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> updateCrustSize<span class="token punctuation">(</span>cs<span class="token operator">:</span> CrustSize<span class="token punctuation">)</span><span class="token operator">:</span> Pizza <span class="token operator">=</span></span>
<span class="line">    p<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>crustSize <span class="token operator">=</span> cs<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> updateCrustType<span class="token punctuation">(</span>ct<span class="token operator">:</span> CrustType<span class="token punctuation">)</span><span class="token operator">:</span> Pizza <span class="token operator">=</span></span>
<span class="line">    p<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>crustType <span class="token operator">=</span> ct<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-1320-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Pizza<span class="token punctuation">(</span></span>
<span class="line">  crustSize<span class="token operator">:</span> CrustSize<span class="token punctuation">,</span></span>
<span class="line">  crustType<span class="token operator">:</span> CrustType<span class="token punctuation">,</span></span>
<span class="line">  toppings<span class="token operator">:</span> Seq<span class="token punctuation">[</span>Topping<span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">extension</span> <span class="token punctuation">(</span>p<span class="token operator">:</span> Pizza<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> price<span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span></span>
<span class="line">    pizzaPrice<span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token comment">// implementation from above</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> addTopping<span class="token punctuation">(</span>t<span class="token operator">:</span> Topping<span class="token punctuation">)</span><span class="token operator">:</span> Pizza <span class="token operator">=</span></span>
<span class="line">    p<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>toppings <span class="token operator">=</span> p<span class="token punctuation">.</span>toppings <span class="token operator">:</span><span class="token operator">+</span> t<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> removeAllToppings<span class="token operator">:</span> Pizza <span class="token operator">=</span></span>
<span class="line">    p<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>toppings <span class="token operator">=</span> Seq<span class="token punctuation">.</span>empty<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> updateCrustSize<span class="token punctuation">(</span>cs<span class="token operator">:</span> CrustSize<span class="token punctuation">)</span><span class="token operator">:</span> Pizza <span class="token operator">=</span></span>
<span class="line">    p<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>crustSize <span class="token operator">=</span> cs<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> updateCrustType<span class="token punctuation">(</span>ct<span class="token operator">:</span> CrustType<span class="token punctuation">)</span><span class="token operator">:</span> Pizza <span class="token operator">=</span></span>
<span class="line">    p<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>crustType <span class="token operator">=</span> ct<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="方法" tabindex="-1"><a class="header-anchor" href="#方法"><span>方法</span></a></h2><h3 id="方法定义" tabindex="-1"><a class="header-anchor" href="#方法定义"><span>方法定义</span></a></h3><p>在 Scala 2中，class、case class、trait、object和 case object 中都可以方法。在 Scala 3中，可以在这些结构之外定义，可以称为 <code>top-level</code>。方法定义语法如下：</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1337-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1337-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-1337-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">def</span> methodName<span class="token punctuation">(</span>param1<span class="token operator">:</span> Type1<span class="token punctuation">,</span> param2<span class="token operator">:</span> Type2<span class="token punctuation">)</span><span class="token operator">:</span> ReturnType <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 方法体</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><!--]--></div><div class="vp-tab" id="tab-1337-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">def</span> methodName<span class="token punctuation">(</span>param1<span class="token operator">:</span> Type1<span class="token punctuation">,</span> param2<span class="token operator">:</span> Type2<span class="token punctuation">)</span><span class="token operator">:</span> ReturnType <span class="token operator">=</span></span>
<span class="line">  <span class="token comment">// 方法体</span></span>
<span class="line">end methodName   <span class="token comment">// 可选</span></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">def</span> methodName<span class="token punctuation">(</span>param1<span class="token operator">:</span> Type1<span class="token punctuation">,</span> param2<span class="token operator">:</span> Type2<span class="token punctuation">)</span><span class="token operator">:</span> ReturnType <span class="token operator">=</span></span>
<span class="line">  <span class="token comment">// 方法体</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> sum<span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> a <span class="token operator">+</span> b</span>
<span class="line"><span class="token comment">// 省略方法的返回类型</span></span>
<span class="line"><span class="token keyword">def</span> sum<span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token operator">=</span> a <span class="token operator">+</span> b</span>
<span class="line"></span>
<span class="line"><span class="token comment">// Scala 2 需要 {}, Scala 3 不需要 {}</span></span>
<span class="line"><span class="token keyword">def</span> getStackTraceAsString<span class="token punctuation">(</span>t<span class="token operator">:</span> Throwable<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> sw <span class="token operator">=</span> <span class="token keyword">new</span> StringWriter</span>
<span class="line">  t<span class="token punctuation">.</span>printStackTrace<span class="token punctuation">(</span><span class="token keyword">new</span> PrintWriter<span class="token punctuation">(</span>sw<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  sw<span class="token punctuation">.</span>toString</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 方法参数默认值, 默认值参数可以省略(应该只能在后面,或以参数名调用方法), </span></span>
<span class="line"><span class="token keyword">def</span> makeConnection<span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> timeout<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;url=</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">url</span></span><span class="token string">, timeout=</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">timeout</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">makeConnection<span class="token punctuation">(</span><span class="token string">&quot;https://localhost&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 调用方法使用参数名称</span></span>
<span class="line">makeConnection<span class="token punctuation">(</span></span>
<span class="line">  url <span class="token operator">=</span> <span class="token string">&quot;https://localhost&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  timeout <span class="token operator">=</span> <span class="token number">2500</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 无参数方法, 在不执行其它代码的情况下, 可以省略 (); 例如集合的 size</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>仅 scala 3 支持</strong>：<code>extension</code> 关键字扩展方法，</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 定义的参数, 作为调用入口,也作为方法参数</span></span>
<span class="line"><span class="token keyword">extension</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> makeInt<span class="token punctuation">(</span>radix<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> Integer<span class="token punctuation">.</span>parseInt<span class="token punctuation">(</span>s<span class="token punctuation">,</span> radix<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token string">&quot;1&quot;</span><span class="token punctuation">.</span>makeInt<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>      <span class="token comment">// Int = 1</span></span>
<span class="line"><span class="token string">&quot;10&quot;</span><span class="token punctuation">.</span>makeInt<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>     <span class="token comment">// Int = 2</span></span>
<span class="line"><span class="token string">&quot;100&quot;</span><span class="token punctuation">.</span>makeInt<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token comment">// Int = 4</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="main" tabindex="-1"><a class="header-anchor" href="#main"><span>main</span></a></h3><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1353-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1353-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-1353-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">object</span> happyBirthday <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">def</span> happyBirthday<span class="token punctuation">(</span>age<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> others<span class="token operator">:</span> <span class="token builtin">String</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// same as before</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">    <span class="token comment">// :_* 用于传递可变参数</span></span>
<span class="line">    happyBirthday<span class="token punctuation">(</span>args<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toInt<span class="token punctuation">,</span> args<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toIndexedSeq<span class="token operator">:</span>_<span class="token operator">*</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><!--]--></div><div class="vp-tab" id="tab-1353-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><p>Scala 3 支持向方法添加 <code>@main</code> 注解，将其作为可执行程序的入口。文件名不用匹配方法名。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token annotation punctuation">@main</span> <span class="token keyword">def</span> hello<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Hello, World&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// scala run Hello.scala 启动命令</span></span>
<span class="line"></span></code></pre></div><p><strong>命令添加参数</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// String* 表示 可变 String 参数</span></span>
<span class="line"><span class="token annotation punctuation">@main</span> <span class="token keyword">def</span> happyBirthday<span class="token punctuation">(</span>age<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> others<span class="token operator">:</span> <span class="token builtin">String</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">=</span></span>
<span class="line">  <span class="token keyword">val</span> suffix <span class="token operator">=</span> <span class="token punctuation">(</span>age <span class="token operator">%</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">match</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token number">11</span> <span class="token operator">|</span> <span class="token number">12</span> <span class="token operator">|</span> <span class="token number">13</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;th&quot;</span></span>
<span class="line">    <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span>age <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">match</span></span>
<span class="line">      <span class="token keyword">case</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;st&quot;</span></span>
<span class="line">      <span class="token keyword">case</span> <span class="token number">2</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;nd&quot;</span></span>
<span class="line">      <span class="token keyword">case</span> <span class="token number">3</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;rd&quot;</span></span>
<span class="line">      <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token string">&quot;th&quot;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">val</span> sb <span class="token operator">=</span> StringBuilder<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Happy </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">age</span></span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">suffix</span></span><span class="token string"> birthday, </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">for</span> other <span class="token keyword">&lt;-</span> others <span class="token keyword">do</span> sb<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&quot; and &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>other<span class="token punctuation">)</span></span>
<span class="line">  println<span class="token punctuation">(</span>sb<span class="token punctuation">.</span>toString<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// scala run happyBirthday.scala -- 23 Lisa Peter -- 后添加参数</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>自定义参数类型</strong></p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">enum</span> Color<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Red<span class="token punctuation">,</span> Green<span class="token punctuation">,</span> Blue</span>
<span class="line"></span>
<span class="line"><span class="token comment">// scala.util.CommandLineParser.FromString 会解析 run 方法参数为 Color 类型</span></span>
<span class="line"><span class="token keyword">given</span> CommandLineParser<span class="token punctuation">.</span>FromString<span class="token punctuation">[</span>Color<span class="token punctuation">]</span> <span class="token keyword">with</span></span>
<span class="line">  <span class="token namespace">def</span> fromString<span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">.</span>valueOf<span class="token punctuation">(</span>value<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@main</span> <span class="token keyword">def</span> run<span class="token punctuation">(</span>color<span class="token operator">:</span> Color<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;The color is </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">color<span class="token punctuation">.</span>toString</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p><strong>@main 注解运行原理</strong>：<code>happyBirthday</code> 的等价代码</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">final</span> <span class="token keyword">class</span> happyBirthday <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token punctuation">{</span>CommandLineParser as CLP<span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// static 表示静态方法, 不适用自己编写的代码</span></span>
<span class="line">  <span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">static</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">    <span class="token keyword">try</span></span>
<span class="line">      happyBirthday<span class="token punctuation">(</span></span>
<span class="line">          CLP<span class="token punctuation">.</span>parseArgument<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">          CLP<span class="token punctuation">.</span>parseArgument<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">          CLP<span class="token punctuation">.</span>parseRemainingArguments<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">catch</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">case</span> error<span class="token operator">:</span> CLP<span class="token punctuation">.</span>ParseError <span class="token keyword">=&gt;</span> CLP<span class="token punctuation">.</span>showError<span class="token punctuation">(</span>error<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><!--]--></div><!--]--></div><h2 id="函数" tabindex="-1"><a class="header-anchor" href="#函数"><span>函数</span></a></h2><p><strong>方法和函数的主要区别在于：函数是一个对象，即它是一个类的实例，并且有自己的方法。</strong></p><p>Scala 支持的函数：匿名函数(anonymous function)、部分函数(partial function)、高阶函数(higher-order function)。</p><p>Scala 具有函数式编程中的大多数功能：</p><ul><li>Lambdas-匿名函数</li><li>HOF-高阶函数：可以接受其他函数作为参数，或者将函数作为返回值的函数。</li><li>不可变的集合</li></ul><h3 id="匿名函数" tabindex="-1"><a class="header-anchor" href="#匿名函数"><span>匿名函数</span></a></h3><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> ints <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 自定义匿名函数</span></span>
<span class="line"><span class="token keyword">val</span> doubledInts <span class="token operator">=</span> ints<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_ <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><strong>匿名函数长格式写法</strong></p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> doubledInts <span class="token operator">=</span> ints<span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> doubledInts <span class="token operator">=</span> ints<span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> doubledInts <span class="token operator">=</span> ints<span class="token punctuation">.</span>map<span class="token punctuation">(</span>i <span class="token keyword">=&gt;</span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p><strong>缩短匿名函数</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 最完整写法</span></span>
<span class="line"><span class="token keyword">val</span> doubledInts <span class="token operator">=</span> ints<span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// Scala 支持类型推断，可以省略 Int 类型</span></span>
<span class="line"><span class="token keyword">val</span> doubledInts <span class="token operator">=</span> ints<span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 只有一个参数，可以省略 ()</span></span>
<span class="line"><span class="token keyword">val</span> doubledInts <span class="token operator">=</span> ints<span class="token punctuation">.</span>map<span class="token punctuation">(</span>i <span class="token keyword">=&gt;</span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// Scala 中支持 _ 替代变量名称, 当参数在函数中仅使用一次</span></span>
<span class="line"><span class="token keyword">val</span> doubledInts <span class="token operator">=</span> ints<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_ <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">ints<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">ints<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>i <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">ints<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 匿名函数只接收一个参数, 且被要给方法调用</span></span>
<span class="line">ints<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="函数变量" tabindex="-1"><a class="header-anchor" href="#函数变量"><span>函数变量</span></a></h3><p>将匿名函数作为一个变量赋值给变量。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> double <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> i <span class="token operator">*</span> <span class="token number">2</span></span>
<span class="line"><span class="token keyword">val</span> triple <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> i <span class="token operator">*</span> <span class="token number">3</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用 List Map 存储</span></span>
<span class="line"><span class="token keyword">val</span> functionList <span class="token operator">=</span> List<span class="token punctuation">(</span>double<span class="token punctuation">,</span> triple<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> functionMap <span class="token operator">=</span> Map<span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;2x&quot;</span> <span class="token operator">-&gt;</span> double<span class="token punctuation">,</span></span>
<span class="line">  <span class="token string">&quot;3x&quot;</span> <span class="token operator">-&gt;</span> triple</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><h3 id="部分函数" tabindex="-1"><a class="header-anchor" href="#部分函数"><span>部分函数</span></a></h3><p>部分函数是不会为其参数类型定义类型的函数。在 Scala 中，部分函数是实现 <code>PartialFunction[A, B]</code> trait 的一元函数，其中 A 是参数类型，B 是结果类型。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> doubledOdds<span class="token operator">:</span> PartialFunction<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> i <span class="token keyword">if</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> i <span class="token operator">*</span> <span class="token number">2</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 使用 isDefinedAt 为参数检查是否定义了部分函数</span></span>
<span class="line">doubledOdds<span class="token punctuation">.</span>isDefinedAt<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment">// true</span></span>
<span class="line">doubledOdds<span class="token punctuation">.</span>isDefinedAt<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>  <span class="token comment">// false</span></span>
<span class="line"></span></code></pre></div><p><strong>部分函数使用</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 作为参数使用</span></span>
<span class="line"><span class="token keyword">val</span> res <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>collect<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">case</span> i <span class="token keyword">if</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> i <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// List(2, 6)</span></span>
<span class="line"><span class="token comment">// 参数不匹配时执行逻辑</span></span>
<span class="line">doubledOdds<span class="token punctuation">.</span>applyOrElse<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> _ <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 两个部分函数通过 orElse 组合</span></span>
<span class="line"><span class="token keyword">val</span> incrementedEvens<span class="token operator">:</span> PartialFunction<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">case</span> i <span class="token keyword">if</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">=&gt;</span> i <span class="token operator">+</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> res2 <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>collect<span class="token punctuation">(</span>doubledOdds<span class="token punctuation">.</span>orElse<span class="token punctuation">(</span>incrementedEvens<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// List(2, 3, 6)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="eta-expansion" tabindex="-1"><a class="header-anchor" href="#eta-expansion"><span>ETA-Expansion</span></a></h3><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// Scala List 中 map 函数定义</span></span>
<span class="line"><span class="token comment">// f 表示应用于每个元素的函数, 背后的过程就是 ETA-Expansion</span></span>
<span class="line"><span class="token keyword">def</span> map<span class="token punctuation">[</span>B<span class="token punctuation">]</span><span class="token punctuation">(</span>f<span class="token operator">:</span> A <span class="token keyword">=&gt;</span> B<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token punctuation">[</span>B<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 方法</span></span>
<span class="line"><span class="token keyword">def</span> times10<span class="token punctuation">(</span>i<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">10</span></span>
<span class="line"><span class="token comment">// 方法不是一个可以传递的值, 只能通过 times(10) 来调用</span></span>
<span class="line"><span class="token comment">// 通过创建一个函数值将方法转换为值, 该函数值在提供所需参数时调用该方法, 这个过程就是 ETA-Expansion</span></span>
<span class="line">List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span>times10<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 自动将 方法引用(不需要参数) 转换为调用该方法的匿名函数</span></span>
<span class="line">List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span>x <span class="token keyword">=&gt;</span> times10<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ETA-Expansion</code> 是依赖上下文的语法糖。</p><p><strong>在 Scala 2 中，只有当预期类型是函数类型时，ETA-Expansion 才会发生。</strong></p><p><strong>在 Scala 3 中，方法可以在任何地方作为值使用</strong></p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">def</span> isLessThan<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Boolean</span> <span class="token operator">=</span> x <span class="token operator">&lt;</span> y</span>
<span class="line"><span class="token comment">// Scala 2 中将报错</span></span>
<span class="line"><span class="token keyword">val</span> methods <span class="token operator">=</span> List<span class="token punctuation">(</span>isLessThan<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p><strong>手动使用 ETA-Expansion</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1455-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1455-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-1455-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> methodsA <span class="token operator">=</span> List<span class="token punctuation">(</span>isLessThan _<span class="token punctuation">)</span>               <span class="token comment">// way 1: Scala 3 不支持</span></span>
<span class="line"><span class="token keyword">val</span> methodsB <span class="token operator">=</span> List<span class="token punctuation">(</span>isLessThan<span class="token punctuation">(</span>_<span class="token punctuation">,</span> _<span class="token punctuation">)</span><span class="token punctuation">)</span>           <span class="token comment">// way 2: 通配符扩展</span></span>
<span class="line"><span class="token keyword">val</span> methodsC <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> isLessThan<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// way 3: 匿名函数</span></span>
<span class="line"></span></code></pre></div><!--]--></div><div class="vp-tab" id="tab-1455-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> methodsA <span class="token operator">=</span> List<span class="token punctuation">(</span>isLessThan<span class="token punctuation">(</span>_<span class="token punctuation">,</span> _<span class="token punctuation">)</span><span class="token punctuation">)</span>           <span class="token comment">// way 1: 通配符扩展</span></span>
<span class="line"><span class="token keyword">val</span> methodsB <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> isLessThan<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// way 2: 匿名函数</span></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><h3 id="hof" tabindex="-1"><a class="header-anchor" href="#hof"><span>HOF</span></a></h3><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// p 表示方法接收名为 p 的函数</span></span>
<span class="line"><span class="token comment">// List[+A] 的 A 类型能在函数中使用, 是因为函数 Function1[-T1,+R] 定义</span></span>
<span class="line"><span class="token keyword">def</span> filter<span class="token punctuation">(</span>p<span class="token operator">:</span> A <span class="token keyword">=&gt;</span> <span class="token builtin">Boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token punctuation">[</span>A<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><strong>自定义 HOF</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">def</span> sayHello<span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Unit</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> f<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">def</span> helloJoe<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string">&quot;Hello, Joe&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// sayHello 调用</span></span>
<span class="line">sayHello<span class="token punctuation">(</span>helloJoe<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 函数和其它参数一起使用</span></span>
<span class="line"><span class="token keyword">def</span> operation<span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> i<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> j<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> f<span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">def</span> add<span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> a <span class="token operator">+</span> b</span>
<span class="line"><span class="token keyword">def</span> subtract<span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> a <span class="token operator">-</span> b</span>
<span class="line"><span class="token keyword">def</span> multiply<span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> a <span class="token operator">*</span> b</span>
<span class="line">operation<span class="token punctuation">(</span>add<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> executeNTimes<span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Unit</span><span class="token punctuation">,</span> n<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">  <span class="token keyword">for</span> i <span class="token keyword">&lt;-</span> <span class="token number">1</span> to <span class="token namespace">n</span> <span class="token keyword">do</span> f<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">executeNTimes<span class="token punctuation">(</span>helloJoe<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>函数变量和函数参数的关系</strong></p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// 定义一个函数变量</span></span>
<span class="line"><span class="token keyword">val</span> f<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> a <span class="token operator">+</span> b</span>
<span class="line"><span class="token comment">// 定义一个接收函数的参数</span></span>
<span class="line"><span class="token keyword">def</span> operation<span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"></span></code></pre></div><p><strong>自定义 map 方法</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// List[Int] =&gt; 转换成任意类型</span></span>
<span class="line"><span class="token keyword">def</span> map<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> A<span class="token punctuation">,</span> xs<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token punctuation">[</span>A<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">for</span> x <span class="token keyword">&lt;-</span> xs <span class="token keyword">yield</span> f<span class="token punctuation">(</span>x<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> map<span class="token punctuation">[</span>A<span class="token punctuation">,</span> B<span class="token punctuation">]</span><span class="token punctuation">(</span>f<span class="token operator">:</span> A <span class="token keyword">=&gt;</span> B<span class="token punctuation">,</span> xs<span class="token operator">:</span> List<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token punctuation">[</span>B<span class="token punctuation">]</span> <span class="token operator">=</span> </span>
<span class="line">  <span class="token keyword">for</span> x <span class="token keyword">&lt;-</span> xs <span class="token keyword">yield</span> f<span class="token punctuation">(</span>x<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> double<span class="token punctuation">(</span>i <span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">2</span></span>
<span class="line">map<span class="token punctuation">(</span>double<span class="token punctuation">,</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> strlen<span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> s<span class="token punctuation">.</span>length</span>
<span class="line">map<span class="token punctuation">(</span>strlen<span class="token punctuation">,</span> List<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bb&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ccc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>方法返回一个函数</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// greet 方法返回一个函数, 接收一个 Stirng 参数, 并打印它</span></span>
<span class="line"><span class="token keyword">def</span> greet<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> </span>
<span class="line">  <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Hello, </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> greetFunction <span class="token operator">=</span> greet<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">greetFunction<span class="token punctuation">(</span><span class="token string">&quot;World !&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 改进方法</span></span>
<span class="line"><span class="token keyword">def</span> greet<span class="token punctuation">(</span>theGreeting<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">String</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> </span>
<span class="line">  <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">theGreeting</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">val</span> hello <span class="token operator">=</span> greet<span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span></span>
<span class="line">hello<span class="token punctuation">(</span><span class="token string">&quot;World !&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 函数工厂, 根据方法的参数类型, 返回不同的函数</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="package-和-import" tabindex="-1"><a class="header-anchor" href="#package-和-import"><span>package 和 import</span></a></h2><p>Scala 使用 package 创建命名空间，支持模块化编程，编码命名空间的冲突。Scala 支持使用 Java 的命名格式，以及 <code>C++</code> 和 <code>C#</code> 等语言使用 <code>{}</code> 表示命名空间。</p><p>Scala 的 import 和 Java 类似，并且更灵活：</p><ul><li>import package、class、object、trait、method；</li><li>import 支持在任意位置；</li><li>隐藏和重命名导入的成员。</li></ul><h3 id="package" tabindex="-1"><a class="header-anchor" href="#package"><span>package</span></a></h3><p>包名称应全部为小写，命名约定：top-level-domain.domain-name.project-name.module-name</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>oycm<span class="token punctuation">.</span>example<span class="token punctuation">.</span>model</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> Person <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"></span></code></pre></div><p><strong>在同一个文件中定义多个包，注意缩进</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1519-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1519-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-1519-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">users</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">package</span> <span class="token namespace">administrators</span> <span class="token punctuation">{</span>  <span class="token comment">// the full name of this package is users.administrators</span></span>
<span class="line">    <span class="token keyword">class</span> AdminUser        <span class="token comment">// the full name of this class users.administrators.AdminUser</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">package</span> <span class="token namespace">normalusers</span> <span class="token punctuation">{</span>     <span class="token comment">// the full name of this package is users.normalusers</span></span>
<span class="line">    <span class="token keyword">class</span> NormalUser       <span class="token comment">// the full name of this class is users.normalusers.NormalUser</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><!--]--></div><div class="vp-tab" id="tab-1519-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">users</span><span class="token operator">:</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">package</span> <span class="token namespace">administrators</span><span class="token operator">:</span>  <span class="token comment">// users.administrators</span></span>
<span class="line">    <span class="token keyword">class</span> AdminUser        <span class="token comment">// users.administrators.AdminUser</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">package</span> <span class="token namespace">normalusers</span><span class="token operator">:</span>     <span class="token comment">// users.normalusers</span></span>
<span class="line">    <span class="token keyword">class</span> NormalUser       <span class="token comment">// users.normalusers.NormalUser</span></span>
<span class="line"></span></code></pre></div><!--]--></div><!--]--></div><h3 id="import" tabindex="-1"><a class="header-anchor" href="#import"><span>import</span></a></h3><p>import 语句用于导入其它包的实体。导入语法与 Java 类似，但略有不同。导入语句分为两类：</p><ul><li>import class、trait、object、function、method；</li><li>import given clauses。</li></ul><p><strong>默认导入</strong>：</p><ul><li><code>java.lang.*</code></li><li><code>scala.*</code></li><li>Scala 对象的 <code>Predef</code> 成员也会导入，这是能直接使用 Scala 的 List、Map 等对象的原因</li></ul><p><strong>普通 Import</strong></p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-1568-0" aria-selected="true">Scala 2</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-1568-1" aria-selected="false">Scala 3</button></div><!--[--><div class="vp-tab active" id="tab-1568-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Scala 2</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token namespace">users<span class="token punctuation">.</span></span>_                            <span class="token comment">// 从 users 包导入所有内容</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">users<span class="token punctuation">.</span></span>User                         <span class="token comment">// 只导入 User Class</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">users<span class="token punctuation">.</span></span><span class="token punctuation">{</span>User<span class="token punctuation">,</span> UserPreferences<span class="token punctuation">}</span>      <span class="token comment">// 只导入 2 个指定的 Class</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">users<span class="token punctuation">.</span></span><span class="token punctuation">{</span>UserPreferences <span class="token keyword">=&gt;</span> UPrefs<span class="token punctuation">}</span>  <span class="token comment">// 导入后重命名</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token punctuation">{</span>Random <span class="token keyword">=&gt;</span> _<span class="token punctuation">,</span> _<span class="token punctuation">}</span>         <span class="token comment">// 隐藏 java.util.Random 并导入 java.util 的其它内容</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token punctuation">{</span>List <span class="token keyword">=&gt;</span> _<span class="token punctuation">,</span> Map <span class="token keyword">=&gt;</span> _<span class="token punctuation">,</span> Set <span class="token keyword">=&gt;</span> _<span class="token punctuation">,</span> _<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 在 class 中 使用</span></span>
<span class="line"><span class="token keyword">class</span> ClassA <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Random</span>
<span class="line">  <span class="token keyword">def</span> printRandom<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> r <span class="token operator">=</span> <span class="token keyword">new</span> Random</span>
<span class="line">    <span class="token comment">// more code here...</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 静态导入, 直接使用 Math 的成员</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Math<span class="token punctuation">.</span>_</span>
<span class="line"></span>
<span class="line"><span class="token comment">// 解决命名冲突, 从根目录导入内容</span></span>
<span class="line"><span class="token keyword">package</span> <span class="token namespace">accounts</span></span>
<span class="line"><span class="token keyword">import</span> _root_<span class="token punctuation">.</span>accounts<span class="token punctuation">.</span>_</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-1568-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Scala 3</div><!--[--><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token namespace">users<span class="token punctuation">.</span></span><span class="token operator">*</span>                            <span class="token comment">// 从 users 包导入所有内容</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">users<span class="token punctuation">.</span></span>User                         <span class="token comment">// 只导入 User Class</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">users<span class="token punctuation">.</span></span><span class="token punctuation">{</span>User<span class="token punctuation">,</span> UserPreferences<span class="token punctuation">}</span>      <span class="token comment">// 只导入 2 个指定的 Class</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">users<span class="token punctuation">.</span></span><span class="token punctuation">{</span>UserPreferences as UPrefs<span class="token punctuation">}</span>  <span class="token comment">// 导入后重命名</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token punctuation">{</span>Random as _<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">}</span>         <span class="token comment">// 隐藏 java.util.Random 并导入 java.util 的其它内容</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token punctuation">{</span>List as _<span class="token punctuation">,</span> Map as _<span class="token punctuation">,</span> Set as _<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 在 class 中 使用</span></span>
<span class="line"><span class="token keyword">class</span> ClassA<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Random</span>
<span class="line">  <span class="token keyword">def</span> printRandom<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span></span>
<span class="line">    <span class="token keyword">val</span> r <span class="token operator">=</span> <span class="token keyword">new</span> Random</span>
<span class="line"></span>
<span class="line"><span class="token comment">// 静态导入, 直接使用 Math 的成员</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Math<span class="token punctuation">.</span>*</span>
<span class="line"></span>
<span class="line"><span class="token comment">// 解决命名冲突, 从根目录导入内容</span></span>
<span class="line"><span class="token keyword">package</span> <span class="token namespace">accounts</span></span>
<span class="line"><span class="token keyword">import</span> _root_<span class="token punctuation">.</span>accounts<span class="token punctuation">.</span>*</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p><strong>Import given(Scala 3)</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">object</span> A<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">class</span> TC</span>
<span class="line">  <span class="token keyword">given</span> tc<span class="token operator">:</span> TC</span>
<span class="line">  <span class="token keyword">def</span> f<span class="token punctuation">(</span><span class="token keyword">using</span> TC<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> B<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">import</span> A<span class="token punctuation">.</span>*       <span class="token comment">// 导入所有 non-given 成员</span></span>
<span class="line">  <span class="token keyword">import</span> A<span class="token punctuation">.</span><span class="token keyword">given</span>   <span class="token comment">// 导入所有 given 成员</span></span>
<span class="line"><span class="token comment">// 合并写法</span></span>
<span class="line"><span class="token keyword">object</span> B<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">import</span> A<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token keyword">given</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 按给定类型导入</span></span>
<span class="line"><span class="token keyword">import</span> A<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token keyword">given</span> TC<span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">import</span> A<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token keyword">given</span> T1<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token keyword">given</span> Tn<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">object</span> Instances<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">given</span> intOrd<span class="token operator">:</span> Ordering<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token keyword">given</span> listOrd<span class="token punctuation">[</span>T<span class="token operator">:</span> Ordering<span class="token punctuation">]</span><span class="token operator">:</span> Ordering<span class="token punctuation">[</span>List<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token keyword">given</span> ec<span class="token operator">:</span> ExecutionContext <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">  <span class="token keyword">given</span> im<span class="token operator">:</span> Monoid<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token comment">// 导入了 intOrd、listOrd、ec</span></span>
<span class="line"><span class="token keyword">import</span> Instances<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token keyword">given</span> Ordering<span class="token punctuation">[</span><span class="token operator">?</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">given</span> ExecutionContext<span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 类型和名称同时使用，类型放后面</span></span>
<span class="line"><span class="token keyword">import</span> Instances<span class="token punctuation">.</span><span class="token punctuation">{</span>im<span class="token punctuation">,</span> <span class="token keyword">given</span> Ordering<span class="token punctuation">[</span><span class="token operator">?</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="单例对象" tabindex="-1"><a class="header-anchor" href="#单例对象"><span>单例对象</span></a></h2><p>单例对象(Singleton)是一种设计模式，它确保一个类只有一个实例，并提供一个全局访问点来访问该实例。</p><p>在 Scala 中，<code>object</code> 关键字创建一个单例对象，<code>object</code> 定义的 <code>class</code> 只有一个实例。</p><p>这种对象的作用：</p><ul><li>工具类方法的集合：方法的访问像 Java 的 <code>static method</code>一样。</li><li>companion object：在一个文件中，class 类和 object 类有相同的名称，class 类能访问 object 的方法。</li><li>实现 <code>trait</code> 创建对象。</li></ul><h2 id="集合" tabindex="-1"><a class="header-anchor" href="#集合"><span>集合</span></a></h2><p><strong>创建不可变集合：</strong></p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> a <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>           <span class="token comment">// a: List[Int] = List(1, 2, 3)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> b <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toList         <span class="token comment">// b: List[Int] = List(1, 2, 3, 4, 5)</span></span>
<span class="line"><span class="token keyword">val</span> c <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">10</span> by <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toList   <span class="token comment">// c: List[Int] = List(1, 3, 5, 7, 9)</span></span>
<span class="line"><span class="token keyword">val</span> e <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> until <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toList      <span class="token comment">// e: List[Int] = List(1, 2, 3, 4)</span></span>
<span class="line"><span class="token keyword">val</span> f <span class="token operator">=</span> List<span class="token punctuation">.</span>range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>        <span class="token comment">// f: List[Int] = List(1, 2, 3, 4)</span></span>
<span class="line"><span class="token keyword">val</span> g <span class="token operator">=</span> List<span class="token punctuation">.</span>range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>    <span class="token comment">// g: List[Int] = List(1, 4, 7)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p><strong>集合方法：</strong></p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> a <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>      <span class="token comment">// List(10, 20, 30, 40, 10)</span></span>
<span class="line"></span>
<span class="line">a<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>                             <span class="token comment">// List(30, 40, 10) </span></span>
<span class="line">a<span class="token punctuation">.</span>dropWhile<span class="token punctuation">(</span>_ <span class="token operator">&lt;</span> <span class="token number">25</span><span class="token punctuation">)</span>                   <span class="token comment">// List(30, 40, 10) 分界点</span></span>
<span class="line">a<span class="token punctuation">.</span>filter<span class="token punctuation">(</span>_ <span class="token operator">&lt;</span> <span class="token number">25</span><span class="token punctuation">)</span>                      <span class="token comment">// List(10, 20, 10) 所有匹配</span></span>
<span class="line">a<span class="token punctuation">.</span>slice<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>                          <span class="token comment">// List(30, 40) </span></span>
<span class="line">a<span class="token punctuation">.</span>tail                                <span class="token comment">// List(20, 30, 40, 10) 去头</span></span>
<span class="line">a<span class="token punctuation">.</span>take<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>                             <span class="token comment">// List(10, 20, 30)</span></span>
<span class="line">a<span class="token punctuation">.</span>takeWhile<span class="token punctuation">(</span>_ <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span>                   <span class="token comment">// List(10, 20) 分界点</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// flatten</span></span>
<span class="line"><span class="token keyword">val</span> a <span class="token operator">=</span> List<span class="token punctuation">(</span>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> List<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">a<span class="token punctuation">.</span>flatten                             <span class="token comment">// List(1, 2, 3, 4)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// map, flatMap</span></span>
<span class="line"><span class="token keyword">val</span> nums <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">)</span></span>
<span class="line">nums<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_<span class="token punctuation">.</span>toUpperCase<span class="token punctuation">)</span>               <span class="token comment">// List(&quot;ONE&quot;, &quot;TWO&quot;)</span></span>
<span class="line">nums<span class="token punctuation">.</span>flatMap<span class="token punctuation">(</span>_<span class="token punctuation">.</span>toUpperCase<span class="token punctuation">)</span>           <span class="token comment">// List(&#39;O&#39;, &#39;N&#39;, &#39;E&#39;, &#39;T&#39;, &#39;W&#39;, &#39;O&#39;)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">// foldLeft reduceLeft</span></span>
<span class="line"><span class="token keyword">val</span> firstTen <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toList</span>
<span class="line">firstTen<span class="token punctuation">.</span>reduceLeft<span class="token punctuation">(</span>_ <span class="token operator">+</span> _<span class="token punctuation">)</span>                 <span class="token comment">// 55</span></span>
<span class="line">firstTen<span class="token punctuation">.</span>foldLeft<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_ <span class="token operator">+</span> _<span class="token punctuation">)</span>              <span class="token comment">// 155 (100 is a “seed” value)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Tuple</strong>：将不同的类型放入一个容器集合，2-22 元素。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Person<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">&quot;eleven&quot;</span><span class="token punctuation">,</span> Person<span class="token punctuation">(</span><span class="token string">&quot;Eleven&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">t<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 提取 tuple 中的值到变量</span></span>
<span class="line"><span class="token keyword">val</span> <span class="token punctuation">(</span>num<span class="token punctuation">,</span> str<span class="token punctuation">,</span> person<span class="token punctuation">)</span> <span class="token operator">=</span> t</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="contextual-abstraactions" tabindex="-1"><a class="header-anchor" href="#contextual-abstraactions"><span>Contextual Abstraactions</span></a></h2><p>在某些情况下，省略一些被视为重复的方法参数调用。</p><div class="language-scala" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">val</span> addresses<span class="token operator">:</span> List<span class="token punctuation">[</span>Address<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line">addresses<span class="token punctuation">.</span>sortBy<span class="token punctuation">(</span>address <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span>address<span class="token punctuation">.</span>city<span class="token punctuation">,</span> address<span class="token punctuation">.</span>street<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 省略了排序比较的逻辑</span></span>
<span class="line"><span class="token comment">// Scala 2</span></span>
<span class="line">addresses<span class="token punctuation">.</span>sortBy<span class="token punctuation">(</span>address <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span>address<span class="token punctuation">.</span>city<span class="token punctuation">,</span> address<span class="token punctuation">.</span>street<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Ordering<span class="token punctuation">.</span>Tuple2<span class="token punctuation">(</span>Ordering<span class="token punctuation">.</span><span class="token builtin">String</span><span class="token punctuation">,</span> Ordering<span class="token punctuation">.</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// Scala 3</span></span>
<span class="line">addresses<span class="token punctuation">.</span>sortBy<span class="token punctuation">(</span>address <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span>address<span class="token punctuation">.</span>city<span class="token punctuation">,</span> address<span class="token punctuation">.</span>street<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">using</span> Ordering<span class="token punctuation">.</span>Tuple2<span class="token punctuation">(</span>Ordering<span class="token punctuation">.</span><span class="token builtin">String</span><span class="token punctuation">,</span> Ordering<span class="token punctuation">.</span><span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="toplevel-definitions" tabindex="-1"><a class="header-anchor" href="#toplevel-definitions"><span>Toplevel Definitions</span></a></h2><p>在 Scala 3 中，在源代码的顶层编写以下代码。</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span></span>ArrayBuffer</span>
<span class="line"></span>
<span class="line"><span class="token keyword">enum</span> Topping<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">case</span> Cheese<span class="token punctuation">,</span> Pepperoni<span class="token punctuation">,</span> Mushrooms</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> Topping<span class="token punctuation">.</span>*</span>
<span class="line"><span class="token keyword">class</span> Pizza<span class="token operator">:</span></span>
<span class="line">  <span class="token keyword">val</span> toppings <span class="token operator">=</span> ArrayBuffer<span class="token punctuation">[</span>Topping<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> p <span class="token operator">=</span> Pizza<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">extension</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> capitalizeAllWords <span class="token operator">=</span> s<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span>_<span class="token punctuation">.</span>capitalize<span class="token punctuation">)</span><span class="token punctuation">.</span>mkString<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">val</span> hwUpper <span class="token operator">=</span> <span class="token string">&quot;hello, world&quot;</span><span class="token punctuation">.</span>capitalizeAllWords</span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Money <span class="token operator">=</span> BigDecimal</span>
<span class="line"></span>
<span class="line"><span class="token comment">// more definitions here as desired ...</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@main</span> <span class="token keyword">def</span> myApp <span class="token operator">=</span></span>
<span class="line">  p<span class="token punctuation">.</span>toppings <span class="token operator">+=</span> Cheese</span>
<span class="line">  println<span class="token punctuation">(</span><span class="token string">&quot;show me the code&quot;</span><span class="token punctuation">.</span>capitalizeAllWords<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="http://github.com/FirstBloodForJava/vuepress-blog/edit/main/docs/spark/Scala.md" aria-label="在 GitHub 上编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->在 GitHub 上编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1164864987@qq.com">oycm</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: mingorg@163.com">ouyangcm</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/vuepress-blog/assets/app-BIGZvh4f.js" defer></script>
  </body>
</html>
